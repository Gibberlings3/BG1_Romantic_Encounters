/* BG1RE - Baldur's Gate Romantic Encounters, a mod for BG1, Tutu, BGT, BG:EE, and EET 

*/


BACKUP ~bg1re/backup~
AUTHOR ~Please post in the G3 forum for help, refer to readme.~ //for bugreports

//MODDER
VERSION ~11.0pre~

README ~bg1re/bg1re.readme.%LANGUAGE%.txt~ ~bg1re/bg1re.readme.english.txt~

ALWAYS

/////////////////////////////////////
/* These actions are processed for every component: */

/* check for a ready SoD (doesn't work on Windows...) */

ACTION_IF ((FILE_EXISTS ~dlc/sod-dlc.zip~) OR (FILE_EXISTS ~sod-dlc.zip~)) THEN BEGIN
  FAIL ~Your SoD game needs to be modmerged before mods can be installed on this game. Check the readme for more information and a link to download the DLC Merger or Modmerge.~
END


/* DavidW's code for unifying the area script patching. With many thanks! 
To be used later in the form:

  LAF extend_area_script STR_VAR area="%Candlekeep%" top="bg1re/script/AR2600.baf"   END
*/
  DEFINE_ACTION_FUNCTION extend_area_script 
    STR_VAR area=""
            top=""
            bottom=""
    BEGIN
      // find the area script from the area file
      COPY_EXISTING "%area%.are" override
           READ_ASCII 0x94 script
      BUT_ONLY
      // if it doesn't exist, give it a default name
      ACTION_IF "%script%" STRING_EQUAL "" BEGIN
          OUTER_INNER_PATCH_SAVE script "%area%" BEGIN
                REPLACE_TEXTUALLY "FW" "_AR" // TUTU naming conventions
          END

  // added by argent77: assign area script if needed
          COPY_EXISTING "%area%.are" override
                WRITE_ASCIIE 0x94 ~%script%~ #8


      END
      // extend the script
      ACTION_IF "%top%" STRING_COMPARE "" BEGIN
        EXTEND_TOP "%script%.bcs" "%top%" EVALUATE_BUFFER
      END
      ACTION_IF "%bottom%" STRING_COMPARE "" BEGIN
       EXTEND_BOTTOM "%script%.bcs" "%bottom%" EVALUATE_BUFFER
      END
    END 


/* argent77's function for fetching journal strrefs. With many thanks! */

/* To be used later in the form:

COPY_EXISTING ~husam.dlg~ ~override~
  // get journal entry from first response associated with dialogue state 6
  LPF READ_JOURNAL_STRREF
  INT_VAR
    state = 6
//    stateResponse = 1 //As an example: This would be reply option #2 from top
  RET
    strref
END

    SET myUniqueVar = strref //adapt "myUniqueVar" as necessary

  // just for debugging purposes: fetch journal text from strref and output it in console
  GET_STRREF strref journalText
  PATCH_PRINT ~Journal entry #%strref%: %journalText%~
BUT_ONLY

*/

DEFINE_PATCH_FUNCTION READ_JOURNAL_STRREF
INT_VAR
  // either use these two parameters if response index should be determined from a state index
  state         = "-1"  // state index
  stateResponse = 0     // relative response index (e.g. 0 for first response associated with the state, 1 for second response, and so on...)

  // or use this parameter instead to specify response index directly
  response      = "-1"  // (absolute) response index

RET
  strref    // returned string reference, or -1 if not available
BEGIN
  SET strref = "-1"

  // determine response index from dialogue state if specified
  PATCH_IF (state >= 0) BEGIN
    READ_LONG 0x08 numStates
    PATCH_IF (state < numStates) BEGIN
      READ_LONG 0x0c ofsStates
      SET ofs = ofsStates + (state * 0x10)  // calculate offset to specified state
      READ_LONG (ofs + 4) firstResponse
      READ_LONG (ofs + 8) numStateResponses
      PATCH_IF (stateResponse >= 0 && stateResponse < numStateResponses) BEGIN
        SET response = firstResponse + stateResponse  // calculate absolute response index (processed below)
      END
    END
  END

  // deal with dialogue response index directly
  PATCH_IF (response >= 0) BEGIN
    READ_LONG 0x10 numResponses
    PATCH_IF (response < numResponses) BEGIN
      READ_LONG 0x14 ofsResponses
      SET ofs = ofsResponses + (response * 0x20)
      READ_LONG ofs flags
      PATCH_IF (flags & BIT4) BEGIN   // response flags bit 4 indicates available journal entry
        READ_LONG (ofs + 8) strref
      END
    END
  END
END


/* reading of variables */

  ACTION_IF GAME_IS ~tutu tutu_totsc~ THEN BEGIN
    PRINT @0 /*~Baldur's Gate Tutu detected~*/

	INCLUDE ~bg1re/lib/g3_tutu_cpmvars.tpa~
    INCLUDE ~bg1re/lib/rr_tutubgt_addvars.tpa~


 /* additional things needed for BG1 / BG1(TotSC) / Tutu / BGT differences */

    OUTER_SPRINT ~FACEOBJECT_PC_10~ ~FaceObject(Player1)~
    OUTER_SPRINT ~FACEOBJECT_PC_08~ ~FaceObject(Player1)~
    OUTER_SPRINT ~FACEOBJECT_Niklos_2~ ~FaceObject("%tutu_var%niklos")~
    OUTER_SPRINT ~FACEOBJECT_Slythe_2~ ~FaceObject("Slythe")~
    OUTER_SPRINT ~MINSCSLUMBERPARTY_REST~ ~RestParty()~

    OUTER_SPRINT ~AreaType_Outdoor_MinscSlumberparty~ ~AreaType("OUTDOOR")~
    OUTER_SPRINT ~AreaType_Outdoor~ ~AreaType("OUTDOOR")~

    OUTER_SPRINT ~ELTANDLG_HARBORMASTER~ ~_DELTAN2~
    OUTER_SPRINT ~ELTANDLG_STATE~ ~2~

    OUTER_SPRINT ~NEERA_JOINED~ ~BGEEFAKE~ //do not use this. Use IF_FILE_EXISTS instead

    OUTER_SPRINT ~STARTDIALOGNOSET~ ~StartDialogueNoSet~
    OUTER_SPRINT ~ISGABBERPLAYER1~ ~IsGabber(Player1)~
    OUTER_SPRINT ~NOT_ISGABBERPLAYER1~ ~!IsGabber(Player1)~
    OUTER_SPRINT ~RESTPARTY~ ~RestParty()~
    OUTER_SPRINT ~DisplayStringHead~ ~DisplayStringHead~
    OUTER_SPRINT ~ZOMBIE~ ~ZOMBIE~
    OUTER_SPRINT ~SCARBODYBAM~ ~IMISC5F~
    OUTER_SPRINT ~_ALL~ ~_ALL~
    OUTER_SPRINT ~CombatCounter_0~ ~CombatCounter(0)~
    OUTER_SPRINT ~10_CHARGES~ ~1~
    OUTER_SPRINT ~_LOW~ ~_LOW~

    OUTER_SPRINT ~Class_Player1_Monk~ ~Class(Player1,MONK)~ 
    OUTER_SPRINT ~Class_Player1_Shaman~ ~False()~ 
    OUTER_SPRINT ~NBaldursGate_BCS~ ~_AR0200~
    OUTER_SPRINT "SWBaldursGate_FlamingFistHQ_L1_BCS" "_AR0607"
    OUTER_SPRINT "FishingVillage_BCS" "_AR1400"
    OUTER_SPRINT "JAHEIRA_DREAM_BCS" "_JAHEID.BCS"
    
    OUTER_SPRINT "eet_var" ""
    OUTER_SPRINT ~DAYNIGHT~ ~<DAYNIGHT>~


/* component "Messenger 2" adds to Garrick kickout dialogue, for vanilla BG1, the joined dialogue is used upon kickout and xxxP.dlg upon rejoin */
    OUTER_SPRINT ~GARRICK_KICKOUT_STATE~ ~0~
    OUTER_SPRINT ~GARRICK_POST_KICKOUT~ ~_GARRIP~
    OUTER_SPRINT ~GARRICK_KICKOUT_STATE_2~ ~0~

  END 



  ACTION_IF GAME_IS ~bgt~ THEN BEGIN
    PRINT @1 /*~Baldur's Gate Trilogy detected~*/

    INCLUDE ~bg1re/lib/g3_bgt_cpmvars.tpa~ 
    INCLUDE ~bg1re/lib/rr_tutubgt_addvars.tpa~

    /* additional things needed for BG1 / BG1(TotSC) / Tutu / BGT differences */


    OUTER_SPRINT ~FACEOBJECT_PC_10~ ~FaceObject(Player1)~
    OUTER_SPRINT ~FACEOBJECT_PC_08~ ~FaceObject(Player1)~
    OUTER_SPRINT ~FACEOBJECT_Niklos_2~ ~FaceObject("%tutu_var%niklos")~
    OUTER_SPRINT ~FACEOBJECT_Slythe_2~ ~FaceObject("Slythe")~
    OUTER_SPRINT ~MINSCSLUMBERPARTY_REST~ ~RestParty()~

    OUTER_SPRINT ~AreaType_Outdoor_MinscSlumberparty~ ~AreaType("OUTDOOR")~
    OUTER_SPRINT ~AreaType_Outdoor~ ~AreaType("OUTDOOR")~

    OUTER_SPRINT ~ELTANDLG_HARBORMASTER~ ~DELTAN2~
    OUTER_SPRINT ~ELTANDLG_STATE~ ~2~

    OUTER_SPRINT ~NEERA_JOINED~ ~BGEEFAKE~


    OUTER_SPRINT ~STARTDIALOGNOSET~ ~StartDialogueNoSet~
    OUTER_SPRINT ~ISGABBERPLAYER1~ ~IsGabber(Player1)~
    OUTER_SPRINT ~NOT_ISGABBERPLAYER1~ ~!IsGabber(Player1)~
    OUTER_SPRINT ~RESTPARTY~ ~RestParty()~
    OUTER_SPRINT ~DisplayStringHead~ ~DisplayStringHead~
    OUTER_SPRINT ~ZOMBIE~ ~ZOMBIE~
    OUTER_SPRINT ~SCARBODYBAM~ ~IMISC5F~
    OUTER_SPRINT ~_ALL~ ~_ALL~
    OUTER_SPRINT ~CombatCounter_0~ ~CombatCounter(0)~
    OUTER_SPRINT ~10_CHARGES~ ~1~
    OUTER_SPRINT ~_LOW~ ~~

    OUTER_SPRINT ~Class_Player1_Monk~ ~Class(Player1,MONK)~ 
    OUTER_SPRINT ~Class_Player1_Shaman~ ~False()~ 

    OUTER_SPRINT ~NBaldursGate_BCS~ ~AR7300~
    OUTER_SPRINT "SWBaldursGate_FlamingFistHQ_L1_BCS" "AR7607"
    OUTER_SPRINT "FishingVillage_BCS" "AR8300"
    OUTER_SPRINT "JAHEIRA_DREAM_BCS" "JAHEIRAD.BCS"

    OUTER_SPRINT "eet_var" ""
    OUTER_SPRINT ~DAYNIGHT~ ~<DAYNIGHT>~

/* component "Messenger 2" adds to Garrick kickout dialogue, for vanilla BG1, the joined dialogue is used upon kickout and xxxP.dlg upon rejoin */
    OUTER_SPRINT ~GARRICK_KICKOUT_STATE~ ~0~
    OUTER_SPRINT ~GARRICK_POST_KICKOUT~ ~GARRIP~
    OUTER_SPRINT ~GARRICK_KICKOUT_STATE_2~ ~2~
  END 


  ACTION_IF GAME_IS ~bg1 totsc~ THEN BEGIN
    PRINT @3 /* ~Classic Baldur's Gate detected~ */

    INCLUDE ~bg1re/lib/g3_bg_cpmvars.tpa~

    /* additional things needed for BG1 / BG1(TotSC) differences: */
    /* general things */

    OUTER_SPRINT ~ISGABBERPLAYER1~ ~Range(Player1,5)~
    OUTER_SPRINT ~NOT_ISGABBERPLAYER1~ ~!Range(Player1,5)~
    OUTER_SPRINT ~DisplayStringHead~ ~DisplayString~
    OUTER_SPRINT ~ZOMBIE~ ~GHOUL~
    OUTER_SPRINT ~SCARBODYBAM~ ~IMISC55~
    OUTER_SPRINT ~_ALL~ ~~
    OUTER_SPRINT ~CombatCounter_0~ ~~
    OUTER_SPRINT ~10_CHARGES~ ~10~
    OUTER_SPRINT ~AreaType_Outdoor_MinscSlumberparty~ ~False()~
    OUTER_SPRINT ~AreaType_Outdoor~ ~~
    OUTER_SPRINT ~_LOW~ ~_LOW~

    OUTER_SPRINT ~Class_Player1_Monk~ ~False()~ 
    OUTER_SPRINT ~Class_Player1_Shaman~ ~False()~ 

    OUTER_SPRINT ~RESTPARTY~ ~ClearAllActions()
				StartCutSceneMode()
				CutSceneId(Player1)
				FadeToColor([20.0],0) 
				Wait(5)
				Rest()
				ActionOverride(Player2,Rest())
				ActionOverride(Player3,Rest())
				ActionOverride(Player4,Rest())
				ActionOverride(Player5,Rest())
				ActionOverride(Player6,Rest())
				Wait(10) 
				FadeFromColor([20.0],0)
				Wait(1)
				EndCutSceneMode()~


    OUTER_SPRINT ~FACEOBJECT_PC_10~ ~Face(10)~
    OUTER_SPRINT ~FACEOBJECT_PC_08~ ~Face(8)~
    OUTER_SPRINT ~FACEOBJECT_Niklos_2~ ~Face(2)~
    OUTER_SPRINT ~FACEOBJECT_Slythe_2~ ~Face(2)~

    OUTER_SPRINT ~MINSCSLUMBERPARTY_REST~ ~ClearAllActions()
				StartCutSceneMode()
				StartCutScene("re1gbmic")~

    OUTER_SPRINT ~ELTANDLG_HARBORMASTER~ ~DELTAN~
    OUTER_SPRINT ~ELTANDLG_STATE~ ~14~

    OUTER_SPRINT ~NEERA_JOINED~ ~BGEEFAKE~

    OUTER_SPRINT ~NBaldursGate_BCS~ ~AR0200~
    OUTER_SPRINT "SWBaldursGate_FlamingFistHQ_L1_BCS" "AR7607"
    OUTER_SPRINT "FishingVillage_BCS" "AR1400"


    OUTER_SPRINT "eet_var" ""
    OUTER_SPRINT ~DAYNIGHT~ ~day~


/* component "Messenger 2" adds to Garrick kickout dialogue, for vanilla BG1, the joined dialogue is used upon kickout and xxxP.dlg upon rejoin */
    OUTER_SPRINT ~GARRICK_KICKOUT_STATE~ ~1~
    OUTER_SPRINT ~GARRICK_POST_KICKOUT~ ~GARRIJ~
    OUTER_SPRINT ~GARRICK_KICKOUT_STATE_2~ ~2~

    ACTION_IF GAME_IS ~totsc~ THEN BEGIN
      INCLUDE ~bg1re/lib/rr_totsc_addvars.tpa~
      OUTER_SPRINT ~STARTDIALOGNOSET~ ~StartDialogueNoSet~
    END

    ACTION_IF GAME_IS ~bg1~ THEN BEGIN
      INCLUDE ~bg1re/lib/rr_bg1_addvars.tpa~
      OUTER_SPRINT ~STARTDIALOGNOSET~ ~Dialogue~
    END

  END


  /* BG:EE version! ---------------------- */

  ACTION_IF GAME_IS ~bgee~ THEN BEGIN

    /* Tell the player it is using bgee */
    PRINT @4 /* ~BG:EE detected...~ */
      INCLUDE ~bg1re/lib/g3_bgee_cpmvars.tpa~
      INCLUDE ~bg1re/lib/rr_tutubgt_addvars.tpa~

    /* additional things needed for BG1 / BG1(TotSC) / Tutu / BGT differences */

    OUTER_SPRINT ~FACEOBJECT_PC_10~ ~FaceObject(Player1)~
    OUTER_SPRINT ~FACEOBJECT_PC_08~ ~FaceObject(Player1)~
    OUTER_SPRINT ~FACEOBJECT_Niklos_2~ ~FaceObject("%tutu_var%niklos")~
    OUTER_SPRINT ~FACEOBJECT_Slythe_2~ ~FaceObject("Slythe")~
    OUTER_SPRINT ~MINSCSLUMBERPARTY_REST~ ~RestParty()~

    OUTER_SPRINT ~AreaType_Outdoor_MinscSlumberparty~ ~AreaType("OUTDOOR")~
    OUTER_SPRINT ~AreaType_Outdoor~ ~AreaType("OUTDOOR")~

    OUTER_SPRINT ~ELTANDLG_HARBORMASTER~ ~DELTAN2~
    OUTER_SPRINT ~ELTANDLG_STATE~ ~2~

    OUTER_SPRINT ~NEERA_JOINED~ ~NeeraJ~

    OUTER_SPRINT ~STARTDIALOGNOSET~ ~StartDialogueNoSet~
    OUTER_SPRINT ~ISGABBERPLAYER1~ ~IsGabber(Player1)~
    OUTER_SPRINT ~NOT_ISGABBERPLAYER1~ ~!IsGabber(Player1)~
    OUTER_SPRINT ~RESTPARTY~ ~RestParty()~
    OUTER_SPRINT ~DisplayStringHead~ ~DisplayStringHead~
    OUTER_SPRINT ~ZOMBIE~ ~ZOMBIE~
    OUTER_SPRINT ~SCARBODYBAM~ ~IMISC5F~
    OUTER_SPRINT ~_ALL~ ~_ALL~
    OUTER_SPRINT ~CombatCounter_0~ ~CombatCounter(0)~
    OUTER_SPRINT ~10_CHARGES~ ~1~
    OUTER_SPRINT ~_LOW~ ~_LOW~

    OUTER_SPRINT ~Class_Player1_Monk~ ~Class(Player1,MONK)~ 
    OUTER_SPRINT ~Class_Player1_Shaman~ ~Class(Player1,SHAMAN)~ 
    OUTER_SPRINT ~NBaldursGate_BCS~ ~AR0200~
    OUTER_SPRINT "SWBaldursGate_FlamingFistHQ_L1_BCS" "AR0607"
    OUTER_SPRINT "FishingVillage_BCS" "AR1400"
    OUTER_SPRINT "JAHEIRA_DREAM_BCS" "JAHEID.BCS"

    OUTER_SPRINT "eet_var" ""
    OUTER_SPRINT ~DAYNIGHT~ ~<DAYNIGHT>~


/* component "Messenger 2" adds to Garrick kickout dialogue, for vanilla BG1, the joined dialogue is used upon kickout and xxxP.dlg upon rejoin */
    OUTER_SPRINT ~GARRICK_KICKOUT_STATE~ ~0~
    OUTER_SPRINT ~GARRICK_POST_KICKOUT~ ~GARRIP~
    OUTER_SPRINT ~GARRICK_KICKOUT_STATE_2~ ~2~

  END

  /* EET version! ---------------------- */

  ACTION_IF GAME_IS ~eet~ THEN BEGIN

    /* Tell the player it is using eet */
    PRINT @99177 /* ~EET detected.~ */
      INCLUDE ~EET/other/cpmvars/eet_cpmvars.tpa~
      INCLUDE ~bg1re/lib/rr_tutubgt_addvars.tpa~

    /* additional things needed for BG1 / BG1(TotSC) / Tutu / BGT differences */

    OUTER_SPRINT ~FACEOBJECT_PC_10~ ~FaceObject(Player1)~
    OUTER_SPRINT ~FACEOBJECT_PC_08~ ~FaceObject(Player1)~
    OUTER_SPRINT ~FACEOBJECT_Niklos_2~ ~FaceObject("%tutu_var%niklos")~
    OUTER_SPRINT ~FACEOBJECT_Slythe_2~ ~FaceObject("Slythe")~
    OUTER_SPRINT ~MINSCSLUMBERPARTY_REST~ ~RestParty()~

    OUTER_SPRINT ~AreaType_Outdoor_MinscSlumberparty~ ~AreaType("OUTDOOR")~
    OUTER_SPRINT ~AreaType_Outdoor~ ~AreaType("OUTDOOR")~

    OUTER_SPRINT ~ELTANDLG_HARBORMASTER~ ~DELTAN2~
    OUTER_SPRINT ~ELTANDLG_STATE~ ~2~

    OUTER_SPRINT ~STARTDIALOGNOSET~ ~StartDialogueNoSet~
    OUTER_SPRINT ~ISGABBERPLAYER1~ ~IsGabber(Player1)~
    OUTER_SPRINT ~NOT_ISGABBERPLAYER1~ ~!IsGabber(Player1)~
    OUTER_SPRINT ~RESTPARTY~ ~RestParty()~
    OUTER_SPRINT ~DisplayStringHead~ ~DisplayStringHead~
    OUTER_SPRINT ~ZOMBIE~ ~ZOMBIE~
    OUTER_SPRINT ~SCARBODYBAM~ ~IMISC5F~
    OUTER_SPRINT ~_ALL~ ~_ALL~
    OUTER_SPRINT ~CombatCounter_0~ ~CombatCounter(0)~
    OUTER_SPRINT ~10_CHARGES~ ~1~
    OUTER_SPRINT ~_LOW~ ~_LOW~

    OUTER_SPRINT ~Class_Player1_Monk~ ~Class(Player1,MONK)~ 
    OUTER_SPRINT ~Class_Player1_Shaman~ ~Class(Player1,SHAMAN)~ 
    OUTER_SPRINT ~JAHEIRA_DREAM_BCS~ ~JAHEID.BCS~
    OUTER_SPRINT ~DAYNIGHT~ ~<DAYNIGHT>~


/* component "Messenger 2" adds to Garrick kickout dialogue, for vanilla BG1, the joined dialogue is used upon kickout and xxxP.dlg upon rejoin */
    OUTER_SPRINT ~GARRICK_KICKOUT_STATE~ ~0~
    OUTER_SPRINT ~GARRICK_POST_KICKOUT~ ~GARRIP~
    OUTER_SPRINT ~GARRICK_KICKOUT_STATE_2~ ~2~

  END


//////////////////////////////////////////////////////////////////////
/* all following actions are only processed ONCE for the whole mod, independent of un- and reinstalling of single components */

  ACTION_IF !FILE_EXISTS ~bg1re/backup/bg1reinstall.mrk~ BEGIN

    // CD_STATE_NOTVALID - custom state from CamDawg

    APPEND ~STATE.IDS~ ~0x80101FEF CD_STATE_NOTVALID~
    UNLESS ~CD_STATE_NOTVALID~

    COPY ~bg1re/install/RE1BLANK.wav~ ~override/RE1BLANK.wav~

/* as long as there are components who use the old way of area script patching, this has to remain here */
    ACTION_IF GAME_IS ~tutu tutu_totsc~ THEN BEGIN
      INCLUDE ~bg1re/lib/tutu_area_script_assign.tph~
    END 


    ACTION_IF GAME_IS ~bg1 totsc~ THEN BEGIN

      INCLUDE ~bg1re/lib/c#_bg_npcjdlg.tpa~

      APPEND ~action.ids~ ~160 ApplySpellRES(S:ResRef*,O:Target*)~       
      UNLESS ~ApplySpellRES~
      APPEND ~action.ids~ ~272 CreateVisualEffect(S:Object*,P:Location*)~       
      UNLESS ~CreateVisualEffect~
      APPEND ~action.ids~ ~202 FadeToColor(P:Point*, I:Blue*)~
      UNLESS ~FadeToColor~
      APPEND ~action.ids~ ~203 FadeFromColor(P:Point*, I:Blue*)~       
      UNLESS ~FadeFromColor~



      COPY_EXISTING_REGEXP GLOB ~.*\.ARE~ ~override~ // for all areas in game proper script name and file, from Zed Nocear
      SPRINT area_name ~%SOURCE_RES%~
      READ_ASCII 0x94 ~old_script_name~
      WRITE_EVALUATED_ASCII 0x94 ~%SOURCE_RES%~
      INNER_ACTION BEGIN
	ACTION_IF !(~%old_script_name%~ STRING_EQUAL_CASE ~%area_name%~)
          AND (FILE_EXISTS_IN_GAME ~%old_script_name%.bcs~) THEN BEGIN 
	  COPY_EXISTING ~%old_script_name%.bcs~ ~override/%area_name%.bcs~
        END
      END
      BUT_ONLY_IF_IT_CHANGES

      /* Give Imoen the IMOEN2.bcs script */

      COPY_EXISTING ~imoen.cre~ ~override~
      WRITE_EVALUATED_ASCII 0x248 ~%IMOEN_BCS%~ #8  // override script
      BUT_ONLY_IF_IT_CHANGES
      COPY_EXISTING ~imoen1.cre~ ~override~
      WRITE_EVALUATED_ASCII 0x248 ~%IMOEN_BCS%~ #8  // override script
      BUT_ONLY_IF_IT_CHANGES
      COPY_EXISTING ~imoen2.cre~ ~override~
      WRITE_EVALUATED_ASCII 0x248 ~%IMOEN_BCS%~ #8  // override script
      BUT_ONLY_IF_IT_CHANGES
      COPY_EXISTING ~imoen4.cre~ ~override~
      WRITE_EVALUATED_ASCII 0x248 ~%IMOEN_BCS%~ #8  // override script
      BUT_ONLY_IF_IT_CHANGES
      COPY_EXISTING ~imoen6.cre~ ~override~
      WRITE_EVALUATED_ASCII 0x248 ~%IMOEN_BCS%~ #8  // override script
      BUT_ONLY_IF_IT_CHANGES

      /* Give Branwes the branwe.bcs script */

      COPY_EXISTING ~branwe.cre~ ~override~
      WRITE_EVALUATED_ASCII 0x248 ~%BRANWEN_BCS%~ #8  // override script
      BUT_ONLY_IF_IT_CHANGES
      COPY_EXISTING ~branwe5.cre~ ~override~
      WRITE_EVALUATED_ASCII 0x248 ~%BRANWEN_BCS%~ #8  // override script
      BUT_ONLY_IF_IT_CHANGES

      /* Give Faldorn the %FALDORN_BCS%.bcs script */

      COPY_EXISTING ~faldor.cre~ ~override~
      WRITE_EVALUATED_ASCII 0x248 ~%FALDORN_BCS%~ #8  // override script
      BUT_ONLY_IF_IT_CHANGES
      COPY_EXISTING ~faldor5.cre~ ~override~
      WRITE_EVALUATED_ASCII 0x248 ~%FALDORN_BCS%~ #8  // override script
      BUT_ONLY_IF_IT_CHANGES

      /* Give Garric the %GARRICK_BCS%.bcs script */

      COPY_EXISTING ~garric.cre~ ~override~
      WRITE_EVALUATED_ASCII 0x248 ~%GARRICK_BCS%~ #8  // override script
      BUT_ONLY_IF_IT_CHANGES
      COPY_EXISTING ~garric2.cre~ ~override~
      WRITE_EVALUATED_ASCII 0x248 ~%GARRICK_BCS%~ #8  // override script
      BUT_ONLY_IF_IT_CHANGES
      COPY_EXISTING ~garric4.cre~ ~override~
      WRITE_EVALUATED_ASCII 0x248 ~%GARRICK_BCS%~ #8  // override script
      BUT_ONLY_IF_IT_CHANGES
      COPY_EXISTING ~garric6.cre~ ~override~
      WRITE_EVALUATED_ASCII 0x248 ~%GARRICK_BCS%~ #8  // override script
      BUT_ONLY_IF_IT_CHANGES

      /* Give Skie the %SKIE_BCS%.bcs script */

      COPY_EXISTING ~skie.cre~ ~override~
      WRITE_EVALUATED_ASCII 0x248 ~%SKIE_BCS%~ #8  // override script
      BUT_ONLY_IF_IT_CHANGES
      COPY_EXISTING ~skie6.cre~ ~override~
      WRITE_EVALUATED_ASCII 0x248 ~%SKIE_BCS%~ #8  // override script
      BUT_ONLY_IF_IT_CHANGES

      /* Give Xan the %XAN_BCS%.bcs script */

      COPY_EXISTING ~xan.cre~ ~override~
      WRITE_EVALUATED_ASCII 0x248 ~%XAN_BCS%~ #8  // override script
      BUT_ONLY_IF_IT_CHANGES
      COPY_EXISTING ~xan4.cre~ ~override~
      WRITE_EVALUATED_ASCII 0x248 ~%XAN_BCS%~ #8  // override script
      BUT_ONLY_IF_IT_CHANGES
      COPY_EXISTING ~xan6.cre~ ~override~
      WRITE_EVALUATED_ASCII 0x248 ~%XAN_BCS%~ #8  // override script
      BUT_ONLY_IF_IT_CHANGES

      /* Edwin doesn't have is Override script assigned, either, but we don't need this here. */

    END



/* Give Alora her script as Override */
    ACTION_IF GAME_IS ~bg1 totsc~ BEGIN

	COPY_EXISTING ~alora.cre~ ~override~
	WRITE_EVALUATED_ASCII 0x248 ~%ALORA_BCS%~ #8  // override script
	BUT_ONLY_IF_IT_CHANGES
	COPY_EXISTING ~alora6.cre~ ~override~
	WRITE_EVALUATED_ASCII 0x248 ~%ALORA_BCS%~ #8  // override script
	BUT_ONLY_IF_IT_CHANGES
    END

    /* Code stolen from BG1NPC Project, I hope it helps */

    /* pdialog.2da preparation */
    ACTION_IF FILE_EXISTS_IN_GAME ~FW0100.are~ THEN BEGIN
      COPY_EXISTING ~pdialog.2da~ ~override~
      REPLACE_TEXTUALLY CASE_INSENSITIVE ~^JOIN_DIALOG_FILE\( +[^ ]+ +[^ ]+ +\)[^ ]+~ ~JOIN_DIALOG_FILE\1DREAM_SCRIPT_FILE~
      REPLACE_TEXTUALLY CASE_INSENSITIVE ~^_MINSCJ\( +[^ ]+ +[^ ]+ +\)[^ ]+~ ~_MINSCJ\1_MINSCD~
      REPLACE_TEXTUALLY CASE_INSENSITIVE ~^_FALDOJ\( +[^ ]+ +[^ ]+ +\)[^ ]+~ ~_FALDOJ\1_FALDOD~
      REPLACE_TEXTUALLY CASE_INSENSITIVE ~^_JAHEIJ\( +[^ ]+ +[^ ]+ +\)[^ ]+~ ~_JAHEIJ\1_JAHEID~
      REPLACE_TEXTUALLY CASE_INSENSITIVE ~^_CORANJ\( +[^ ]+ +[^ ]+ +\)[^ ]+~ ~_CORANJ\1_CORAND~
      REPLACE_TEXTUALLY CASE_INSENSITIVE ~^_DYNAHJ\( +[^ ]+ +[^ ]+ +\)[^ ]+~ ~_DYNAHJ\1_DYNAHD~
      REPLACE_TEXTUALLY CASE_INSENSITIVE ~^_XANJ\( +[^ ]+ +[^ ]+ +\)[^ ]+~ ~_XANJ\1_XAND~
      REPLACE_TEXTUALLY CASE_INSENSITIVE ~^_YESLIJ\( +[^ ]+ +[^ ]+ +\)[^ ]+~ ~_YESLIJ\1_YESLID~
      REPLACE_TEXTUALLY CASE_INSENSITIVE ~^_ELDOTJ\( +[^ ]+ +[^ ]+ +\)[^ ]+~ ~_ELDOTJ\1_ELDOTD~
      REPLACE_TEXTUALLY CASE_INSENSITIVE ~^_VICONJ\( +[^ ]+ +[^ ]+ +\)[^ ]+~ ~_VICONJ\1_VICOND~
      REPLACE_TEXTUALLY CASE_INSENSITIVE ~^_SHARTJ\( +[^ ]+ +[^ ]+ +\)[^ ]+~ ~_SHARTJ\1_SHARTD~
      REPLACE_TEXTUALLY CASE_INSENSITIVE ~^_SKIEJ\( +[^ ]+ +[^ ]+ +\)[^ ]+~ ~_SKIEJ\1_SKIED~
      REPLACE_TEXTUALLY CASE_INSENSITIVE ~^_KIVANJ\( +[^ ]+ +[^ ]+ +\)[^ ]+~ ~_KIVANJ\1_KIVAND~
      REPLACE_TEXTUALLY CASE_INSENSITIVE ~^_XZARJ\( +[^ ]+ +[^ ]+ +\)[^ ]+~ ~_XZARJ\1_XZARD~
      REPLACE_TEXTUALLY CASE_INSENSITIVE ~^_SAFANJ\( +[^ ]+ +[^ ]+ +\)[^ ]+~ ~_SAFANJ\1_SAFAND~
      REPLACE_TEXTUALLY CASE_INSENSITIVE ~^_QUAYLJ\( +[^ ]+ +[^ ]+ +\)[^ ]+~ ~_QUAYLJ\1_QUAYLD~
      REPLACE_TEXTUALLY CASE_INSENSITIVE ~^_KHALIJ\( +[^ ]+ +[^ ]+ +\)[^ ]+~ ~_KHALIJ\1_KHALID~
      REPLACE_TEXTUALLY CASE_INSENSITIVE ~^_TIAXJ\( +[^ ]+ +[^ ]+ +\)[^ ]+~ ~_TIAXJ\1_TIAXD~
      REPLACE_TEXTUALLY CASE_INSENSITIVE ~^_EDWINJ\( +[^ ]+ +[^ ]+ +\)[^ ]+~ ~_EDWINJ\1_EDWIND~
      REPLACE_TEXTUALLY CASE_INSENSITIVE ~^_AJANTJ\( +[^ ]+ +[^ ]+ +\)[^ ]+~ ~_AJANTJ\1_AJANTD~
      REPLACE_TEXTUALLY CASE_INSENSITIVE ~^_KAGAIJ\( +[^ ]+ +[^ ]+ +\)[^ ]+~ ~_KAGAIJ\1_KAGAID~
      REPLACE_TEXTUALLY CASE_INSENSITIVE ~^_MONTAJ\( +[^ ]+ +[^ ]+ +\)[^ ]+~ ~_MONTAJ\1_MONTAD~
      REPLACE_TEXTUALLY CASE_INSENSITIVE ~^_IMOEN2\( +[^ ]+ +[^ ]+ +\)[^ ]+~ ~_IMOEN2\1_IMOEND~
      REPLACE_TEXTUALLY CASE_INSENSITIVE ~^_GARRIJ\( +[^ ]+ +[^ ]+ +\)[^ ]+~ ~_GARRIJ\1_GARRID~
      REPLACE_TEXTUALLY CASE_INSENSITIVE ~^_BRANWJ\( +[^ ]+ +[^ ]+ +\)[^ ]+~ ~_BRANWJ\1_BRANWD~
      REPLACE_TEXTUALLY CASE_INSENSITIVE ~^_ALORAJ\( +[^ ]+ +[^ ]+ +\)[^ ]+~ ~_ALORAJ\1_ALORAD~
    BUT_ONLY_IF_IT_CHANGES
    END 

    ACTION_IF GAME_IS ~bgt~ THEN BEGIN /* BGT Versions */
      COPY_EXISTING ~pdialog.2da~ ~override~
      COUNT_2DA_ROWS 8 "cnt_row"
      FOR ( cnt=0; cnt<"%cnt_row%"; cnt=cnt+1 ) BEGIN
        READ_2DA_ENTRY "%cnt%" 0 8 "pd_name"
        PATCH_IF (("%pd_name%" STRING_COMPARE_CASE "MONTARON")=0) BEGIN
         SET_2DA_ENTRY "%cnt%" 3 8 "MONTAD"
        END
        PATCH_IF (("%pd_name%" STRING_COMPARE_CASE "KAGAIN")=0) BEGIN
         SET_2DA_ENTRY "%cnt%" 3 8 "KAGAID"
        END
        PATCH_IF (("%pd_name%" STRING_COMPARE_CASE "KIVAN")=0) BEGIN
         SET_2DA_ENTRY "%cnt%" 3 8 "KIVAND"
        END
        PATCH_IF (("%pd_name%" STRING_COMPARE_CASE "SHARTEEL")=0) BEGIN
         SET_2DA_ENTRY "%cnt%" 3 8 "SHARTD"
        END
        PATCH_IF (("%pd_name%" STRING_COMPARE_CASE "YESLICK")=0) BEGIN
         SET_2DA_ENTRY "%cnt%" 3 8 "YESLID"
        END
        PATCH_IF (("%pd_name%" STRING_COMPARE_CASE "XZAR")=0) BEGIN
         SET_2DA_ENTRY "%cnt%" 3 8 "XZARD"
        END
        PATCH_IF (("%pd_name%" STRING_COMPARE_CASE "ALORA")=0) BEGIN
         SET_2DA_ENTRY "%cnt%" 3 8 "ALORAD"
        END
        PATCH_IF (("%pd_name%" STRING_COMPARE_CASE "AJANTIS")=0) BEGIN
         SET_2DA_ENTRY "%cnt%" 3 8 "AJANTD"
        END
        PATCH_IF (("%pd_name%" STRING_COMPARE_CASE "KHALID")=0) BEGIN
         SET_2DA_ENTRY "%cnt%" 3 8 "KHALID"
        END
        PATCH_IF (("%pd_name%" STRING_COMPARE_CASE "GARRICK")=0) BEGIN
         SET_2DA_ENTRY "%cnt%" 3 8 "GARRID"
        END
        PATCH_IF (("%pd_name%" STRING_COMPARE_CASE "SAFANA")=0) BEGIN
         SET_2DA_ENTRY "%cnt%" 3 8 "SAFAND"
        END
        PATCH_IF (("%pd_name%" STRING_COMPARE_CASE "FALDORN")=0) BEGIN
        SET_2DA_ENTRY "%cnt%" 3 8 "FALDOD"
        END
        PATCH_IF (("%pd_name%" STRING_COMPARE_CASE "BRANWEN")=0) BEGIN
         SET_2DA_ENTRY "%cnt%" 3 8 "BRANWD"
        END
        PATCH_IF (("%pd_name%" STRING_COMPARE_CASE "QUAYLE")=0) BEGIN
         SET_2DA_ENTRY "%cnt%" 3 8 "QUAYLD"
        END
        PATCH_IF (("%pd_name%" STRING_COMPARE_CASE "XAN")=0) BEGIN
         SET_2DA_ENTRY "%cnt%" 3 8 "XAND"
        END
        PATCH_IF (("%pd_name%" STRING_COMPARE_CASE "SKIE")=0) BEGIN
         SET_2DA_ENTRY "%cnt%" 3 8 "SKIED"
        END
        PATCH_IF (("%pd_name%" STRING_COMPARE_CASE "ELDOTH")=0) BEGIN
         SET_2DA_ENTRY "%cnt%" 3 8 "ELDOTD"
        END
        PATCH_IF (("%pd_name%" STRING_COMPARE_CASE "TIAX")=0) BEGIN
         SET_2DA_ENTRY "%cnt%" 3 8 "TIAXD"
        END
        PATCH_IF (("%pd_name%" STRING_COMPARE_CASE "DYNAHEIR")=0) BEGIN
         SET_2DA_ENTRY "%cnt%" 3 8 "DYNAHD"
        END
        PATCH_IF (("%pd_name%" STRING_COMPARE_CASE "CORAN")=0) BEGIN
         SET_2DA_ENTRY "%cnt%" 3 8 "CORAND"
        END
      END
      BUT_ONLY_IF_IT_CHANGES
    END





    /* .2da patching */
  
    /* Tutu: Giving Imoen a banter file entry in the interdi.2da */
    ACTION_IF FILE_EXISTS_IN_GAME ~FW0100.are~ THEN BEGIN
      APPEND ~interdia.2da~ ~IMOEN                    _BIMOEN~ UNLESS ~_\(BIMOEN\|bimoen\)~
    END

    /* BGT: Giving Imoen a banter file if the Fixpack isn't installed */
    ACTION_IF NOT (FILE_EXISTS_IN_GAME ~cdbehbla.pro~) AND (GAME_IS ~bgt~) THEN BEGIN
      ACTION_IF FILE_EXISTS_IN_GAME ~saradush.mve~ THEN BEGIN
        COPY_EXISTING ~interdia.2da~ ~override~
        SET_2DA_ENTRY 17 1 2 ~BIMOEN2~ // fixes ToB version
        BUT_ONLY_IF_IT_CHANGES
      END ELSE BEGIN
        APPEND ~interdia.2da~ ~IMOEN       BIMOEN2~ // fixes SoA version
        UNLESS ~BIMOEN2~
      END
    END


    /* Imoen BIMOEN.DLG rebuild */
    ACTION_IF NOT (FILE_EXISTS_IN_GAME ~_bimoen.dlg~) AND (FILE_EXISTS_IN_GAME ~FW0100.are~) THEN BEGIN
      COMPILE ~bg1re/lib/X#BIMOEN_TUTU.D~
    END ELSE BEGIN
      ACTION_IF NOT (FILE_EXISTS_IN_GAME ~bimoen2.dlg~) AND (FILE_EXISTS_IN_GAME ~AR7200.are~) THEN BEGIN
      COMPILE ~bg1re/lib/X#BIMOEN_BGT.D~
      END
    END




    /* ^^ -------- end of stolen code from Bg1NPC Project ------- ^^ */





    /* Handling of correctly formatted tra-files!! ---------------------- */

    /* Copies tra files into the autotra-folder (to leave the originals untouched) */
    DEFINE_ACTION_FUNCTION autotra_workaround BEGIN
      COPY ~bg1re/tra/english~  ~bg1re/tra/autotra/%LANGUAGE%~
      COPY ~bg1re/tra/%LANGUAGE%~  ~bg1re/tra/autotra/%LANGUAGE%~
    END

    LAF autotra_workaround END



    ACTION_DEFINE_ARRAY fl#noconvert BEGIN setup END

    ACTION_DEFINE_ARRAY fl#reload BEGIN Setup_game END

    LAF HANDLE_CHARSETS
      INT_VAR
        infer_charsets = 1
      STR_VAR
        tra_path = EVAL ~bg1re/tra/autotra~
        noconvert_array = fl#noconvert
        reload_array = fl#reload
     END

    COPY ~bg1re/install/component.xx~ ~bg1re/backup/bg1reinstall.mrk~

  END //bg1reinstall.mrk



   /* TRAs declared in LANGUAGE must be reloaded - by hand, because of the copying (for non-EE version (for every running of installer!) - ALWAYS */

  LOAD_TRA ~bg1re/tra/autotra/english/Setup_game.tra~
  LOAD_TRA ~bg1re/tra/autotra/%LANGUAGE%/Setup_game.tra~



END //ALWAYS




/* --------------------------------------------- */





AUTO_TRA ~bg1re/tra/autotra/%s~


LANGUAGE ~English~
         ~english~
         ~bg1re/tra/english/setup.tra~ ~bg1re/tra/english/setup_game.tra~

LANGUAGE ~Deutsch (Teildeutsche Version, der Rest ist in Englisch)~
         ~german~
	~bg1re/tra/german/setup.tra~ ~bg1re/tra/german/setup_game.tra~

LANGUAGE ~Francais (traduction par les d'Oghmatiques)~
         ~francais~
         ~bg1re/tra/francais/setup.tra~ ~bg1re/tra/francais/setup_game.tra~

LANGUAGE ~Russian (Staylos, Apxu & Arcanecoast Team)~
         ~Russian~
	~bg1re/tra/english/setup.tra~ ~bg1re/tra/Russian/setup_game.tra~

/* First components: required */
/* ~Amount of -ahem- details and BG-style vs. description text!~ */
//Choose the level of details and style 

/* ~Amount of -ahem- details and BG-style vs. description text!~ */
BEGIN @99181 /* ~Teen Version and Skip Components with Warnings.~ */
DESIGNATED 100 
LABEL bg1re-required-teen_skip
  SUBCOMPONENT @5 /* ~Amount of -ahem- details and BG-style vs. description text!~ */
  REQUIRE_PREDICATE GAME_IS ~totsc tutu tutu_totsc bgt bgee eet~ @99181
  FORBID_COMPONENT ~EET_end.tp2~ ~0~ @99187
  FORBID_COMPONENT ~EET_end.tp2~ ~1~ @99187

    COPY ~bg1re/install/component.xx~ ~override/RE1_Installed.G3~
  /* Install Teen Version */
    PRINT @8 /* ~Teen version selected.~ */
  /* Skip Component with Warnings */
    PRINT @99174 /* ~Skip components with warnings.~ */
  

BEGIN @99182 /* ~Teen Version and Show/Install all Components with Warnings.~ */ 
DESIGNATED 101 
LABEL bg1re-required-teen_all
  SUBCOMPONENT @5 /* ~Amount of -ahem- details and BG-style vs. description text!~ */
  REQUIRE_PREDICATE GAME_IS ~totsc tutu tutu_totsc bgt bgee eet~ @99181
  FORBID_COMPONENT ~EET_end.tp2~ ~0~ @99187
  FORBID_COMPONENT ~EET_end.tp2~ ~1~ @99187

    COPY ~bg1re/install/component.xx~ ~override/RE1_Installed.G3~
  /* Install Teen Version */
    PRINT @8 /* ~Teen version selected.~ */
  /* Show/Install all Component with Warnings */
    COPY ~bg1re/install/component.xx~ ~bg1re/backup/RE1_WarningTeen.G3~
    PRINT @99175 /* ~Components with warnings accepted.~ */

BEGIN @99183 /* ~BG-style Version [Adult content] and Skip Components with Warnings.~ */ 
DESIGNATED 102 
LABEL bg1re-required-adult_bgstyle_skip
  SUBCOMPONENT @5 /* ~Amount of -ahem- details and BG-style vs. description text!~ */
  REQUIRE_PREDICATE GAME_IS ~totsc tutu tutu_totsc bgt bgee eet~ @99181
  FORBID_COMPONENT ~EET_end.tp2~ ~0~ @99187
  FORBID_COMPONENT ~EET_end.tp2~ ~1~ @99187

    COPY ~bg1re/install/component.xx~ ~override/RE1_Installed.G3~ 
  /* ~Install BG-style Version [Adult content] */
    ACTION_IF GAME_IS ~bg1 totsc~ THEN BEGIN
      EXTEND_BOTTOM ~AR2600.bcs~ ~bg1re/detaildescription/c#lc_details.baf~
      EXTEND_BOTTOM ~dplayer3.bcs~ ~bg1re/detaildescription/c#lc_details.baf~
    END ELSE BEGIN //BGT, BG:EE, EET, or Tutu 
      EXTEND_BOTTOM ~BALDUR.bcs~ ~bg1re/detaildescription/c#lc_details.baf~
    END
    COPY ~bg1re/install/component.xx~ ~bg1re/backup/RE1_MatureContent.G3~
    PRINT @9 /* ~BG-style [Adult content] selected.~ */
  /* Skip Component with Warnings */
    PRINT @99174 /* ~Skip components with warnings.~ */

BEGIN @99184 /* ~BG-style Version [Adult content] and Show/Install all Components with Warnings.~ */ 
DESIGNATED 103 
LABEL bg1re-required-adult_bgstyle_all
  SUBCOMPONENT @5 /* ~Amount of -ahem- details and BG-style vs. description text!~ */
  REQUIRE_PREDICATE GAME_IS ~totsc tutu tutu_totsc bgt bgee eet~ @99181
  FORBID_COMPONENT ~EET_end.tp2~ ~0~ @99187
  FORBID_COMPONENT ~EET_end.tp2~ ~1~ @99187

    COPY ~bg1re/install/component.xx~ ~override/RE1_Installed.G3~
  /* ~Install BG-style Version [Adult content] */
    ACTION_IF GAME_IS ~bg1 totsc~ THEN BEGIN
      EXTEND_BOTTOM ~AR2600.bcs~ ~bg1re/detaildescription/c#lc_details.baf~
      EXTEND_BOTTOM ~dplayer3.bcs~ ~bg1re/detaildescription/c#lc_details.baf~
    END ELSE BEGIN //BGT, BG:EE, EET, or Tutu 
      EXTEND_BOTTOM ~BALDUR.bcs~ ~bg1re/detaildescription/c#lc_details.baf~
    END
    COPY ~bg1re/install/component.xx~ ~bg1re/backup/RE1_MatureContent.G3~
    PRINT @9 /* ~BG-style [Adult content] selected.~ */
  /* Show/Install all Component with Warnings */
    COPY ~bg1re/install/component.xx~ ~bg1re/backup/RE1_WarningTeen.G3~
    COPY ~bg1re/install/component.xx~ ~bg1re/backup/RE1_WarningMature.G3~
    PRINT @99175 /* ~Components with warnings accepted.~ */

BEGIN @99185 /* ~Descriptive Version [Adult content] and Skip Components with Warnings.~ */ 
DESIGNATED 104 
LABEL bg1re-required-adult_description_skip
SUBCOMPONENT @5 /* ~Amount of -ahem- details and BG-style vs. description text!~ */
  REQUIRE_PREDICATE GAME_IS ~totsc tutu tutu_totsc bgt bgee eet~ @99181
  FORBID_COMPONENT ~EET_end.tp2~ ~0~ @99187
  FORBID_COMPONENT ~EET_end.tp2~ ~1~ @99187

  COPY ~bg1re/install/component.xx~ ~override/RE1_Installed.G3~
  /* Descriptive Version [Adult content] */
  ACTION_IF GAME_IS ~bg1 totsc~ THEN BEGIN
    EXTEND_BOTTOM ~AR2600.bcs~ ~bg1re/detaildescription/c#lc_details.baf~
    EXTEND_BOTTOM ~dplayer3.bcs~ ~bg1re/detaildescription/c#lc_details.baf~
    EXTEND_BOTTOM ~AR2600.bcs~ ~bg1re/detaildescription/c#lc_descriptiontext.baf~
    EXTEND_BOTTOM ~dplayer3.bcs~ ~bg1re/detaildescription/c#lc_descriptiontext.baf~
  END ELSE BEGIN //BGT, BG:EE, EET, or Tutu 
    EXTEND_BOTTOM ~BALDUR.bcs~ ~bg1re/detaildescription/c#lc_details.baf~
    EXTEND_BOTTOM ~BALDUR.bcs~ ~bg1re/detaildescription/c#lc_descriptiontext.baf~
  END
  COPY ~bg1re/install/component.xx~ ~bg1re/backup/RE1_MatureContent.G3~
  PRINT @10 /* ~Descriptive version [Adult content] selected.~ */
  /* Skip Component with Warnings */
    PRINT @99174 /* ~Skip components with warnings.~ */

BEGIN @99186 /* ~Descriptive Version [Adult content] and Show/Install all Components with Warnings.~ */ 
DESIGNATED 105 
LABEL bg1re-required-adult_description_all
SUBCOMPONENT @5 /* ~Amount of -ahem- details and BG-style vs. description text!~ */
  REQUIRE_PREDICATE GAME_IS ~totsc tutu tutu_totsc bgt bgee eet~ @99181
  FORBID_COMPONENT ~EET_end.tp2~ ~0~ @99187
  FORBID_COMPONENT ~EET_end.tp2~ ~1~ @99187

  COPY ~bg1re/install/component.xx~ ~override/RE1_Installed.G3~
  /* Descriptive Version [Adult content] */
  ACTION_IF GAME_IS ~bg1 totsc~ THEN BEGIN
    EXTEND_BOTTOM ~AR2600.bcs~ ~bg1re/detaildescription/c#lc_details.baf~
    EXTEND_BOTTOM ~dplayer3.bcs~ ~bg1re/detaildescription/c#lc_details.baf~
    EXTEND_BOTTOM ~AR2600.bcs~ ~bg1re/detaildescription/c#lc_descriptiontext.baf~
    EXTEND_BOTTOM ~dplayer3.bcs~ ~bg1re/detaildescription/c#lc_descriptiontext.baf~
  END ELSE BEGIN //BGT, BG:EE, EET, or Tutu 
    EXTEND_BOTTOM ~BALDUR.bcs~ ~bg1re/detaildescription/c#lc_details.baf~
    EXTEND_BOTTOM ~BALDUR.bcs~ ~bg1re/detaildescription/c#lc_descriptiontext.baf~
  END
  COPY ~bg1re/install/component.xx~ ~bg1re/backup/RE1_MatureContent.G3~
  PRINT @10 /* ~Descriptive version [Adult content] selected.~ */
  /* Show/Install all Component with Warnings */
    COPY ~bg1re/install/component.xx~ ~bg1re/backup/RE1_WarningTeen.G3~
    COPY ~bg1re/install/component.xx~ ~bg1re/backup/RE1_WarningMature.G3~
    PRINT @99175 /* ~Components with warnings accepted.~ */


/* Bardolan's Briefing, by berelinde (mature content / teen version) */

BEGIN @11 /* ~Bardolan's Briefing, by berelinde~ */ DESIGNATED 1 
LABEL bg1re_bardolans_briefing
REQUIRE_FILE ~override/RE1_Installed.G3~ @14 /*~The Component "Amount of -ahem - details and BG-style vs. description text" is not installed.~ */



/* areas */
COPY ~bg1re/areas/c#lc01~ ~Override~



COPY_EXISTING ~%tutu_var%bardol.cre~ ~override/c#bardol.cre~ EVALUATE_BUFFER 
    WRITE_ASCII 0x280 ~c#bardol~ #32 // set DV
    WRITE_ASCII 0x2cc ~c#bardol~ #8 // set dialogue file
WRITE_EVALUATED_ASCII 0x250 ~~ #8   // Class script: get rid of the INITDLG.BCS


COMPILE EVALUATE_BUFFER ~bg1re/bardolan/c#bardol.d~
COMPILE EVALUATE_BUFFER ~bg1re/bardolan/c#lcban1.baf~
COMPILE EVALUATE_BUFFER ~bg1re/bardolan/c#lcban2.baf~
COMPILE EVALUATE_BUFFER ~bg1re/bardolan/c#lcban3.baf~


ACTION_IF GAME_IS ~bgt eet~ THEN BEGIN
EXTEND_TOP ~%Nashkel_Garrison%.bcs~ ~bg1re/bardolan/c#ar4810.baf~ 
      EVALUATE_BUFFER 
END ELSE BEGIN //Tutu, BG:EE and BG
EXTEND_TOP ~%tutu_var%ar4810.bcs~ ~bg1re/bardolan/c#ar4810.baf~ 
      EVALUATE_BUFFER 
END 

/* In case Jarl's Adventure Pack is installed before bg1re: Bardolan would remain standing at the bridge. bg1re makes him EscapeArea(). [JAP will respawn him after the bg1re encounter.] */
/* not for Tutu - if JAP gets a Tutu version this needs to be adjusted */

ACTION_IF MOD_IS_INSTALLED ~Setup-JA#BGT_AdvPack.tp2~ "1" BEGIN

COPY_EXISTING ~%tutu_var%bardol.CRE~ ~override/%tutu_var%bardol.cre~
WRITE_EVALUATED_ASCII 0x280 ~Bardolan~ #32 // script name / DV

<<<<<<<< ...inlined/bardolan_jap_ar4800.baf

IF
Exists("Bardolan")
Global("C#LC_BardolanJAPComp","MYAREA",0)
Global("C#LC_BardolanMoves","GLOBAL",1)
THEN 
RESPONSE #100
SetGlobal("C#LC_BardolanJAPComp","MYAREA",1)
ActionOverride("Bardolan",EscapeArea())
Continue()
END


>>>>>>>>

LAF extend_area_script STR_VAR area="%Nashkel%" top="...inlined/bardolan_jap_ar4800.baf"   END

END




/* Scar's Spare Time, by jastey (mature content / teen version) */


BEGIN @12 /* ~Scar's Spare Time, by jastey~ */ DESIGNATED 2 
LABEL bg1re_scars_spare_time
REQUIRE_FILE ~override/RE1_Installed.G3~ @14 /*~The Component "Amount of -ahem - details and BG-style vs. description text" is not installed.~ */


/* areas */
COPY ~bg1re/areas/c#lc01~ ~Override~


COMPILE EVALUATE_BUFFER ~bg1re/scar/scar_re.d~
COMPILE EVALUATE_BUFFER ~bg1re/scar/c#lcsca1.baf~
COMPILE EVALUATE_BUFFER ~bg1re/scar/c#lcsca2.baf~
COMPILE EVALUATE_BUFFER ~bg1re/scar/c#lcsca3.baf~





/* Kim's Preoccupation, by jastey (mature content / teen version) */

BEGIN @13 /*~Kim's Preoccupation, by jastey~ */ DESIGNATED 3 
LABEL bg1re_kims_preoccupation
REQUIRE_FILE ~bg1re/backup/RE1_WarningTeen.G3~ @14 /*~The Component "Amount of -ahem - details and BG-style vs. description text" is not installed.~ */


/* areas */
COPY ~bg1re/areas/c#lc03~ ~Override~


/* adaption of tis-name (in the wed-file) for Tutu/BGT */
ACTION_IF GAME_IS ~bgt eet~ THEN BEGIN

 COPY_EXISTING ~c#lc03.wed~ ~override~
        SPRINT tis_name "%Candlekeep_Infirmary%"
        READ_LONG 16 overlay_off
        WRITE_ASCIIE overlay_off + 0 + 4 ~%tis_name%~ (8)

END  

ACTION_IF GAME_IS ~tutu tutu_totsc~ THEN BEGIN //Tutu 

 COPY_EXISTING ~c#lc03.wed~ ~override~
        SPRINT tis_name "%tutu_var%ar2605"
        READ_LONG 16 overlay_off
        WRITE_ASCIIE overlay_off + 0 + 4 ~%tis_name%~ (8)
END 


COMPILE EVALUATE_BUFFER ~bg1re/kim/c#kim.d~
COMPILE EVALUATE_BUFFER ~bg1re/kim/c#lckim1.baf~
COMPILE EVALUATE_BUFFER ~bg1re/kim/c#lckim2.baf~
COMPILE EVALUATE_BUFFER ~bg1re/kim/c#lckim3.baf~
COMPILE EVALUATE_BUFFER ~bg1re/kim/c#lckim4.baf~

COPY ~bg1re/kim/c#lckim.cre~ ~Override~ 
   SAY NAME1 @16 /* ~Kim~ */
   SAY NAME2 @16
WRITE_EVALUATED_ASCII 0x280 ~c#lckim~  #32  // script name / DV
WRITE_EVALUATED_ASCII 0x2cc ~c#lckim~ #8   // set dialogue file
WRITE_EVALUATED_ASCII 0x248 ~c#lckim~ #8   // Override script
WRITE_EVALUATED_ASCII 0x250 ~%tutu_var%SHOUT~ #8   // Class script


COPY ~bg1re/kim/c#lckimw.cre~ ~Override~ 
   SAY NAME1 @16
   SAY NAME2 @16
WRITE_EVALUATED_ASCII 0x280 ~c#lckim~  #32  // script name / DV
WRITE_EVALUATED_ASCII 0x2cc ~c#lckim~ #8   // set dialogue file
WRITE_EVALUATED_ASCII 0x248 ~c#lckim~ #8   // Override script
WRITE_EVALUATED_ASCII 0x250 ~%tutu_var%SHOUT~ #8   // Class script 


ACTION_IF GAME_IS ~bgt eet~ THEN BEGIN
EXTEND_TOP ~%Candlekeep_Ch6%.bcs~ ~bg1re/kim/C#lckim_AR2626.baf~ 
      EVALUATE_BUFFER 
END ELSE BEGIN //Tutu, BG:EE and BG
EXTEND_TOP ~%tutu_var%ar2626.bcs~ ~bg1re/kim/C#lckim_AR2626.baf~ 
      EVALUATE_BUFFER 
END 



/* Extension of Bjornin Encounter, by jastey  */

BEGIN @15 /* ~Extension of Bjornin Encounter (Personal Wound Treatment)~ */ DESIGNATED 4 
LABEL bg1re_extention_of_bjornin_encounter
REQUIRE_FILE ~override/RE1_Installed.G3~ @14 /*~The Component "Amount of -ahem - details and BG-style vs. description text" is not installed.~ */


ADD_JOURNAL TITLE (@221) @220 USING ~bg1re/tra/autotra/%LANGUAGE%/bjornin_re.tra~

/* BGT: remove journal entries upon transition to BGII */
ACTION_IF GAME_IS ~bgt~ THEN BEGIN
  EXTEND_TOP ~AR0602.bcs~ ~bg1re/Bjornin/bjornin_AR0602.baf~ EVALUATE_BUFFER
	USING ~bg1re/tra/autotra/%LANGUAGE%/bjornin_re.tra~
END



/* areas */
COPY ~bg1re/areas/c#lc05~ ~Override~


/* adaption of tis-name (in the wed-file) for Tutu/BGT */
ACTION_IF GAME_IS ~bgt eet~ THEN BEGIN

 COPY_EXISTING ~c#lc05.wed~ ~override~
        SPRINT tis_name "%Beregost_JovialJuggler_L2F%"
        READ_LONG 16 overlay_off
        WRITE_ASCIIE overlay_off + 0 + 4 ~%tis_name%~ (8)

END ELSE BEGIN 

ACTION_IF GAME_IS ~tutu tutu_totsc~ THEN BEGIN //Tutu 

 COPY_EXISTING ~c#lc05.wed~ ~override~
        SPRINT tis_name "%tutu_var%AR3305"
        READ_LONG 16 overlay_off
        WRITE_ASCIIE overlay_off + 0 + 4 ~%tis_name%~ (8)
END 
END


COMPILE EVALUATE_BUFFER ~bg1re/Bjornin/bjornin_re.d~

/* half-orc greeting. Not for vanilla BG */
ACTION_IF GAME_IS ~bgt tutu tutu_totsc bgee eet~ THEN BEGIN
COMPILE EVALUATE_BUFFER ~bg1re/Bjornin/bjornin_re_add.d~
USING ~bg1re/tra/autotra/%LANGUAGE%/bjornin_re.tra~
END

COPY_EXISTING ~%tutu_var%bjorni.CRE~ ~override/c#lcbjor.cre~
WRITE_EVALUATED_ASCII 0x280 ~c#lcbjor~ #32 // script name / DV
WRITE_EVALUATED_ASCII 0x2cc ~c#lcbjor~ #8
WRITE_EVALUATED_ASCII 0x248 ~c#lcbjor~ #8   // Override script

COMPILE EVALUATE_BUFFER ~bg1re/bjornin/c#lcbjo1.baf~
COMPILE EVALUATE_BUFFER ~bg1re/bjornin/c#lcbjo2.baf~




/* No Starch in the Maypole */

BEGIN @17 /* ~No Starch in the Maypole~ */ DESIGNATED 5 
LABEL bg1re_no_starch_in_maypole
REQUIRE_FILE ~override/RE1_Installed.G3~ @14 /*~The Component "Amount of -ahem - details and BG-style vs. description text" is not installed.~ */


COMPILE EVALUATE_BUFFER ~bg1re/cmguard/maypolestarch.d~




/* Duke Eltan's Spare Minute, by jastey and Balquo */

BEGIN @18 /* ~Duke Eltan's Spare Minute, by jastey~ */ DESIGNATED 6 
LABEL bg1re_duke_eltans_spare_minute
REQUIRE_FILE ~override/RE1_Installed.G3~ @14 /*~The Component "Amount of -ahem - details and BG-style vs. description text" is not installed.~ */

/* compatibility with EndlessBG1. bg1re needs to be installed after. */
ACTION_IF FILE_EXISTS_IN_GAME ~C#STELTA.cre~ THEN BEGIN 

// Get state for DELTAN2 %deltan2_70% 
/* ~You saved us. You have the gratitude of the city.~ */
OUTER_SET deltan2_70 = STATE_WHICH_SAYS 70 IN ~c#endlessbg1/translations/%s/DIALOGUES.TRA~ FROM ~%tutu_var%DELTAN2~

<<<<<<<< .../c#eltan_ebg1_add.d

EXTEND_BOTTOM %tutu_var%DELTAN2 %deltan2_70%
+ ~PartyHasItem("c#re1sr5")~ + @1 /* ~I have here the body of Scar! I found him.~ */ DO ~TakePartyItem("c#re1sr5")~ + eltan_06_as
+ ~PartyHasItem("c#re1sr6")~ + @2 /* ~I have news about the body of Scar! I located it.~ */ DO ~TakePartyItem("c#re1sr6")~ + eltan_06_receit_as
+ ~Global("C#RE1_ScarRetrieval","GLOBAL",10)~ + @3 /* ~Did you get news about Scar's body yet?~ */ DO ~SetGlobal("C#RE1_ScarRetrieval","GLOBAL",12)~ + heard_scar_as
+ ~Global("C#RE1_ScarRetrieval","GLOBAL",11)~ + @4 /* ~What is Scar's status?~ */ DO ~SetGlobal("C#RE1_ScarRetrieval","GLOBAL",12)~ + burying_scar_as
+ ~Global("C#RE1_ScarRetrieval","GLOBAL",12)~ + @5 /* ~Any news about the possible resurrection of Scar?~ */ + rising_scar_as
END

>>>>>>>>

  COMPILE EVALUATE_BUFFER ~bg1re/eltan/c#eltan.d~
			~.../c#eltan_ebg1_add.d~ USING ~bg1re/tra/autotra/%LANGUAGE%/c#eltan.tra~

END ELSE BEGIN
  COMPILE EVALUATE_BUFFER ~bg1re/eltan/c#eltan.d~
			~bg1re/eltan/c#eltan_no_ebg1.d~ USING ~bg1re/tra/autotra/%LANGUAGE%/c#eltan.tra~
END


ACTION_IF GAME_IS ~tutu tutu_totsc bgt bgee eet~ THEN BEGIN

//REPLACE_ACTION_TEXT %tutu_var%harbor ~EscapeArea()~ ~MoveToPoint([431.171])

<<<<<<<< ...inlined/harbor.d
REPLACE_ACTION_TEXT %tutu_var%harbor ~EscapeArea[^)]+)~ ~MoveToPoint([431.171])
CreateCreatureImpassable("%tutu_var%DELTAN2",[449.121],14)
Wait(1)
MoveToPoint([461.197])
Face(0)
DialogInterrupt(TRUE)~
REPLACE_ACTION_TEXT %tutu_var%harbor ~ActionOverride("Eltan2",SetNumTimesTalkedTo(100))~ ~DestroyItem("%tutu_var%MISC55")~
ADD_TRANS_ACTION %tutu_var%harbor BEGIN 9 END BEGIN END ~DialogInterrupt(FALSE)~
REPLACE_TRIGGER_TEXT %tutu_var%deltan2 ~True()~ ~Global("EltanMove","GLOBAL",0)~
ADD_STATE_TRIGGER %tutu_var%deltan2 1 ~Global("EltanMove","GLOBAL",1)~
ADD_TRANS_ACTION %tutu_var%deltan2 BEGIN 1 END BEGIN END ~SetGlobal("EltanMove","GLOBAL",2)~
ADD_STATE_TRIGGER %tutu_var%deltan2 2 ~Global("EltanMove","GLOBAL",2)~
>>>>>>>>
COMPILE EVALUATE_BUFFER ~...inlined/harbor.d~

END

ACTION_IF GAME_IS ~bg1 totsc~ THEN BEGIN

<<<<<<<< ...inlined/harbor.d
REPLACE_ACTION_TEXT harbor ~EscapeArea()~ ~MoveToPoint([406.206])
CreateCreature("DELTAN",[426.160]%FACE_0%)
ActionOverride("Eltan",DestroyItem("PLAT04"))
ActionOverride("Eltan",DestroyItem("SHLD03"))
ActionOverride("Eltan",DestroyItem("SW1H05"))
ActionOverride("Eltan",DestroyItem("BOOK68"))
Wait(1)
MoveToPoint([465.193])
Face(2)
DialogInterrupt(TRUE)~
REPLACE_ACTION_TEXT harbor ~ActionOverride("Eltan2",SetNumTimesTalkedTo(100))~ ~DestroyItem("%tutu_var%MISC55")~
ADD_TRANS_ACTION harbor BEGIN 9 END BEGIN END ~DialogInterrupt(FALSE)~
>>>>>>>>
COMPILE EVALUATE_BUFFER ~...inlined/harbor.d~
END

ACTION_IF !GAME_IS ~bg1 totsc~ THEN BEGIN

/* BGT and EET: lying Eltan will be gone after Sarevok is dead */

LAF extend_area_script STR_VAR area="%BaldursGateDocks_Harbormaster%" top="bg1re/eltan/c#eltan_AR0702.baf"    END


/* After Sarevok is dead and Scar's return is about to play, Eltan will be inside the Ducal Palace - and compatibility with EBG1! */

COPY_EXISTING ~%tutu_var%DELTAN.cre~ ~override/C#RE1ELT.cre~
WRITE_EVALUATED_ASCII 0x280 ~C#RE1ELT~ #32   // Death variable
WRITE_EVALUATED_ASCII 0x2cc ~DELTAN2~ #8   // dialogue
WRITE_EVALUATED_ASCII 0x248 ~C#RE1ELT~ #8   // Override script


  LAF extend_area_script STR_VAR area="%NBaldursGate_DucalPalace_L1%" bottom="bg1re/eltan/c#eltan_AR0108.baf"    END

END


////////////////////////////////////////////////////////////////////////////
/* Bonusquest: Scar - The Return, by jastey  */

/* This is not an own component
*/

/* more content for SoD/EET so the Scar's Return quest can be finished in SoD: need more lines in BDELTAN.dlg */
ACTION_IF GAME_INCLUDES ~sod~ THEN BEGIN
  COMPILE EVALUATE_BUFFER ~bg1re/eltan/c#eltan_sod_add.d~
	 USING ~bg1re/tra/autotra/%LANGUAGE%/c#eltan.tra~
END

/* compatibility with Transitions: need even more lines in BDELTAN.dlg so Scar's Return quest can be started after Sarevok's death. */
ACTION_IF ((MOD_IS_INSTALLED ~transitions/setup-transitions.TP2~ "70")
OR (MOD_IS_INSTALLED ~transitions/setup-transitions.TP2~ "71")
OR (MOD_IS_INSTALLED ~transitions/setup-transitions.TP2~ "72")
OR (MOD_IS_INSTALLED ~transitions/setup-transitions.TP2~ "73")) THEN BEGIN 

// Get state for DELTAN %deltan_2057% 
/* ~Greetings, <GABBER>.  It's a pleasure to see you again.~ */
OUTER_SET deltan_2057 = STATE_WHICH_SAYS 2057 IN ~transitions/languages/%s/DIALOGUES.TRA~ FROM ~DELTAN~

COMPILE EVALUATE_BUFFER ~bg1re/eltan/c#eltan_transition_add.d~
	 USING ~bg1re/tra/autotra/%LANGUAGE%/c#eltan.tra~

END

ADD_JOURNAL TITLE (@302) @53 @59 @74 @86 @114 @134 @137 @145 @166 @198 @301 @309 @324 @10000 USING ~bg1re/tra/autotra/%LANGUAGE%/c#eltan.tra~

/* BGT: remove journal entries upon transition to BGII */
ACTION_IF GAME_IS ~bgt~ THEN BEGIN
  EXTEND_TOP ~AR0602.bcs~ ~bg1re/scarreturn/c#eltan_AR0602.baf~ EVALUATE_BUFFER
	USING ~bg1re/tra/autotra/%LANGUAGE%/c#eltan.tra~
END


ACTION_IF GAME_IS ~bg1 totsc tutu tutu_totsc bgee eet~ THEN BEGIN

   COMPILE EVALUATE_BUFFER ~bg1re/scarreturn/c#re1sr1.d~
	USING ~bg1re/tra/autotra/%LANGUAGE%/c#eltan.tra~
END


/* BGT game: Thalantyr has extra dialogue state! */
ACTION_IF GAME_IS ~bgt~ THEN BEGIN
   COMPILE EVALUATE_BUFFER ~bg1re/scarreturn/c#re1sr1.d~
	~bg1re/scarreturn/c#re1sr1_BGTadd.d~
	USING ~bg1re/tra/autotra/%LANGUAGE%/c#eltan.tra~
END


COMPILE EVALUATE_BUFFER ~bg1re/scarreturn/c#re1src.baf~
COMPILE EVALUATE_BUFFER ~bg1re/scarreturn/c#re1sr1.baf~
	USING ~bg1re/tra/autotra/%LANGUAGE%/c#eltan.tra~
COMPILE EVALUATE_BUFFER ~bg1re/scarreturn/c#re1sr6.baf~


COPY ~bg1re/scarreturn/c#re1srs.sto~ ~override~
ADD_STORE_ITEM ~%tutu_var%misc58~ #1 #0 #0 ~IDENTIFIED~ #1
ADD_STORE_ITEM ~%tutu_var%misc57~ #1 #0 #0 ~IDENTIFIED~ #1
ADD_STORE_ITEM ~%tutu_var%misc56~ #1 #0 #0 ~IDENTIFIED~ #1
ADD_STORE_ITEM ~%tutu_var%book09~ #1 #0 #0 ~IDENTIFIED~ #1
ADD_STORE_ITEM ~%tutu_var%book10~ #1 #0 #0 ~IDENTIFIED~ #1
ADD_STORE_ITEM ~%tutu_var%book11~ #1 #0 #0 ~IDENTIFIED~ #1
ADD_STORE_ITEM ~%tutu_var%book12~ #1 #0 #0 ~IDENTIFIED~ #1
ADD_STORE_ITEM ~%tutu_var%book13~ #1 #0 #0 ~IDENTIFIED~ #1
ADD_STORE_ITEM ~%tutu_var%book14~ #1 #0 #0 ~IDENTIFIED~ #1
ADD_STORE_ITEM ~c#re1sr4~ #1 #0 #0 ~IDENTIFIED~ #5
ADD_STORE_ITEM ~c#re1sr2~ #1 #0 #0 ~IDENTIFIED~ #1
ADD_STORE_ITEM ~c#re1sr1~ #1 #0 #0 ~IDENTIFIED~ #1
ADD_STORE_ITEM ~c#re1sr3~ #1 #0 #0 ~IDENTIFIED~ #2
ADD_STORE_ITEM ~%tutu_var%misc59~ #1 #0 #0 ~IDENTIFIED~ #1


/* itm */

COPY_EXISTING ~%tutu_var%misc97.itm~ ~override/c#re1sr1.itm~
     SAY NAME1 @19 /* ~Scar's Vase~ */
     SAY NAME2 @19 
     SAY IDENTIFIED_DESC @20 /*~This vase you would recognize anywhere. It's the one you nearly knocked off the barrel it was standing on when you followed Scar's invitation into his very tiny private quarters. 

The design is of a Baalor Ale Mug, but the vase is pottered gracefully, the ornations drawn artistically. It is clearly not meant to actually serve ale, but to function as a peace of decoration.

How it got into this vendor's possession is the question you have no answer to.~ */

COPY_EXISTING ~misc74.itm~ ~override/c#re1sr2.itm~ //NO %tutu_var% here on purpose!
     SAY NAME1 @21 /* ~Candleholder~ */
     SAY NAME2 @21 
     SAY IDENTIFIED_DESC @22 /*~This is a candleholder. Its surface shows some dents and scratches you would expect from such an item that has been in use for a while. The metal is shiny but of cheap appearance.~ */

COPY_EXISTING ~%tutu_var%misc53.itm~ ~override/c#re1sr3.itm~
     SAY NAME1 @23 /* ~Golden Plate~ */
     SAY NAME2 @23
     SAY IDENTIFIED_DESC @24 /* ~This plate looks delecate and surely belonged to a greater set once.~ */

COPY_EXISTING ~%tutu_var%misc61.itm~ ~override/c#re1sr4.itm~ //bottle of wine

COPY_EXISTING ~%tutu_var%misc65.itm~ ~override/c#re1sr5.itm~
WRITE_EVALUATED_ASCII 0x3a ~%SCARBODYBAM%~ #8 //
     SAY NAME1 @25 /* ~Scar's Body~ */
     SAY NAME2 @25
     SAY IDENTIFIED_DESC @26 /* ~This is Scar's body. It looks remarkably fresh and healthy, considering the way Scar died and the time that has passed since. Priests must have worked on him, before Angelo took over the Flaming Fist and forced them to stop.~ */

COPY_EXISTING ~%tutu_var%misc1C.itm~ ~override/c#re1sr6.itm~
     SAY NAME1 @27 /* ~Transport Receit~ */
     SAY NAME2 @27
     SAY IDENTIFIED_DESC @28 /* ~This is the receit Chester and Hung gave you. It gives the transport information about the extra crate Duntrin moved to the warehouse, the one you suspect Scar to be in.~ */




/* cre */

COPY_EXISTING ~%tutu_var%shopkn.cre~ ~override/c#re1sr1.cre~ //shopkeep
   SAY NAME1 @29 /* ~Donnerjan~ */
   SAY NAME2 @30 /* ~Donnerjan's Second-Hand Shop~ */
WRITE_EVALUATED_ASCII 0x280 ~c#re1sr1~ #32   // Death variable
WRITE_EVALUATED_ASCII 0x2cc ~c#re1sr1~ #8   // dialogue
WRITE_EVALUATED_ASCII 0x248 ~c#re1sr1~ #8   // Override script
COPY_EXISTING ~%tutu_var%MTBE3.cre~ ~override/c#re1sr2.cre~ //Kelder
   SAY NAME1 @31 /* ~Kelder~ */
   SAY NAME2 @31
WRITE_EVALUATED_ASCII 0x280 ~c#re1sr2~ #32   // Death variable
WRITE_EVALUATED_ASCII 0x2cc ~c#re1sr2~ #8   // dialogue
WRITE_EVALUATED_ASCII 0x248 ~c#re1sr2~ #8   // Override script
WRITE_EVALUATED_ASCII 0x260 ~%tutu_scriptw%TRUNSGT~ #8   // General script

COPY ~bg1re/scarreturn/c#re1sr3.cre~ ~override/c#re1sr3.cre~ //Hung
   SAY NAME1 @32 /* ~Hung~ */
   SAY NAME2 @32
WRITE_EVALUATED_ASCII 0x280 ~c#re1sr3~ #32   // Death variable
WRITE_EVALUATED_ASCII 0x2cc ~c#re1sr3~ #8   // dialogue
WRITE_EVALUATED_ASCII 0x248 ~c#re1sr3~ #8   // Override script
WRITE_EVALUATED_ASCII 0x268 ~%tutu_scriptw%TRUNSGT~ #8   // Default script

COPY ~bg1re/scarreturn/c#re1sr4.cre~ ~override/c#re1sr4.cre~ //Chester
   SAY NAME1 @33 /* ~Chester~ */
   SAY NAME2 @33 
WRITE_EVALUATED_ASCII 0x280 ~c#re1sr4~ #32   // Death variable
WRITE_EVALUATED_ASCII 0x2cc ~c#re1sr4~ #8   // dialogue
WRITE_EVALUATED_ASCII 0x248 ~c#re1sr4~ #8   // Override script
WRITE_EVALUATED_ASCII 0x268 ~%tutu_scriptw%TRUNSGT~ #8   // Default script

COPY ~bg1re/scarreturn/c#re1sr5.cre~ ~override/c#re1sr5.cre~ //Duntrin
   SAY NAME1 @34 /* ~Duntrin~ */
   SAY NAME2 @34
WRITE_EVALUATED_ASCII 0x280 ~c#re1sr5~ #32   // Death variable
WRITE_EVALUATED_ASCII 0x2cc ~c#re1sr5~ #8   // dialogue
WRITE_EVALUATED_ASCII 0x248 ~c#re1sr5~ #8   // Override script
WRITE_EVALUATED_ASCII 0x268 ~%tutu_scriptw%TRUNSGT~ #8   // Default script


COPY_EXISTING ~%tutu_var%scar.CRE~ ~override/c#re1sr6.cre~ //Scar
WRITE_EVALUATED_ASCII 0x280 ~c#re1sr6~ #32 // script name / DV
WRITE_EVALUATED_ASCII 0x2cc ~c#re1sr6~ #8
WRITE_EVALUATED_ASCII 0x248 ~c#re1sr6~ #8
WRITE_EVALUATED_ASCII 0x250 ~~ #8   // Class script
WRITE_EVALUATED_ASCII 0x268 ~~ #8
SAY INITIAL_MEETING @35 /* ~I am a man of my word.~ [%tutu_var%SCAR04] */
SAY SELECT_COMMON1 @35
SAY SELECT_COMMON2 @35



ACTION_IF GAME_IS ~bgt eet~ THEN BEGIN
EXTEND_BOTTOM ~%CentralBaldursGate%.bcs~ ~bg1re/scarreturn/c#re1sr_AR0700.baf~ 
      EVALUATE_BUFFER 
EXTEND_BOTTOM ~%CentralBaldursGate%.bcs~ ~bg1re/scarreturn/c#re1sr_AR0700_mapnote.baf~ 
      EVALUATE_BUFFER 
EXTEND_BOTTOM ~%BaldursGateDocks_JopalinsTavern%.bcs~ ~bg1re/scarreturn/c#re1sr_AR1215.baf~ 
      EVALUATE_BUFFER
EXTEND_BOTTOM ~%EBaldursGate_KeexieTavern_L1%.bcs~ ~bg1re/scarreturn/c#re1sr_AR0154.baf~ 
      EVALUATE_BUFFER 
EXTEND_BOTTOM ~%BaldursGateDocks_NoraleesWarehouse%.bcs~ ~bg1re/scarreturn/c#re1sr_AR1208.baf~ 
      EVALUATE_BUFFER
END ELSE BEGIN //Tutu, BG:EE and BG


EXTEND_BOTTOM ~%tutu_var%AR0700.bcs~ ~bg1re/scarreturn/c#re1sr_AR0700.baf~ 
      EVALUATE_BUFFER 
EXTEND_BOTTOM ~%tutu_var%AR0700.bcs~ ~bg1re/scarreturn/c#re1sr_AR0700_mapnote.baf~ EVALUATE_BUFFER
EXTEND_BOTTOM ~%tutu_var%AR1215.bcs~ ~bg1re/scarreturn/c#re1sr_AR1215.baf~ 
      EVALUATE_BUFFER 
EXTEND_BOTTOM ~%tutu_var%AR0154.bcs~ ~bg1re/scarreturn/c#re1sr_AR0154.baf~ 
      EVALUATE_BUFFER 
EXTEND_BOTTOM ~%tutu_var%AR1208.bcs~ ~bg1re/scarreturn/c#re1sr_AR1208.baf~ 
      EVALUATE_BUFFER 
END




/* Husam's Personal Preparation, by jastey */ 

BEGIN @36 /* ~Husam's Personal Preparation, by jastey~ */ DESIGNATED 7 
LABEL bg1re_husams_personal_preparation
REQUIRE_FILE ~override/RE1_Installed.G3~ @14 /*~The Component "Amount of -ahem - details and BG-style vs. description text" is not installed.~ */




/* areas */
COPY ~bg1re/areas/c#lc06~ ~Override~
COPY ~bg1re/areas/c#lc07~ ~Override~


/* adaption of tis-name (in the wed-file) for Tutu/BGT */
ACTION_IF GAME_IS ~bgt eet~ THEN BEGIN

 COPY_EXISTING ~c#lc06.wed~ ~override~
        SPRINT tis_name "%NEBaldursGate%"
        READ_LONG 16 overlay_off
        WRITE_ASCIIE overlay_off + 0 + 4 ~%tis_name%~ (8)

 COPY_EXISTING ~c#lc07.wed~ ~override~
        SPRINT tis_name "%EBaldursGate_ThievesGuild%"
        READ_LONG 16 overlay_off
        WRITE_ASCIIE overlay_off + 0 + 4 ~%tis_name%~ (8)


END  

ACTION_IF GAME_IS ~tutu tutu_totsc~ THEN BEGIN //Tutu 

 COPY_EXISTING ~c#lc06.wed~ ~override~
        SPRINT tis_name "%tutu_var%AR0300"
        READ_LONG 16 overlay_off
        WRITE_ASCIIE overlay_off + 0 + 4 ~%tis_name%~ (8)

 COPY_EXISTING ~c#lc07.wed~ ~override~
        SPRINT tis_name "%tutu_var%AR0153"
        READ_LONG 16 overlay_off
        WRITE_ASCIIE overlay_off + 0 + 4 ~%tis_name%~ (8)
END 





COMPILE EVALUATE_BUFFER ~bg1re/husam/c#husam.d~
COMPILE EVALUATE_BUFFER ~bg1re/husam/c#lchus1.baf~
COMPILE EVALUATE_BUFFER ~bg1re/husam/c#lchus2.baf~
COMPILE EVALUATE_BUFFER ~bg1re/husam/c#lchus3.baf~
COMPILE EVALUATE_BUFFER ~bg1re/husam/c#lchus4.baf~
COMPILE EVALUATE_BUFFER ~bg1re/husam/c#lchus5.baf~


COPY_EXISTING ~%tutu_var%HUSAM2.CRE~ ~override/C#HUSAM.CRE~
SAY INITIAL_MEETING @37 /* ~The Shadow Thieves send their regards.~ [%tutu_var%HUSAM03] */
SAY MORALE @38 /* ~There are too many, retreat!~ [%tutu_var%HUSAM02] */
SAY BATTLE_CRY1 @37
SAY SELECT_COMMON1 @37
SAY SELECT_COMMON2 @37
SAY SELECT_COMMON3 #0
WRITE_EVALUATED_ASCII 0x280 ~C#HUSAM~ #32 // script name / DV
WRITE_EVALUATED_ASCII 0x2cc ~C#HUSAM~ #8
WRITE_EVALUATED_ASCII 0x248 ~C#HUSAM~ #8   // Override script
WRITE_EVALUATED_ASCII 0x250 ~~ #8   // erase Class script
WRITE_EVALUATED_ASCII 0x268 ~%tutu_scriptw%TASIGHT~ #8   // Default script

ACTION_IF GAME_IS ~bgt eet~ THEN BEGIN
EXTEND_TOP ~%EBaldursGate_ThievesGuild%.bcs~ ~bg1re/husam/husam_ar0153.baf~ 
      EVALUATE_BUFFER 
END ELSE BEGIN //Tutu, BG:EE and BG
EXTEND_TOP ~%tutu_var%ar0153.bcs~ ~bg1re/husam/husam_ar0153.baf~ 
      EVALUATE_BUFFER 
END 




/* Laurel's Post-Hunting, by jastey */ 

BEGIN @39 /* ~Laurel's Post-Hunting, by jastey~ */ DESIGNATED 8 
LABEL bg1re_laurels_post_hunting
REQUIRE_FILE ~override/RE1_Installed.G3~ @14 /*~The Component "Amount of -ahem - details and BG-style vs. description text" is not installed.~ */


/* areas */
COPY ~bg1re/areas/c#lc02~ ~Override~


/* adaption of tis-name (in the wed-file) for Tutu/BGT */
ACTION_IF GAME_IS ~bgt eet~ THEN BEGIN

 COPY_EXISTING ~c#lc02.wed~ ~override~
        SPRINT tis_name "%BearRiver%"
        READ_LONG 16 overlay_off
        WRITE_ASCIIE overlay_off + 0 + 4 ~%tis_name%~ (8)

END  

ACTION_IF GAME_IS ~tutu tutu_totsc~ THEN BEGIN //Tutu 

 COPY_EXISTING ~c#lc02.wed~ ~override~
        SPRINT tis_name "%tutu_var%AR4600"
        READ_LONG 16 overlay_off
        WRITE_ASCIIE overlay_off + 0 + 4 ~%tis_name%~ (8)
END 




COMPILE EVALUATE_BUFFER ~bg1re/laurel/c#laurel.d~

COPY_EXISTING ~%tutu_var%laurel.CRE~ ~override/c#lclaur.cre~
WRITE_EVALUATED_ASCII 0x280 ~c#lclaur~ #32 // script name / DV
WRITE_EVALUATED_ASCII 0x2cc ~c#lclaur~ #8
WRITE_EVALUATED_ASCII 0x248 ~c#lclaur~ #8   // Override script

COMPILE EVALUATE_BUFFER ~bg1re/laurel/c#lclau1.baf~
COMPILE EVALUATE_BUFFER ~bg1re/laurel/c#lclau2.baf~
COMPILE EVALUATE_BUFFER ~bg1re/laurel/c#lclau3.baf~




/* Bartus' Seduction, by jastey */

BEGIN @40 /* ~Bartus' Seduction, by jastey~ */ DESIGNATED 9 
LABEL bg1re_bartus_seduction
REQUIRE_FILE ~override/RE1_Installed.G3~ @14 


ADD_JOURNAL TITLE (@250) @46 @47 @62 @64 @96 @177 @184 @238 @249 USING ~bg1re/tra/autotra/%LANGUAGE%/c#bart.tra~

/* BGT: remove journal entries upon transition to BGII */
ACTION_IF GAME_IS ~bgt~ THEN BEGIN
  EXTEND_TOP ~AR0602.bcs~ ~bg1re/bartus/bartus_AR0602.baf~ EVALUATE_BUFFER
	USING ~bg1re/tra/autotra/%LANGUAGE%/c#bart.tra~
END


COMPILE EVALUATE_BUFFER ~bg1re/bartus/c#bart.d~

COMPILE EVALUATE_BUFFER ~bg1re/bartus/c#lcbart.baf~
COMPILE EVALUATE_BUFFER ~bg1re/bartus/c#lcbar1.baf~

ACTION_IF GAME_IS ~bg1 totsc~ THEN BEGIN
COPY ~bg1re/bartus/c#lcbart.cre~ ~Override~ 
   SAY NAME1 @41 /* ~Bartus~ */
   SAY NAME2 @41
WRITE_EVALUATED_ASCII 0x280 ~c#lcbart~ #32   // script name / DV
WRITE_EVALUATED_ASCII 0x2cc ~c#lcbart~ #8   // set dialogue file
WRITE_EVALUATED_ASCII 0x248 ~c#lcbart~ #8   // Override script
WRITE_EVALUATED_ASCII 0x268 ~%tutu_scriptw%TASIGHT~ #8   // Default script

END ELSE BEGIN //Tutu, BG:EE, EET, and BGT
COPY ~bg1re/bartus/c#lcbart.cre~ ~Override~ 
   SAY NAME1 @41
   SAY NAME2 @41
WRITE_EVALUATED_ASCII 0x280 ~c#lcbart~ #32   // script name / DV
WRITE_EVALUATED_ASCII 0x2cc ~c#lcbart~ #8   // set dialogue file
WRITE_EVALUATED_ASCII 0x248 ~c#lcbart~ #8   // Override script
WRITE_EVALUATED_ASCII 0x250 ~%tutu_var%SHOUT~ #8   // Class script
WRITE_EVALUATED_ASCII 0x268 ~%tutu_scriptw%TASIGHT~ #8   // Default script
END

COPY ~bg1re/bartus/c#lcba01.cre~ ~Override~ 
   SAY NAME1 @176
   SAY NAME2 @176
WRITE_EVALUATED_ASCII 0x280 ~c#lcba01~ #32   // script name / DV
WRITE_EVALUATED_ASCII 0x2cc ~c#lcba01~ #8   // set dialogue file
WRITE_EVALUATED_ASCII 0x248 ~c#lcba01~ #8   // Override script

COPY ~bg1re/bartus/c#lcba02.cre~ ~Override~ 
   SAY NAME1 @177
   SAY NAME2 @177
WRITE_EVALUATED_ASCII 0x280 ~c#lcba02~ #32   // script name / DV
WRITE_EVALUATED_ASCII 0x2cc ~c#lcba02~ #8   // set dialogue file
WRITE_EVALUATED_ASCII 0x248 ~c#lcba02~ #8   // Override script


LAF extend_area_script STR_VAR area="%Beregost_JovialJuggler_L1%" top="bg1re/bartus/c#bart_ar3304.baf" END

LAF extend_area_script STR_VAR area="%Beregost%" top="bg1re/bartus/c#bart_ar3300.baf" END

LAF extend_area_script STR_VAR area="%BaldursGate_DocksLowLantern_D3%" top="bg1re/bartus/c#bart_ar0135.baf" END

LAF extend_area_script STR_VAR area="%BaldursGate_DocksLowLantern_D1%" top="bg1re/bartus/c#bart_ar0133.baf" END



/* Lina's Massage, by jastey */ 

BEGIN @42 /* ~Lina's Massage, by jastey~ */ DESIGNATED 10 
LABEL bg1re_linas_massage
REQUIRE_FILE ~override/RE1_Installed.G3~ @14 /*~The Component "Amount of -ahem - details and BG-style vs. description text" is not installed.~ */


/* areas */
COPY ~bg1re/areas/c#lc05~ ~Override~

/* adaption of tis-name (in the wed-file) for Tutu/BGT */
ACTION_IF GAME_IS ~bgt eet~ THEN BEGIN

 COPY_EXISTING ~c#lc05.wed~ ~override~
        SPRINT tis_name "%Beregost_JovialJuggler_L2F%"
        READ_LONG 16 overlay_off
        WRITE_ASCIIE overlay_off + 0 + 4 ~%tis_name%~ (8)

END  

ACTION_IF GAME_IS ~tutu tutu_totsc~ THEN BEGIN //Tutu 

 COPY_EXISTING ~c#lc05.wed~ ~override~
        SPRINT tis_name "%tutu_var%AR3305"
        READ_LONG 16 overlay_off
        WRITE_ASCIIE overlay_off + 0 + 4 ~%tis_name%~ (8)
END 


COMPILE EVALUATE_BUFFER ~bg1re/lina/lina.d~
COMPILE EVALUATE_BUFFER ~bg1re/lina/c#lclin1.baf~
COMPILE EVALUATE_BUFFER ~bg1re/lina/c#lclin2.baf~
COMPILE EVALUATE_BUFFER ~bg1re/lina/c#lclin3.baf~

COPY ~bg1re/lina/c#lclina.cre~ ~Override~ 
   SAY NAME1 @43 /* ~Lina~ */
   SAY NAME2 @43
WRITE_EVALUATED_ASCII 0x280 ~c#lclina~ #32   // script name / DV
WRITE_EVALUATED_ASCII 0x2cc ~c#lclina~ #8   // set dialogue file
WRITE_EVALUATED_ASCII 0x248 ~c#lclina~ #8   // Override script
WRITE_EVALUATED_ASCII 0x250 ~%tutu_var%SHOUT~ #8   // Class script
WRITE_EVALUATED_ASCII 0x268 ~%tutu_scriptw%DASIGHT~ #8   // Default script


ACTION_IF GAME_IS ~bgt eet~ THEN BEGIN
EXTEND_TOP ~%FriendlyArmInn_L1%.bcs~ ~bg1re/lina/c#lina_ar2301.baf~ 
      EVALUATE_BUFFER 
END ELSE BEGIN //Tutu, BG:EE and BG
EXTEND_TOP ~%tutu_var%ar2301.bcs~ ~bg1re/lina/c#lina_ar2301.baf~ 
      EVALUATE_BUFFER 
END 



/* ~First Night with Quentin, by Kulyok~ */ 


BEGIN @44 /* ~First Night with Quentin, by Kulyok~ */ DESIGNATED 11 
LABEL bg1re_bg1re_first_night_quentin
REQUIRE_FILE ~override/RE1_Installed.G3~ @14 /*~The Component "Amount of -ahem - details and BG-style vs. description text" is not installed.~ */


COPY_EXISTING ~%tutu_var%erik.cre~ ~override/o#quent.cre~
WRITE_ASCII 0x248 ~O#Quent~  #8	 // override
WRITE_ASCII 0x2cc ~O#Quent~  #8  // dialogue
WRITE_ASCII 0x280 ~O#Quent~ #32  // death variable
WRITE_ASCII 0x250 ~~ 	     #8  // class script
WRITE_ASCII 0x258 ~~ 	     #8  // race script
WRITE_ASCII 0x260 ~~ 	     #8  // general script
WRITE_ASCII 0x268 ~~	     #8	 // default script
WRITE_BYTE 0x2c 27 // Metal color
WRITE_BYTE 0x2d 66 // Minor color
WRITE_BYTE 0x2e 59 // Major color
WRITE_BYTE 0x2f 12 // Skin color
WRITE_BYTE 0x30 16 // Leather color
WRITE_BYTE 0x31 30 // Armor color
WRITE_BYTE 0x32 41 // Hair color
SAY NAME1 @45 /* ~Quentin~ */
SAY NAME2 @45

COMPILE EVALUATE_BUFFER ~bg1re/quentin/RE1Quentin.d~

COMPILE EVALUATE_BUFFER ~bg1re/quentin/O#QuentC.baf~

ACTION_IF GAME_IS ~bgt eet~ THEN BEGIN
EXTEND_TOP ~%FriendlyArmInn_L1%.bcs~ ~bg1re/quentin/AR2301.baf~ 
      EVALUATE_BUFFER 
EXTEND_TOP ~%FriendlyArmInn_L3%.bcs~ ~bg1re/quentin/AR2303.baf~ 
      EVALUATE_BUFFER 
END ELSE BEGIN //Tutu, BG:EE and BG
EXTEND_TOP ~%tutu_var%ar2301.bcs~ ~bg1re/quentin/AR2301.baf~ 
      EVALUATE_BUFFER 
EXTEND_TOP ~%tutu_var%ar2303.bcs~ ~bg1re/quentin/AR2303.baf~ 
      EVALUATE_BUFFER 
END 



/*  ~Chatting Niklos Up, by Kulyok  */ 

BEGIN @46 /* ~Chatting Niklos Up, by Kulyok (mature content)~ */ DESIGNATED 12 
LABEL bg1re_chatting_niklos_up
REQUIRE_FILE ~bg1re/backup/RE1_WarningMature.G3~ @77 /* ~This component has no teen rated version.~ */


COPY_EXISTING ~%tutu_var%niklos.cre~ ~override~
WRITE_EVALUATED_ASCII 0x280 ~%tutu_var%niklos~ #32   // script name / DV
BUT_ONLY_IF_IT_CHANGES

COMPILE EVALUATE_BUFFER ~bg1re/niklos/RE1Niklos.d~ 
COMPILE EVALUATE_BUFFER ~bg1re/niklos/O#NikRE1.baf~



/* ~Slythe and Krystin, by Kulyok (mature content)~ */

BEGIN @47 /* ~Slythe and Krystin, by Kulyok (mature content)~ */ DESIGNATED 13 
LABEL bg1re_slythe_and_kristin
REQUIRE_FILE ~bg1re/backup/RE1_WarningMature.G3~ @77


COMPILE EVALUATE_BUFFER ~bg1re/slythekrystin/RE1Slythe.d~
COMPILE EVALUATE_BUFFER ~bg1re/slythekrystin/O#SlyRE1.baf~


/* No Regrets */ 

BEGIN @48 /* ~No Regrets~ */ DESIGNATED 14 
LABEL bg1re_no_regrets
REQUIRE_FILE ~override/RE1_Installed.G3~ @14 /*~The Component "Amount of -ahem - details and BG-style vs. description text" is not installed.~ */

COMPILE EVALUATE_BUFFER ~bg1re/noregrets/Dialogues/c#noregrets.d~

LAF extend_area_script STR_VAR area="%NEBaldursGate%" top="bg1re/noregrets/Scripts/c#q09_ar0300.baf"   END

LAF extend_area_script STR_VAR area="%NEBaldursGate_House1_L1%" bottom="bg1re/noregrets/Scripts/c#q09_ar0305.baf"   END

COMPILE EVALUATE_BUFFER ~bg1re/noregrets/Scripts/c#nojana.baf~
COMPILE EVALUATE_BUFFER ~bg1re/noregrets/Scripts/C#nomeil.baf~
COMPILE EVALUATE_BUFFER ~bg1re/noregrets/Scripts/C#notax.baf~

COPY ~bg1re/noregrets/Creatures/c#nomeil.cre~ ~Override/c#nomeil.cre~ 
   SAY NAME1 @49 /* ~Meilla~ */
   SAY NAME2 @49

COPY ~bg1re/noregrets/Creatures/c#nocat.cre~ ~Override/c#nocat.cre~

COPY ~bg1re/noregrets/Creatures/c#nojana.cre~ ~Override/c#nojana.cre~ 
   SAY NAME1 @50 /* ~Jana~ */
   SAY NAME2 @50

COPY ~bg1re/noregrets/Creatures/c#notax.cre~ ~Override/c#notax.cre~ 
   SAY NAME1 @51 /* ~Cragmor~ */
   SAY NAME2 @51

COPY ~bg1re/noregrets/Items/c#nocat1.ITM~ ~override/c#nocat1.ITM~
SAY NAME1 @52 /* ~Meilla's cat~ */
SAY NAME2 @52
SAY UNIDENTIFIED_DESC @53 /* ~This is Meilla's cat Whisper. Probably as old as Miella, he seems to be comfortable where he is, taking a nap.~ */
SAY IDENTIFIED_DESC @53

COPY ~bg1re/noregrets/Items/c#nolett.itm~ ~override/c#nolett.itm~
SAY NAME1 @54 /* ~Letter~ */
SAY NAME2 @54
SAY UNIDENTIFIED_DESC @55 /* ~Dear Meilla, 

it was kind of you to remember my birthday, though I don't really enjoy them much, anymore. I've been thinking of you. I wonder how you are. I wonder what would have happened, if I'd have given it a chance. I know what I was, Meilla, and I know what passed between us, and I'm sorry. Could we meet? Could we try again? I await your reply.

Yours in love, 
Dhugal~ */
SAY IDENTIFIED_DESC @55


/* Purchased Love, by Thimblerig */ 

BEGIN @56 /* ~Purchased Love, by Thimblerig~ */ DESIGNATED 15 
LABEL bg1re_purchased_love
REQUIRE_FILE ~override/RE1_Installed.G3~ @14 /*~The Component "Amount of -ahem - details and BG-style vs. description text" is not installed.~ */

COPY ~bg1re/purchasedlove/c#lcharl.cre~ ~override/c#lcharl.cre~
WRITE_ASCII 0x2cc ~c#lcharl~  #8  // dialogue
WRITE_ASCII 0x280 ~c#lcharl~ #32  // death variable
//WRITE_BYTE 0x2c 27 // Metal color
//WRITE_BYTE 0x2d 66 // Minor color
//WRITE_BYTE 0x2e 59 // Major color
//WRITE_BYTE 0x2f 12 // Skin color
//WRITE_BYTE 0x30 16 // Leather color
//WRITE_BYTE 0x31 30 // Armor color
//WRITE_BYTE 0x32 41 // Hair color
SAY NAME1 @57 /* ~Harlot~ */
SAY NAME2 @57

COMPILE EVALUATE_BUFFER ~bg1re/purchasedlove/undercellar.d~

ACTION_IF GAME_IS ~bgt eet~ THEN BEGIN
EXTEND_TOP ~%BaldursGate_Undercellars%.bcs~ ~bg1re/purchasedlove/c#harlot_ar0112.baf~ 
      EVALUATE_BUFFER 
END ELSE BEGIN //Tutu, BG:EE and BG
EXTEND_TOP ~%tutu_var%ar0112.bcs~ ~bg1re/purchasedlove/c#harlot_ar0112.baf~ 
      EVALUATE_BUFFER 
END 

COMPILE EVALUATE_BUFFER ~bg1re/purchasedlove/c#lcharl.baf~




/* Lady of the Low Lantern, by Thimblerig */

//BEGIN ~Lady of the Low Lantern, by Thimblerig~



COMPILE EVALUATE_BUFFER ~BG1RE/ladylowlantern/summerumbrella.d~

COPY ~BG1RE/ladylowlantern/T1SumUm.cre~ ~override/T1SumUm.cre~
WRITE_EVALUATED_ASCII 0x2cc ~T1SumUm~  #8  // dialogue
WRITE_EVALUATED_ASCII 0x280 ~T1SumUm~ #32  // death variable
SAY NAME1 @58 /* ~Summer Umbrella~ */
SAY NAME2 @58


ACTION_IF GAME_IS ~bgt eet~ THEN BEGIN
EXTEND_TOP ~%BaldursGate_DocksLowLantern_D2%.bcs~ ~BG1RE/ladylowlantern/T1SumUmAR0134.baf~ 
      EVALUATE_BUFFER 
END ELSE BEGIN //Tutu, BG:EE and BG
EXTEND_TOP ~%tutu_var%ar0134.bcs~ ~BG1RE/ladylowlantern/T1SumUmAR0134.baf~ 
      EVALUATE_BUFFER 
END 





/*  ~Purchased Love - Lars and Schvantz in the low lantern, by Thimblerig~ */


COMPILE EVALUATE_BUFFER ~bg1re/purchasedlove/pl_lowlantern/purchasedlovelars.d~
COMPILE EVALUATE_BUFFER ~bg1re/purchasedlove/pl_lowlantern/schvantz_lowlantern.d~


COMPILE EVALUATE_BUFFER ~bg1re/purchasedlove/pl_lowlantern/re1thsch.baf~

COPY ~bg1re/purchasedlove/pl_lowlantern/re1thsch.cre~ ~override/re1thsch.cre~
//WRITE_ASCII 0x2cc ~re1thsch~  #8  // dialogue
//WRITE_ASCII 0x280 ~re1thsch~ #32  // death variable
SAY NAME1 @59 /* ~Schvantz~ */
SAY NAME2 @59
WRITE_EVALUATED_ASCII 0x280 ~%SOURCE_RES%~ #32   // script name / DV
WRITE_EVALUATED_ASCII 0x2cc ~%SOURCE_RES%~ #8   // set dialogue file
WRITE_EVALUATED_ASCII 0x250 ~%tutu_var%SHOUT~ #8   // Class script
WRITE_EVALUATED_ASCII 0x258 ~%tutu_scripts%EEENEMY~ #8   // Race script
WRITE_EVALUATED_ASCII 0x268 ~%tutu_scriptw%TASIGHT~ #8   // Default script


LAF extend_area_script STR_VAR area="%BaldursGate_DocksLowLantern_D2%" top="bg1re/purchasedlove/pl_lowlantern/T1LarsAR0134.baf"   END

LAF extend_area_script STR_VAR area="%BaldursGate_DocksLowLantern_D1%" top="bg1re/purchasedlove/pl_lowlantern/T1LarsAR0133.baf"   END

LAF extend_area_script STR_VAR area="%BaldursGate_DocksLowLantern_D3%" top="bg1re/purchasedlove/pl_lowlantern/Schvantz_AR0135.baf"   END

ACTION_IF GAME_IS ~bgt bgee eet tutu tutu_totsc~ THEN BEGIN
  COPY ~bg1re/purchasedlove/pl_lowlantern/T1LARS1.cre~ ~override/T1LARS1.cre~
  SAY NAME1 @60 /* ~Lars~ */
  SAY NAME2 @60
  WRITE_EVALUATED_ASCII 0x280 ~%SOURCE_RES%~ #32   // script name / DV
  WRITE_EVALUATED_ASCII 0x2cc ~%SOURCE_RES%~ #8   // set dialogue file
//WRITE_EVALUATED_ASCII 0x248 ~%SOURCE_RES%~ #8   // Override script
  WRITE_EVALUATED_ASCII 0x250 ~%tutu_var%SHOUT~ #8   // Class script
  WRITE_EVALUATED_ASCII 0x258 ~%tutu_scripts%EEENEMY~ #8   // Race script
  WRITE_EVALUATED_ASCII 0x268 ~%tutu_scriptw%TASIGHT~ #8   // Default script
END

ACTION_IF GAME_IS ~bg1 totsc~ THEN BEGIN

  COPY ~bg1re/purchasedlove/pl_lowlantern/T1LARS1_bg1.cre~ ~override/T1LARS1.cre~
  SAY NAME1 @60
  SAY NAME2 @60
  WRITE_EVALUATED_ASCII 0x280 ~%SOURCE_RES%~ #32   // script name / DV
  WRITE_EVALUATED_ASCII 0x2cc ~%SOURCE_RES%~ #8   // set dialogue file
//WRITE_EVALUATED_ASCII 0x248 ~%SOURCE_RES%~ #8   // Override script
  WRITE_EVALUATED_ASCII 0x250 ~%tutu_var%SHOUT~ #8   // Class script
  WRITE_EVALUATED_ASCII 0x258 ~%tutu_scripts%EEENEMY~ #8   // Race script
  WRITE_EVALUATED_ASCII 0x268 ~%tutu_scriptw%TASIGHT~ #8   // Default script

END 



//BEGIN ~Purchased Love: Ariane (Low Lantern), by Thimblerig~

COMPILE EVALUATE_BUFFER ~bg1re/purchasedlove/pl_ariane/ariane_lowlantern.d~
COMPILE EVALUATE_BUFFER ~bg1re/purchasedlove/pl_ariane/re1arian.baf~

COPY ~bg1re/purchasedlove/pl_ariane/T1ARIAN.cre~ ~override/T1ARIAN.cre~
WRITE_ASCII 0x2cc ~T1ARIAN~  #8  // dialogue
WRITE_ASCII 0x280 ~T1ARIAN~ #32  // death variable
WRITE_EVALUATED_ASCII 0x250 ~%tutu_var%SHOUT~ #8   // Class script
WRITE_EVALUATED_ASCII 0x258 ~%tutu_scripts%EEENEMY~ #8   // Race script
WRITE_EVALUATED_ASCII 0x268 ~%tutu_scriptw%TASIGHT~ #8   // Default script
SAY INITIAL_MEETING ~As always, the pleasure is mine.~ [GNFEM01] 
SAY SELECT_COMMON1 ~As always, the pleasure is mine.~ [GNFEM01] 
SAY NAME1 @61 /* ~Ariane~ */
SAY NAME2 @61



// Ariane the courtesan, deck three of the Low Lantern

ACTION_IF GAME_IS ~bgt eet~ THEN BEGIN
EXTEND_TOP ~%BaldursGate_DocksLowLantern_D3%.bcs~ ~bg1re/purchasedlove/pl_ariane/T1ArianeAR0135.baf~
      EVALUATE_BUFFER 
END ELSE BEGIN //Tutu, BG:EE and BG
EXTEND_TOP ~%tutu_var%ar0135.bcs~ ~bg1re/purchasedlove/pl_ariane/T1ArianeAR0135.baf~ 
      EVALUATE_BUFFER 
END 





/* ~Purchased Love: Gunther's Night Off, by Thimblerig~ */



//BEGIN ~Purchased Love: Gunther's Night Off, by Thimblerig~

COMPILE EVALUATE_BUFFER ~bg1re/purchasedlove/gunthersnightoff/gunthersnightoff.d~
COMPILE EVALUATE_BUFFER ~bg1re/purchasedlove/gunthersnightoff/T1GUNTH.baf~

COPY ~bg1re/purchasedlove/gunthersnightoff/T1GUNTH.cre~ ~override/T1GUNTH.cre~
WRITE_ASCII 0x2cc ~T1GUNTH~  #8  // dialogue
WRITE_ASCII 0x280 ~T1GUNTH~ #32  // death variable
WRITE_EVALUATED_ASCII 0x248 ~T1GUNTH~ #8   // Override script
WRITE_EVALUATED_ASCII 0x250 ~%tutu_var%SHOUT~ #8   // Class script
WRITE_EVALUATED_ASCII 0x258 ~%tutu_scripts%EEENEMY~ #8   // Race script
WRITE_EVALUATED_ASCII 0x268 ~%tutu_scriptw%TASIGHT~ #8   // Default script
SAY INITIAL_MEETING @62 /* ~Hello, friend.~ [GENMG06] */
SAY SELECT_COMMON1 @62 
SAY NAME1 @63 /* ~Gunther~ */
SAY NAME2 @63

COPY ~bg1re/purchasedlove/gunthersnightoff/T1MAB.cre~ ~override/T1MAB.cre~
WRITE_ASCII 0x2cc ~T1MAB~  #8  // dialogue
WRITE_ASCII 0x280 ~T1MAB~ #32  // death variable
WRITE_EVALUATED_ASCII 0x248 ~~ #8   // Override script
WRITE_EVALUATED_ASCII 0x250 ~%tutu_var%SHOUT~ #8   // Class script
WRITE_EVALUATED_ASCII 0x258 ~%tutu_scripts%EEENEMY~ #8   // Race script
WRITE_EVALUATED_ASCII 0x268 ~%tutu_scriptw%TASIGHT~ #8   // Default script
SAY INITIAL_MEETING @64 /* ~'Ello, friend.~ [GENFG04] */
SAY SELECT_COMMON1 @64 
SAY NAME1 @65 /* ~Old Mab~ */
SAY NAME2 @65

COPY ~bg1re/purchasedlove/gunthersnightoff/T1ISOB.cre~ ~override/T1ISOB.cre~
WRITE_ASCII 0x2cc ~T1ISOB~  #8  // dialogue
WRITE_ASCII 0x280 ~T1ISOB~ #32  // death variable
WRITE_EVALUATED_ASCII 0x248 ~~ #8   // Override script
WRITE_EVALUATED_ASCII 0x250 ~%tutu_var%SHOUT~ #8   // Class script
WRITE_EVALUATED_ASCII 0x258 ~%tutu_scripts%EEENEMY~ #8   // Race script
WRITE_EVALUATED_ASCII 0x268 ~%tutu_scriptw%TASIGHT~ #8   // Default script
SAY INITIAL_MEETING @66 /* ~Yes, friend?~ [GENFG05] */
SAY SELECT_COMMON1 @66 
SAY NAME1 @67 /* ~Miss Isobel Whitley~ */
SAY NAME2 @67

COPY ~bg1re/purchasedlove/gunthersnightoff/T1PETE.cre~ ~override/T1PETE.cre~
WRITE_ASCII 0x2cc ~T1PETE~  #8  // dialogue
WRITE_ASCII 0x280 ~T1PETE~ #32  // death variable
WRITE_EVALUATED_ASCII 0x248 ~~ #8   // Override script
WRITE_EVALUATED_ASCII 0x250 ~%tutu_var%SHOUT~ #8   // Class script
WRITE_EVALUATED_ASCII 0x258 ~%tutu_scripts%EEENEMY~ #8   // Race script
WRITE_EVALUATED_ASCII 0x268 ~%tutu_scriptw%TASIGHT~ #8   // Default script
SAY INITIAL_MEETING @68 /* ~Yeah, mate?~ [GENMG12] */
SAY SELECT_COMMON1 @68 
SAY NAME1 @69 /* ~Pete~ */
SAY NAME2 @69


// Illicit drinking party in the Low Lantern's storage hold

ACTION_IF GAME_IS ~bgt eet~ THEN BEGIN
EXTEND_TOP ~%BaldursGate_DocksLowLantern_D4%.bcs~ ~bg1re/purchasedlove/gunthersnightoff/T1GandFriendsAR0136.baf~ 
      EVALUATE_BUFFER 
END ELSE BEGIN //Tutu, BG:EE and BG
EXTEND_TOP ~%tutu_var%ar0136.bcs~ ~bg1re/purchasedlove/gunthersnightoff/T1GandFriendsAR0136.baf~ 
      EVALUATE_BUFFER 
END 







/* Hull: Heavy Duty, by Lava  */

BEGIN @70 /* ~Hull: Heavy Duty, by Lava~ */ DESIGNATED 16 
LABEL bg1re_hull_heavy_duty
REQUIRE_FILE ~override/RE1_Installed.G3~ @14 /*~The Component "Amount of -ahem - details and BG-style vs. description text" is not installed.~ */

COMPILE EVALUATE_BUFFER ~bg1re/hull/hull_re.d~
COMPILE EVALUATE_BUFFER ~bg1re/hull/c#lchull.baf~

ACTION_IF GAME_IS ~bg1 totsc~ THEN BEGIN

  COPY ~bg1re/hull/c#lchul1.itm~ ~override/c#lchul1.itm~
  SAY UNIDENTIFIED_DESC @71 /* ~This is Hull's long sword that he gave you after your... farewells in Candlekeep. It's a normal long sword, and not too well-tended, but it's strong and well balanced.

STATISTICS:

Damage:  1D8
THACO:  +1 bonusDamage type:  slashing
Weight: 4
Speed Factor: 5
Proficiency Type: Large Sword
Type:  1-handed
Not Usable By:
 Druid
 Cleric
 Mage
~ */
  SAY IDENTIFIED_DESC @71

END

ACTION_IF GAME_IS ~tutu tutu_totsc bgt~ THEN BEGIN

  COPY ~bg1re/hull/c#lchul1.itm~ ~override/c#lchul1.itm~
  SAY UNIDENTIFIED_DESC @71 
  SAY IDENTIFIED_DESC @71
 WRITE_BYTE 0x31 90 //PROFICIENCYLONGSWORD

END

ACTION_IF GAME_IS ~bgee eet~ THEN BEGIN

  COPY ~bg1re/hull/c#lchul1.itm~ ~override/c#lchul1.itm~
  SAY UNIDENTIFIED_DESC @72
  SAY IDENTIFIED_DESC @72
 WRITE_BYTE 0x31 90 //PROFICIENCYLONGSWORD
END




/* ~Late Night with Jaheira, by Kulyok~ */

BEGIN @73 /* ~Late Night with Jaheira, by Kulyok~ */ DESIGNATED 17 
LABEL bg1re_late_night_jaheira
REQUIRE_FILE ~override/RE1_Installed.G3~ @14 /*~The Component "Amount of -ahem - details and BG-style vs. description text" is not installed.~ */

COMPILE EVALUATE_BUFFER ~bg1re/jaheira/RE1Jaheira.d~

ACTION_IF GAME_IS ~bgt tutu tutu_totsc bgee eet~ THEN BEGIN

  EXTEND_TOP ~%JAHEIRA_DREAM_BCS%~ ~bg1re/jaheira/RE1Jaheira.baf~
      EVALUATE_BUFFER


  /* BG1 NPC Code duplication */
  ACTION_IF GAME_IS ~tutu tutu_totsc~ THEN BEGIN
	COPY_EXISTING ~pdialog.2da~ ~override~
	REPLACE_TEXTUALLY CASE_INSENSITIVE ~^_JAHEIJ\( +[^ ]+ +[^ ]+ +\)[^ ]+~ ~_JAHEIJ\1_JAHEID~
	BUT_ONLY_IF_IT_CHANGES
  END

END 

ACTION_IF GAME_IS ~bg1 totsc~ THEN BEGIN // BG

  EXTEND_TOP ~JAHEIRA.BCS~ ~bg1re/jaheira/RE1Jaheira_bg1.baf~
      EVALUATE_BUFFER

/* tavern-script blocks */

EXTEND_BOTTOM ~AR1001.BCS~ ~bg1re/jaheira/RE1Jaheira_bg1_tavern.baf~
EXTEND_BOTTOM ~AR0116.BCS~ ~bg1re/jaheira/RE1Jaheira_bg1_tavern.baf~
EXTEND_BOTTOM ~AR0119.BCS~ ~bg1re/jaheira/RE1Jaheira_bg1_tavern.baf~
EXTEND_BOTTOM ~AR0103.BCS~ ~bg1re/jaheira/RE1Jaheira_bg1_tavern.baf~
EXTEND_BOTTOM ~AR0114.BCS~ ~bg1re/jaheira/RE1Jaheira_bg1_tavern.baf~
EXTEND_BOTTOM ~AR0705.BCS~ ~bg1re/jaheira/RE1Jaheira_bg1_tavern.baf~
EXTEND_BOTTOM ~AR0105.BCS~ ~bg1re/jaheira/RE1Jaheira_bg1_tavern.baf~
EXTEND_BOTTOM ~AR0133.BCS~ ~bg1re/jaheira/RE1Jaheira_bg1_tavern.baf~
EXTEND_BOTTOM ~AR2301.BCS~ ~bg1re/jaheira/RE1Jaheira_bg1_tavern.baf~
EXTEND_BOTTOM ~AR3304.BCS~ ~bg1re/jaheira/RE1Jaheira_bg1_tavern.baf~
EXTEND_BOTTOM ~AR3307.BCS~ ~bg1re/jaheira/RE1Jaheira_bg1_tavern.baf~
EXTEND_BOTTOM ~AR3351.BCS~ ~bg1re/jaheira/RE1Jaheira_bg1_tavern.baf~
EXTEND_BOTTOM ~AR3357.BCS~ ~bg1re/jaheira/RE1Jaheira_bg1_tavern.baf~

END



/* Sil's Blessing, by Lava */

BEGIN @74 /* ~Sil's Blessing, by Lava~ */ DESIGNATED 18 
LABEL bg1re_sils_blessing
REQUIRE_FILE ~override/RE1_Installed.G3~ @14 /*~The Component "Amount of -ahem - details and BG-style vs. description text" is not installed.~ */


COMPILE EVALUATE_BUFFER ~bg1re/silsblessing/silsblessing.d~


INCLUDE ~bg1re/lib/func_fetch_journal_entries.tph~
COPY_EXISTING ~%tutu_var%cordyr.dlg~ ~override~
	LPF ~READ_JOURNAL_STRREF~
		INT_VAR
		state         = "1"  // state index
		stateResponse = 0     // relative response index (e.g. 0 for first response associated with the state, 1 for second response, and so on...)
		RET
		strref    // returned string reference, or -1 if not available
	END
	SET unsolved_strref = strref
	LPF ~READ_JOURNAL_STRREF~
		INT_VAR
		state         = "3"  // state index
		stateResponse = 0     // relative response index (e.g. 0 for first response associated with the state, 1 for second response, and so on...)
		RET
		strref    // returned string reference, or -1 if not available
	END
	SET solved_strref = strref


ACTION_IF GAME_IS ~bg1 totsc~ THEN BEGIN
  COMPILE EVALUATE_BUFFER ~bg1re/silsblessing/acordyr.d~
END ELSE BEGIN
  COMPILE EVALUATE_BUFFER ~bg1re/silsblessing/acordyr_add.d~
		~bg1re/silsblessing/acordyr.d~ USING ~bg1re/tra/autotra/%LANGUAGE%/acordyr.tra~

END

COPY ~BG1RE/silsblessing/re1lvsil.bam~ ~override~
COPY ~BG1RE/silsblessing/re1lvsil.itm~ ~override~
SAY NAME1 @173 /* ~Cloak of Ice Protection~ */
SAY NAME2 @173
SAY DESC @174 /* ~Cloak of Ice Protection

Not much is known about this cloak. Some say it was woven from the white hair of the men charmed by the sirenes, but the material is far too soft and warm for this tale to be true.
STATISTICS:

Cold resistance:  +50%
Weight: 3
~ */


/* Melicamp: The Poultry Boy, by Lava */

BEGIN @75 /* ~Melicamp: The Poultry Boy, by Lava~ */ DESIGNATED 19 
LABEL bg1re_melicamp_poultry_boy
REQUIRE_FILE ~override/RE1_Installed.G3~ @14 /*~The Component "Amount of -ahem - details and BG-style vs. description text" is not installed.~ */

/* areas */
COPY ~bg1re/areas/c#lc02~ ~Override~

/* adaption of tis-name (in the wed-file) for Tutu/BGT */
ACTION_IF GAME_IS ~bgt eet~ THEN BEGIN

 COPY_EXISTING ~c#lc02.wed~ ~override~
        SPRINT tis_name "%BearRiver%"
        READ_LONG 16 overlay_off
        WRITE_ASCIIE overlay_off + 0 + 4 ~%tis_name%~ (8)

END 

ACTION_IF GAME_IS ~tutu tutu_totsc~ THEN BEGIN //Tutu 

 COPY_EXISTING ~c#lc02.wed~ ~override~
        SPRINT tis_name "%tutu_var%AR4600"
        READ_LONG 16 overlay_off
        WRITE_ASCIIE overlay_off + 0 + 4 ~%tis_name%~ (8)
END 


COMPILE EVALUATE_BUFFER ~bg1re/melicamp/melicamp.d~


COMPILE EVALUATE_BUFFER ~bg1re/melicamp/c#lcmeli.baf~
COMPILE EVALUATE_BUFFER ~bg1re/melicamp/c#lcmel2.baf~
COMPILE EVALUATE_BUFFER ~bg1re/melicamp/c#lcmel3.baf~

COPY_EXISTING ~%tutu_var%melica.cre~ ~override/c#lcmelc.cre~
WRITE_ASCII 0x248 ~c#lcmelc~  #8	 // override
WRITE_EVALUATED_ASCII 0x2cc ~%tutu_var%MELICA~  #8  // dialogue
WRITE_ASCII 0x280 ~c#lcmelc~  #32 // death variable
WRITE_ASCII 0x250 ~~ 	     #8  // class script
WRITE_ASCII 0x258 ~~ 	     #8  // race script
WRITE_ASCII 0x260 ~~ 	     #8  // general script
WRITE_ASCII 0x268 ~~	     #8  // default script
SAY INITIAL_MEETING ~~
SAY SELECT_COMMON1 ~~ 



/* Reading with Rinnie, by Western Paladin */

BEGIN @76 /* ~Reading with Rinnie, by Western Paladin~ */ DESIGNATED 20 
LABEL bg1re_reading_with_rinnie
REQUIRE_FILE ~override/RE1_Installed.G3~ @14 /*~The Component "Amount of -ahem - details and BG-style vs. description text" is not installed.~ */

COMPILE EVALUATE_BUFFER ~bg1re/rinnie/rinnie_re.d~

COMPILE EVALUATE_BUFFER ~bg1re/rinnie/c#lcrin1.baf~




/* ~Molly the Husband-Grabber, by Kulyok~ */
BEGIN @78 /* ~Molly the Husband-Grabber, by Kulyok~ */ DESIGNATED 21 
LABEL bg1re_molly_husband_grabber
REQUIRE_FILE ~override/RE1_Installed.G3~ @14 /*~The Component "Amount of -ahem - details and BG-style vs. description text" is not installed.~ */

COMPILE EVALUATE_BUFFER ~bg1re/molly/RE1Molly.d~

COMPILE EVALUATE_BUFFER	~bg1re/molly/O#Molly.baf~
USING ~bg1re/tra/autotra/%LANGUAGE%/re1molly.tra~


ACTION_IF GAME_IS ~bgt eet~ THEN BEGIN
EXTEND_TOP ~%EBaldursGate%.bcs~ ~bg1re/molly/AR0800.baf~ 
      EVALUATE_BUFFER 
END ELSE BEGIN //Tutu, BG:EE and BG
EXTEND_TOP ~%tutu_var%AR0800.bcs~ ~bg1re/molly/AR0800.baf~ 
      EVALUATE_BUFFER 
END 




COPY_EXISTING ~%tutu_var%rinnie.cre~ ~override/o#molly.cre~
WRITE_ASCII 0x248 ~O#Molly~  #8	 // override
WRITE_ASCII 0x2cc ~O#Molly~  #8  // dialogue
WRITE_ASCII 0x280 ~O#Molly~ #32  // death variable
WRITE_ASCII 0x250 ~~ 	     #8  // class script
WRITE_ASCII 0x258 ~~ 	     #8  // race script
WRITE_ASCII 0x260 ~~ 	     #8  // general script
WRITE_ASCII 0x268 ~~	     #8	 // default script
WRITE_BYTE 0x2c 27 // Metal color
WRITE_BYTE 0x2d 46 // Minor color
WRITE_BYTE 0x2e 47 // Major color
WRITE_BYTE 0x2f 8  // Skin color
WRITE_BYTE 0x30 16 // Leather color
WRITE_BYTE 0x31 30 // Armor color
WRITE_BYTE 0x32 29 // Hair color
SAY NAME1 @79 /* ~Molly~ */
SAY NAME2 @79




/* ~The Mourning of Centeol, the Spider Lady, by Lava~ */

BEGIN @80 /* ~The Mourning of Centeol, the Spider Lady, by Lava~ */ DESIGNATED 22 
LABEL bg1re_mourning_of_centeol
REQUIRE_FILE ~override/RE1_Installed.G3~ @14 /*~The Component "Amount of -ahem - details and BG-style vs. description text" is not installed.~ */


COPY ~BG1RE/Centeol/C#LCCENB.bam~ ~override~
COPY ~BG1RE/Centeol/C#LCCENB.itm~ ~override~
SAY NAME1 @81 /* ~Centeol's Journal~ */
SAY NAME2 @81
SAY DESC @82 /* ~This is the journal of Centeol, the woman who was changed into a creature of horrid appearance. It may be a good source for those who want to learn about her past.

"...we talked again. I met him near the House of the Talisman. He was continuing his researches. Oh, how I wish I could help him. I don't care what others would think. I just want his dreams to come true. But...it's fine. At least I can look at him when he's studying his tomes. That should be enough. He would never leave Tanova for me..."

"...he had an argument with the queen. I don't know why; I don't know... but Tanova. She didn't come. She left him alone. My poor beloved... I'll try to support him. I'm not sure how, but I will. I promise."

"He met the queen again. They didn't argue this time. That's good. I don't want to see him alone. Upset. Distanced."

"She - Tanova - left him again. Alone. He spent his whole day ALONE. She didn't even ask if he wants to talk. She doesn't deserve him."

"...she should DIE... She's like a leech..."

"...I WILL do it..."

"I CAN do it."

Some pages are missing; the next entry was made two months later.

"How could he?! I love him so much...she deserved her death. I did everything I could to help him. But even though he CURSED me! WHY?! But this will end... This...this will end... But I hear them... I hear the eight-legged horror creep inside... they never stop..."

"...no matter how much time will pass, I can never forget..."

"No one will see me. I will stay alone. Alone with my memories. They never leave. They never die."

"Will this end?"

"...I beg for silence! I just want some peace! Please..."

"I'm dead. I'm dead to Faern. I'm dead to him."

"...but I can't forget..."

That line is the last one.

Weight: 1 lbs.~ */

COPY_EXISTING ~%CloakwoodNestSpiderNest%.are~ ~override~
  LAUNCH_PATCH_FUNCTION  ~fj_are_structure~
    INT_VAR
    fj_con_itm_idx    = SHORT_AT 0x74 - 1 
    fj_flags          = 1 // identified
    STR_VAR
    fj_name           = c#lccenb
    fj_structure_type = itm
  END
BUT_ONLY



COMPILE EVALUATE_BUFFER	~BG1RE/Centeol/Centeol.d~

ACTION_IF GAME_IS ~bgt eet~ THEN BEGIN
EXTEND_TOP ~%FirewineBridge%.bcs~ ~BG1RE/Centeol/re1_AR4500.baf~ 
      EVALUATE_BUFFER 
EXTEND_TOP ~%Beregost_JovialJuggler_L1%.bcs~ ~BG1RE/Centeol/re1_AR3304.baf~ 
      EVALUATE_BUFFER 
END ELSE BEGIN //Tutu, BG:EE and BG
EXTEND_TOP ~%tutu_var%ar4500.bcs~ ~BG1RE/Centeol/re1_AR4500.baf~ 
      EVALUATE_BUFFER 
EXTEND_TOP ~%tutu_var%ar3304.bcs~ ~BG1RE/Centeol/re1_AR3304.baf~ 
      EVALUATE_BUFFER 
END 

COPY_EXISTING ~%tutu_var%poe.CRE~ ~override~
WRITE_EVALUATED_ASCII 0x280 ~poe~ #32 // script name / DV

COPY ~BG1RE/Centeol/c#lccens.CRE~ ~override~ //ghost spider
WRITE_ASCII 0x2cc ~c#lccens~  #8  // dialogue
WRITE_ASCII 0x280 ~c#lccens~ #32  // death variable
WRITE_EVALUATED_ASCII 0x248 ~c#lccens~ #8   // Override script
WRITE_ASCII 0x268 ~INITDLG~	     #8  // default script
SAY INITIAL_MEETING ~~ 
SAY NAME1 @292
SAY NAME2 @292 //~Ghostly Spirit~


/* Quest reward: Centeol's Wand */

ACTION_IF GAME_IS ~bg1 totsc~ THEN BEGIN
  COPY ~BG1RE/Centeol/C#LCCENW_BG1.bam~ ~override/C#LCCENW.bam~
  COPY ~BG1RE/Centeol/C#LCCENW_BG1.itm~ ~override/C#LCCENW.itm~
  SAY NAME1 @194
  SAY NAME2 @194
  SAY DESC  @195  
  EXTEND_BOTTOM ~dplayer3.bcs~ ~bg1re/centeol/centeol_Baldur.baf~ EVALUATE_BUFFER
END

ACTION_IF GAME_IS ~bgee bgt tutu tutu_totsc eet~ THEN BEGIN  
  COPY ~BG1RE/Centeol/C#LCCENW.bam~ ~override~
  COPY ~BG1RE/Centeol/C#LCCENW.itm~ ~override~
  SAY NAME1 @194
  SAY NAME2 @194
  SAY DESC  @195
  EXTEND_BOTTOM ~BALDUR.bcs~ ~bg1re/centeol/centeol_Baldur.baf~ EVALUATE_BUFFER
END




/* ~The Essential End, by Lava~ */


BEGIN @83 /* ~The Essential End, by Lava~ */ DESIGNATED 23 
LABEL bg1re_essential_end
REQUIRE_FILE ~bg1re/backup/RE1_WarningTeen.G3~ @14 /*~The Component "Amount of -ahem - details and BG-style vs. description text" is not installed.~ */

COMPILE EVALUATE_BUFFER ~BG1RE/EssentialEnd/essentialend.d~
COMPILE EVALUATE_BUFFER ~BG1RE/EssentialEnd/re1lvcol.baf~

COPY ~BG1RE/EssentialEnd/re1lvcol.cre~ ~override~
SAY NAME1 @84 /* ~Dark phantasm~ */
SAY NAME2 @84
WRITE_EVALUATED_ASCII 0x280 ~re1lvcol~ #32   // script name / DV
WRITE_EVALUATED_ASCII 0x2cc ~re1lvcol~ #8   // set dialogue file

COPY ~BG1RE/EssentialEnd/re1lvcol.spl~ ~override~
SAY NAME1 @85 /* ~Phantasm's Mark~ */
SAY NAME2 @85


ACTION_IF GAME_IS ~bgt eet~ THEN BEGIN
EXTEND_TOP ~%Undercity%.bcs~ ~BG1RE/EssentialEnd/re1lv_ar0123.baf~ 
      EVALUATE_BUFFER 
END ELSE BEGIN //Tutu, BG:EE and BG
EXTEND_TOP ~%tutu_var%AR0123.bcs~ ~BG1RE/EssentialEnd/re1lv_ar0123.baf~ 
      EVALUATE_BUFFER 
END 






/* The Harvestmen Lair, by Lava (mature content) */

BEGIN @86 /* ~The Harvestmen Lair, by Lava (mature content)~ */ DESIGNATED 24 
LABEL bg1re_harvestmen_lair
REQUIRE_FILE ~bg1re/backup/RE1_MatureContent.G3~ @77 /* ~This component has no teen rated version.~ */

COPY ~BG1RE/Areas/c#lc08~ ~override~
COMPILE EVALUATE_BUFFER ~BG1RE/harvestmanslair/harvestmanslair.d~

COMPILE EVALUATE_BUFFER ~BG1RE/harvestmanslair/re1lvhac.baf~

COPY ~BG1RE/harvestmanslair/re1lvdr1.cre~ ~override~
SAY NAME1 @87 /* ~Ool-Garias~ */
SAY NAME2 @87
WRITE_EVALUATED_ASCII 0x280 ~re1lvdr1~ #32   // script name / DV
WRITE_EVALUATED_ASCII 0x2cc ~re1lvdr1~ #8   // set dialogue file
WRITE_EVALUATED_ASCII 0x248 ~re1lvdr1~ #8   // Override script
WRITE_EVALUATED_ASCII 0x250 ~%tutu_scripts%HOUT~ #8   // Class script
WRITE_EVALUATED_ASCII 0x268 ~%tutu_scriptw%TASIGHT~ #8   // Default script

COPY ~BG1RE/harvestmanslair/re1lvdr2.cre~ ~override~
SAY NAME1 @88 /* ~Is'samya~ */
SAY NAME2 @88
WRITE_EVALUATED_ASCII 0x280 ~re1lvdr2~ #32   // script name / DV
WRITE_EVALUATED_ASCII 0x2cc ~re1lvdr2~ #8   // set dialogue file
WRITE_EVALUATED_ASCII 0x248 ~re1lvdr2~ #8   // Override script
WRITE_EVALUATED_ASCII 0x268 ~%tutu_scriptw%TASIGHT~ #8   // Default script

COPY ~BG1RE/harvestmanslair/re1lvhar.cre~ ~override~
SAY NAME1 @89 /* ~Shady character~ */
SAY NAME2 @89
WRITE_EVALUATED_ASCII 0x280 ~re1lvhar~ #32   // script name / DV
WRITE_EVALUATED_ASCII 0x2cc ~re1lvhar~ #8   // set dialogue file
WRITE_EVALUATED_ASCII 0x248 ~re1lvhar~ #8   // Override script
WRITE_EVALUATED_ASCII 0x268 ~%tutu_scriptw%TASIGHT~ #8   // Default script

ACTION_IF GAME_IS ~bgt eet~ THEN BEGIN
EXTEND_TOP ~%NBaldursGate%.bcs~ ~BG1RE/harvestmanslair/re1lvhar_ar0200.baf~ 
      EVALUATE_BUFFER 
END ELSE BEGIN //Tutu, BG:EE and BG
EXTEND_TOP ~%tutu_var%AR0200.bcs~ ~BG1RE/harvestmanslair/re1lvhar_ar0200.baf~ 
      EVALUATE_BUFFER 
END 






/* The Great Zudini, by Kulyok */


BEGIN @90 /* ~The Great Zudini, by Kulyok (mature content)~ */ DESIGNATED 25 
LABEL bg1re_great_zudini
REQUIRE_FILE ~bg1re/backup/RE1_MatureContent.G3~ @77 /* ~This component has no teen rated version.~ */


COMPILE EVALUATE_BUFFER ~BG1RE/Zudini/O#Zudini.d~

COMPILE EVALUATE_BUFFER	~BG1RE/Zudini/O#Zudini.baf~
	USING ~bg1re/tra/autotra/%LANGUAGE%/O#Zudini.tra~

ACTION_IF GAME_IS ~bgt eet~ THEN BEGIN
EXTEND_TOP ~%CentralBaldursGate%.bcs~ ~BG1RE/Zudini/AR0700.baf~ 
      EVALUATE_BUFFER 
END ELSE BEGIN //Tutu, BG:EE and BG
EXTEND_TOP ~%tutu_var%AR0700.bcs~ ~BG1RE/Zudini/AR0700.baf~ 
      EVALUATE_BUFFER 
END 


COPY_EXISTING ~%tutu_var%zordra.cre~ ~override/o#zudini.cre~
WRITE_ASCII 0x248 ~O#Zudini~  #8   // override
WRITE_ASCII 0x2cc ~O#Zudini~  #8   // dialogue
WRITE_ASCII 0x280 ~O#Zudini~  #32  // death variable
WRITE_ASCII 0x250 ~~ 	      #8   // class script
WRITE_ASCII 0x258 ~~ 	      #8   // race script
WRITE_ASCII 0x260 ~~ 	      #8   // general script
WRITE_ASCII 0x268 ~~	      #8   // default script
WRITE_BYTE 0x2d 54 // Minor color
WRITE_BYTE 0x2e 66 // Major color
WRITE_BYTE 0x32 63 // Hair color
SAY NAME1 @91 /* ~The Great Zudini~ */
SAY NAME2 @91






/* ~The Messenger, by Thimblerig~ */


BEGIN @92 /* ~The Messenger, by Thimblerig~ */ DESIGNATED 26 
LABEL bg1re_messenger
REQUIRE_FILE ~override/RE1_Installed.G3~ @14 /*~The Component "Amount of -ahem - details and BG-style vs. description text" is not installed.~ */

ADD_JOURNAL TITLE (@179) @19 @30 @32 @45 @55 @119 @161 @198 @200 @202 @207 @209 USING ~bg1re/tra/autotra/%LANGUAGE%/themessenger.tra~

/* BGT: remove journal entries upon transition to BGII */
ACTION_IF GAME_IS ~bgt~ THEN BEGIN
  EXTEND_TOP ~AR0602.bcs~ ~bg1re/messenger/messenger_AR0602.baf~ EVALUATE_BUFFER
	USING ~bg1re/tra/autotra/%LANGUAGE%/themessenger.tra~
END


COMPILE EVALUATE_BUFFER ~bg1re/messenger/themessenger.d~

COPY ~bg1re/messenger/T1BLAI.cre~ ~override/T1BLAI.cre~
WRITE_ASCII 0x2cc ~T1BLAI~  #8  // dialogue
WRITE_ASCII 0x280 ~T1BLAI~ #32  // death variable
SAY INITIAL_MEETING ~Can I help you, stranger?~ [GENMG04]
SAY SELECT_COMMON1 ~Can I help you, stranger?~ [GENMG04] 
SAY NAME1 @93 /* ~Dawn Priest Blaise~ */
SAY NAME2 @93


COPY ~bg1re/messenger/T1SAPI.cre~ ~override/T1SAPI.cre~
WRITE_ASCII 0x2cc ~T1SAPI~  #8  // dialogue
WRITE_ASCII 0x280 ~T1SAPI~ #32  // death variable
SAY INITIAL_MEETING ~You are welcome in my sight.~ [GGFEM01]
SAY SELECT_COMMON1 ~You are welcome in my sight.~ [GGFEM01]
SAY SELECT_COMMON2 ~You are welcome in my sight.~ [GGFEM01]
SAY NAME1 @94 /* ~Sister Sapientia~ */
SAY NAME2 @94


COPY ~bg1re/messenger/T1BlaBk.ITM~ ~override/T1BlaBk.itm~
SAY NAME1 @95 /* ~Dawn Priest Blaise's Book~ */
SAY NAME2 @95
SAY DESC @96 /* ~Dawn Priest Blaise's Book

This small, leather-bound book contains the prayers and daily offices of a follower of Oghma, the patron of scholarship. As well as the morning and evening services, it details the rituals and meditations involved in such things as beginning a scholarly treatise, comparing translations or corrupted copies, and annotating texts. It is quite ordinary for its kind except for the illustrations: they glow with lapis lazuli and gold leaf and include among other images the tools of an illuminator's trade, or, growing up the side of a page of dry prose, a blossoming pea-vine.~ */

COPY ~bg1re/messenger/T1SapLet.itm~ ~override/T1SapLet.itm~
SAY NAME1 @97 /*~Sister Sapientia's Letter~ */
SAY NAME2 @97
SAY DESC @98 /* ~Sister Sapientia's Letter

To Dawn Priest Blaise, of the Song of the Morning Temple, East of Beregost, from Sister Sapientia of the Temple of Oghma, in Candlekeep.

14 Tarsakh: My dear love,

I thought of you this morning while weeding the kitchen garden. The sun cleared the Keep's walls and lit up the dew, making the young spinach and the staked peas rich and strange...


22 Tarsakh: There was a plague of frogs in the refectory this morning, and much wailing and flapping of robes as Honoured Scholars fled the hopping menace. I fear that Pink Lightning and Gorion's child are behind this, somehow. I should be outraged at the indignity, but as I write a frog sits on my page, green as new moss and no larger than my thumb-nail. Now, regarding your thoughts on metempsychosis...


28 Tarsakh: We have been working lamb skins into parchment for the past week. The smell is atrocious and my hands ache. Thank you for the pens! I have the blackest of black ink...


1 Mirtul: Has it been forty years already? Forty years since you asked Candlekeep for a clean copy of Sanderly's Aubades? It is the blink of an eye, my love.

With the roads so dangerous of late I do not know when I can send this, but I will strive to find a reliable messenger.

As ever yours,

Sister Sapientia~ */


/* BAMs of Serpentia's letter and Blaise's Book need to be adjusted for BG1 */
ACTION_IF GAME_IS ~bg1 totsc~ THEN BEGIN
COPY_EXISTING  ~T1SapLet.itm~ ~override~
WRITE_ASCII 0x3a ~ISCRL02~ #8
WRITE_ASCII 0x58 ~CSCRL2J~ #8

COPY_EXISTING  ~T1BlaBk.itm~ ~override~
WRITE_ASCII 0x3a ~IBOOK03~ #8
WRITE_ASCII 0x58 ~CBOOK01~ #8
END


// Sapientia in the Prologue

ACTION_IF GAME_IS ~bgt eet~ THEN BEGIN
EXTEND_TOP ~%Candlekeep%.bcs~ ~bg1re/messenger/T1SapiAR2600.baf~ 
      EVALUATE_BUFFER 
EXTEND_BOTTOM ~%Candlekeep%.bcs~ ~bg1re/messenger/AR2600_eb.baf~ EVALUATE_BUFFER 
END ELSE BEGIN //Tutu, BG:EE and BG
EXTEND_TOP ~%tutu_var%ar2600.bcs~ ~bg1re/messenger/T1SapiAR2600.baf~ 
      EVALUATE_BUFFER 
EXTEND_BOTTOM ~%Candlekeep%.bcs~ ~bg1re/messenger/AR2600_eb.baf~ EVALUATE_BUFFER 
END 

// Sapientia in Return to Candlekeep: The Sequel

ACTION_IF GAME_IS ~bgt eet~ THEN BEGIN
EXTEND_TOP ~%Candlekeep_Ch6%.bcs~ ~bg1re/messenger/T1SapiAR6526.baf~ 
      EVALUATE_BUFFER 
END ELSE BEGIN //Tutu, BG:EE and BG
EXTEND_TOP ~%tutu_var%ar2626.bcs~ ~bg1re/messenger/T1SapiAR6526.baf~ 
      EVALUATE_BUFFER 
END

// Blaise at the Temple of Lathander

ACTION_IF GAME_IS ~bgt eet~ THEN BEGIN
EXTEND_TOP ~%Temple_Vestibule%.bcs~ ~bg1re/messenger/T1BlaiAR3401.baf~ 
      EVALUATE_BUFFER 
END ELSE BEGIN //Tutu, BG:EE and BG
EXTEND_TOP ~%tutu_var%AR3401.bcs~ ~bg1re/messenger/T1BlaiAR3401.baf~ 
      EVALUATE_BUFFER 
END 




/* ~Ender Sai, the Hero's Reward, by Thimblerig~ */

BEGIN @99 /* ~Ender Sai, the Hero's Reward, by Thimblerig~ */ DESIGNATED 27 
LABEL bg1re_ender_sai_heros_reward
REQUIRE_FILE ~bg1re/backup/RE1_WarningTeen.G3~ @14 /*~The Component "Amount of -ahem - details and BG-style vs. description text" is not installed.~ */

COMPILE EVALUATE_BUFFER ~bg1re/endersai/endersai.d~

COMPILE EVALUATE_BUFFER ~bg1re/endersai/re1end1.baf~
COMPILE EVALUATE_BUFFER ~bg1re/endersai/re1end2.baf~
COMPILE EVALUATE_BUFFER ~bg1re/endersai/re1end3.baf~
COMPILE EVALUATE_BUFFER ~bg1re/endersai/re1end4.baf~

EXTEND_BOTTOM ~%JAHEIRA_BCS%.bcs~ ~bg1re/endersai/enderjaheira_add.baf~
      EVALUATE_BUFFER 

// Ender Sai, in the Friendly Arm Inn

COPY_EXISTING ~%tutu_var%ENDER.cre~ ~override/T1ENDER.cre~
WRITE_ASCII 0x2cc ~T1ENDER~  #8  // dialogue
WRITE_ASCII 0x280 ~T1ENDER~ #32  // death variable
SAY NAME1 @100 /* ~Ender Sai~ */
SAY NAME2 @100


ACTION_IF GAME_IS ~bgt eet~ THEN BEGIN
EXTEND_TOP ~%FriendlyArmInn_L1%.bcs~ ~bg1re/endersai/T1EnderAR2301.baf~ 
      EVALUATE_BUFFER 
END ELSE BEGIN //Tutu, BG:EE and BG
EXTEND_TOP ~%tutu_var%ar2301.bcs~ ~bg1re/endersai/T1EnderAR2301.baf~ 
      EVALUATE_BUFFER 
END 







/////// The Novelists, by Thimblerig

BEGIN @101 /* ~The Novelists, by Thimblerig~ */ DESIGNATED 28 
LABEL bg1re_the_novellists
REQUIRE_FILE ~override/RE1_Installed.G3~ @14 /*~The Component "Amount of -ahem - details and BG-style vs. description text" is not installed.~ */
 

COMPILE EVALUATE_BUFFER ~bg1re/novelist/thenovelists.d~
COMPILE EVALUATE_BUFFER ~bg1re/novelist/T1KITTY.baf~
	USING ~bg1re/tra/autotra/%LANGUAGE%/thenovelists.tra~

// The Writers


COPY ~bg1re/novelist/T1DAI.cre~ ~override/T1DAI.cre~
WRITE_ASCII 0x2cc ~T1DAI~  #8  // dialogue
WRITE_ASCII 0x280 ~T1DAI~ #32  // death variable
WRITE_EVALUATED_ASCII 0x248 ~~ #8   // Override script
WRITE_EVALUATED_ASCII 0x250 ~%tutu_var%SHOUT~ #8   // Class script
WRITE_EVALUATED_ASCII 0x258 ~%tutu_scripts%EEENEMY~ #8   // Race script  
WRITE_EVALUATED_ASCII 0x268 ~%tutu_scriptw%TASIGHT~ #8   // Default script
SAY INITIAL_MEETING @102 /* ~I'll talk to you, if you wish.~ [LATHAN11] */
SAY SELECT_COMMON1 @103 /* ~Good to see you, friend.~ [LATHAN09] */
SAY SELECT_RARE1 @103
SAY DIALOG_HOSTILE @104 /* ~I'm not usually prone to violence, but then I don't usually deal with the likes of you.~ [LATHAN17] */
SAY NAME1 @105 /* ~Dai~ */
SAY NAME2 @105

COPY ~bg1re/novelist/T1KITTY.cre~ ~override/T1KITTY.cre~
WRITE_ASCII 0x2cc ~T1KITTY~  #8  // dialogue
WRITE_ASCII 0x280 ~T1KITTY~ #32  // death variable
WRITE_EVALUATED_ASCII 0x248 ~T1KITTY~ #8   // Override script
WRITE_EVALUATED_ASCII 0x250 ~%tutu_var%SHOUT~ #8   // Class script
WRITE_EVALUATED_ASCII 0x258 ~%tutu_scripts%EEENEMY~ #8   // Race script  
WRITE_EVALUATED_ASCII 0x268 ~%tutu_scriptw%TASIGHT~ #8   // Default script
SAY INITIAL_MEETING @106 /* ~How do you do.  A pleasant day, yes?~ [GNOMEF04] */
SAY SELECT_COMMON1 @107 /* ~Oh, you're fine enough, I suppose.~ [GNOMEF01] */
SAY SELECT_COMMON2 @106 
SAY SELECT_RARE1 @107
SAY DIALOG_HOSTILE @108 /* ~Don't you start bullying; I'll not have it.~ [GNOMEF02] */
SAY NAME1 @109 /* ~Kitty~ */
SAY NAME2 @109


// The books

COPY ~bg1re/novelist/T1Pap01.bam~ ~override~
COPY ~bg1re/novelist/T1Pap02.bam~ ~override~



ACTION_IF GAME_IS ~bgt tutu tutu_totsc bgee eet~ THEN BEGIN

COPY ~bg1re/novelist/T1TROBK1.ITM~ ~override/T1TroBk1.itm~
SAY NAME1 @110 /* ~Kitty and Dai's Rough Draft~ */
SAY NAME2 @111 /*  ~Behold: Childe of Candlekeep~ */
SAY DESC @122 /* ~This is the unfinished draft of a light novel loosely based on your recent adventures.  The prose is purple, the humour is broad, and the plot moves at an entertaining speed.

In a good light, it is not *entirely* unlike what actually happened.~ */

OUTER_SET T1read = RESOLVE_STR_REF (~READ~)
APPEND itemdial.2da ~T1TroBk1 %T1read% T1KDBOOK~
UNLESS ~T1TroBk1~
END

ACTION_IF GAME_IS ~bg1 totsc~ THEN BEGIN

COPY ~bg1re/novelist/T1TROBK2.ITM~ ~override/T1TroBk1.itm~
SAY NAME1 @110
SAY NAME2 @111
SAY DESC @122

COMPILE EVALUATE_BUFFER ~bg1re/novelist/T1TROBK3.baf~
COPY ~bg1re/novelist/T1TROBK3.cre~ ~override/T1TROBK3.cre~
//SAY NAME1 ~Behold: Childe of Candlekeep~
//SAY NAME2 ~Behold: Childe of Candlekeep~


END


// Kitty and Dai in the Blade and Stars, common room 

LAF extend_area_script STR_VAR area="%SEBaldursGate_Blade&Stars_L1%" top="bg1re/novelist/T1KittyDai_AR0105.baf"   END


// Kitty and Dai in the Thieves' Guild, just before the end game

LAF extend_area_script STR_VAR area="%EBaldursGate_ThievesGuild%" top="bg1re/novelist/T1KittyDai_AR0153.baf"   END



/////// Honest Lies of Two Riversides, By Lava

BEGIN @112 /* ~The Honest Lies of Two Riversides, By Lava~ */ DESIGNATED 29 
LABEL bg1re_honest_lies_of_two_riversides
REQUIRE_FILE ~override/RE1_Installed.G3~ @14 /*~The Component "Amount of -ahem - details and BG-style vs. description text" is not installed.~ */

ADD_JOURNAL TITLE (#31418) @122 USING ~bg1re/tra/autotra/%LANGUAGE%/riversides.tra~

/* BGT: remove journal entries upon transition to BGII */
ACTION_IF GAME_IS ~bgt~ THEN BEGIN
  EXTEND_TOP ~AR0602.bcs~ ~bg1re/riversides/riversides_AR0602.baf~ EVALUATE_BUFFER
	USING ~bg1re/tra/autotra/%LANGUAGE%/riversides.tra~
END



/* fetch journal entry about Brage from NALIN.dlg */


COPY_EXISTING ~%tutu_var%NALIN.dlg~ ~override~
  // get journal entry from first response associated with dialogue state 1
  LPF READ_JOURNAL_STRREF
  INT_VAR
    state = 1
  RET
    strref
END

    SET nalin_journalentry = strref 
/*
  // just for debugging purposes: fetch journal text from strref and output it in console
  GET_STRREF strref journalText
  PATCH_PRINT ~Journal entry #%strref%: %journalText%~
BUT_ONLY

*/

COMPILE EVALUATE_BUFFER ~bg1re/riversides/riversides.d~
COMPILE EVALUATE_BUFFER ~bg1re/riversides/re1rivg1.baf~

// The Ghosts

// Hanaly
COPY ~bg1re/riversides/RE#GHON1.cre~ ~override/RE#GHON1.cre~
WRITE_ASCII 0x248 ~RE#GHON1~  #8	       // override
WRITE_ASCII 0x2cc ~RE#GHON1~  #8           // dialogue
WRITE_ASCII 0x280 ~RE#GHON1~ #32           // death variable
WRITE_ASCII 0x250 ~~    #8  				// class script
WRITE_ASCII 0x258 ~~ #8  					// race script
WRITE_ASCII 0x260 ~~ 	     #8            // general script
WRITE_ASCII 0x268 ~~ #8  					// default script
SAY NAME1 @113 /* ~Hanaly~ */
SAY NAME2 @114 /* ~Ghost~ */
ADD_CRE_ITEM ~%tutu_var%GHOST2~ #0 #0 #0 ~UNSTEALABLE&UNDROPPABLE~ ~LRING~  //This was copied from the ghost of Ulcaster
ADD_CRE_ITEM ~%tutu_var%PARAGHOU~ #0 #0 #0 ~UNSTEALABLE&UNDROPPABLE~ ~WEAPON1~ EQUIP  // In case they have to fight...

// Yvonne
COPY ~bg1re/riversides/RE#GHON2.cre~ ~override/RE#GHON2.cre~
WRITE_ASCII 0x248 ~RE#GHON2~  #8	      // override
WRITE_ASCII 0x2cc ~RE#GHON2~  #8          // dialogue
WRITE_ASCII 0x280 ~RE#GHON2~ #32          // death variable
WRITE_ASCII 0x250 ~~   #8  				// class script
WRITE_ASCII 0x258 ~~ #8  				// race script
WRITE_ASCII 0x260 ~~ #8                 // general script
WRITE_ASCII 0x268 ~~ #8  				// default script
SAY NAME1 @115 /* ~Yvonne~ */
SAY NAME2 @114
ADD_CRE_ITEM ~%tutu_var%GHOST2~ #0 #0 #0 ~UNSTEALABLE&UNDROPPABLE~ ~LRING~ //This was copied from the ghost of Ulcaster
ADD_CRE_ITEM ~%tutu_var%PARAGHOU~ #0 #0 #0 ~UNSTEALABLE&UNDROPPABLE~ ~WEAPON1~ EQUIP  // In case they have to fight...

// The Items

COPY ~bg1re/riversides/T1GPipe.ITM~ ~override/T1GPipe.itm~
SAY NAME1 @116 /* ~Hanaly's Pipe~ */
SAY NAME2 @116
SAY DESC @117 /* ~This is the pipe given to you by Hanaly the Ghost.  Though it is old and battered, the scent of fine tobacco still lingers in the bowl and stem.~ */


COPY ~bg1re/riversides/re1#deat.BAM~ ~override~
COPY ~bg1re/riversides/t1gpipi.BAM~ ~override~


ACTION_IF GAME_IS ~tutu tutu_totsc bg1 totsc bgt~ BEGIN
COPY ~bg1re/riversides/t1gpipe.BAM~ ~override~
END


ACTION_IF GAME_IS ~bgee eet~ THEN BEGIN 
COPY_EXISTING ~T1GPipe.ITM~ ~override/T1GPipe.ITM~
WRITE_EVALUATED_ASCII 0x58 ~CMISC9M~ #8
END




COPY ~bg1re/riversides/re1#ston.BAM~ ~override~


ACTION_IF GAME_IS ~tutu tutu_totsc bgt bgee eet~ THEN BEGIN

COPY ~bg1re/riversides/T1GSton.ITM~ ~override/T1GSton.itm~
SAY NAME1 @118 /* ~Ghost Stone~ */
SAY NAME2 @118
SAY UNIDENTIFIED_DESC @119 /* ~This small stone was given to you by the ghosts Hanaly and Yvonne when you reunited them.  It has been worn smooth and featureless by the water's flow, and feels comfortable when held in the hand.~ */
SAY DESC @120 /* ~This small stone was given to you by the ghosts Hanaly and Yvonne when you reunited them.  It lay long in the river, smoothed and obscured by the water's flow.  When warmed in the hand, it will briefly share its property of obscuration.

STATISTICS:

Special:  The user becomes Blurred.  This ability may be used once per day.~ */
END

ACTION_IF GAME_IS ~bg1 totsc~ THEN BEGIN

COPY ~bg1re/riversides/T1GSto2.ITM~ ~override/T1GSton.itm~
SAY NAME1 @118
SAY NAME2 @118
SAY UNIDENTIFIED_DESC @119
SAY DESC @121 /* ~This small stone was given to you by the ghosts Hanaly and Yvonne when you reunited them.  It lay long in the river, smoothed and obscured by the water's flow.  When warmed in the hand, it will briefly share its property of obscuration.

STATISTICS:

Special:  The user becomes Blurred.  
Charges: 10~ */
END


// Adding the Ghosts to Nashkel

  LAF extend_area_script STR_VAR area="%Nashkel%" top="bg1re/riversides/T1_AR4800.baf"   END




// ~Necromancer's Trouble~ 

BEGIN @123 /* ~Necromancer's Trouble, by jastey~ */ DESIGNATED 30 
LABEL bg1re_necromancers_trouble

REQUIRE_FILE ~override/RE1_Installed.G3~ @14 /*~The Component "Amount of -ahem - details and BG-style vs. description text" is not installed.~ */

/* ~Mourning Mom in Front of the Flamin Fist Headquarters~ */
ADD_JOURNAL TITLE (@434) @1 @18 @109 USING ~bg1re/tra/autotra/%LANGUAGE%/necromancer.tra~

/* ~Susan Lost~ */
ADD_JOURNAL TITLE (@435) @32 @184 @200 USING ~bg1re/tra/autotra/%LANGUAGE%/necromancer.tra~

/* ~Blood for the Necromancer~ */
ADD_JOURNAL TITLE (@436) @144 @154 @178 @205 @207 @267 @394 USING ~bg1re/tra/autotra/%LANGUAGE%/necromancer.tra~

/* ~A Cow in Baldur's Gate City~ */
ADD_JOURNAL TITLE (@437) @298 @307 @354 @363 @385 @406 @424 @433 USING ~bg1re/tra/autotra/%LANGUAGE%/necromancer.tra~

/* BGT: remove journal entries upon transition to BGII */
ACTION_IF GAME_IS ~bgt~ THEN BEGIN
  EXTEND_TOP ~AR0602.bcs~ ~bg1re/necromancer/scripts/necromancer_AR0602.baf~ EVALUATE_BUFFER
	USING ~bg1re/tra/autotra/%LANGUAGE%/necromancer.tra~
END


COPY_EXISTING ~%NBaldursGate%.are~ ~override~
  LAUNCH_PATCH_FUNCTION  ~fj_are_structure~
    INT_VAR
    fj_type         = 2    //travel
    fj_box_left     = 4183
    fj_box_top      = 2588
    fj_box_right    = 4309
    fj_box_bottom   = 2662
    fj_cursor_idx   = 30   //door
    fj_vertex_0     = 4183 + (2588 << 16)
    fj_vertex_1     = 4309 + (2588 << 16)
    fj_vertex_2     = 4309 + (2662 << 16)
    fj_vertex_3     = 4183 + (2662 << 16)
    STR_VAR
    fj_structure_type   = region
    fj_name             = Tranc#q1
    fj_destination_area = c#q111
    fj_destination_name = c#Exq111
  END


  LAUNCH_PATCH_FUNCTION  ~fj_are_structure~
    INT_VAR
    fj_loc_x       = 4213
    fj_loc_y       = 2638
    fj_orientation = 4   //W
    STR_VAR
    fj_structure_type = entrance
    fj_name           = c#Exitq1
  END
BUT_ONLY


/* areas */
COPY ~bg1re/necromancer/area~ ~Override~


ACTION_IF GAME_IS ~bgt~ THEN BEGIN
COPY_EXISTING ~bg1re/necromancer/area/c#q111.are~ ~override~
  LAUNCH_PATCH_FUNCTION  ~fj_are_structure~
    INT_VAR
    fj_type         = 2    //travel
    fj_box_left     = 142
    fj_box_top      = 282
    fj_box_right    = 250
    fj_box_bottom   = 361
    fj_cursor_idx   = 30   //door
    fj_vertex_0     = 142 + (282 << 16)
    fj_vertex_1     = 250 + (282 << 16)
    fj_vertex_2     = 250 + (361 << 16)
    fj_vertex_3     = 142 + (361 << 16)
    STR_VAR
    fj_structure_type   = region
    fj_name             = C#exq111
    fj_destination_area = AR7300
    fj_destination_name = c#Exitq1
  END

BUT_ONLY
END

ACTION_IF GAME_IS ~bg1 totsc bgee~ THEN BEGIN
COPY_EXISTING ~bg1re/necromancer/area/c#q111.are~ ~override~
  LAUNCH_PATCH_FUNCTION  ~fj_are_structure~
    INT_VAR
    fj_type         = 2    //travel
    fj_box_left     = 142
    fj_box_top      = 282
    fj_box_right    = 250
    fj_box_bottom   = 361
    fj_cursor_idx   = 30   //door
    fj_vertex_0     = 142 + (282 << 16)
    fj_vertex_1     = 250 + (282 << 16)
    fj_vertex_2     = 250 + (361 << 16)
    fj_vertex_3     = 142 + (361 << 16)
    STR_VAR
    fj_structure_type   = region
    fj_name             = C#exq111
    fj_destination_area = AR0200
    fj_destination_name = c#Exitq1
  END

BUT_ONLY
END

ACTION_IF GAME_IS ~tutu tutu_totsc~ THEN BEGIN
COPY_EXISTING ~bg1re/necromancer/area/c#q111.are~ ~override~
  LAUNCH_PATCH_FUNCTION  ~fj_are_structure~
    INT_VAR
    fj_type         = 2    //travel
    fj_box_left     = 142
    fj_box_top      = 282
    fj_box_right    = 250
    fj_box_bottom   = 361
    fj_cursor_idx   = 30   //door
    fj_vertex_0     = 142 + (282 << 16)
    fj_vertex_1     = 250 + (282 << 16)
    fj_vertex_2     = 250 + (361 << 16)
    fj_vertex_3     = 142 + (361 << 16)
    STR_VAR
    fj_structure_type   = region
    fj_name             = C#exq111
    fj_destination_area = FW0200
    fj_destination_name = c#Exitq1
  END

BUT_ONLY
END

ACTION_IF GAME_IS ~eet~ THEN BEGIN
COPY_EXISTING ~bg1re/necromancer/area/c#q111.are~ ~override~
  LAUNCH_PATCH_FUNCTION  ~fj_are_structure~
    INT_VAR
    fj_type         = 2    //travel
    fj_box_left     = 142
    fj_box_top      = 282
    fj_box_right    = 250
    fj_box_bottom   = 361
    fj_cursor_idx   = 30   //door
    fj_vertex_0     = 142 + (282 << 16)
    fj_vertex_1     = 250 + (282 << 16)
    fj_vertex_2     = 250 + (361 << 16)
    fj_vertex_3     = 142 + (361 << 16)
    STR_VAR
    fj_structure_type   = region
    fj_name             = C#exq111
    fj_destination_area = BG0200
    fj_destination_name = c#Exitq1
  END

BUT_ONLY
END



COPY_EXISTING ~bg1re/necromancer/area/c#q112.are~ ~override~
  LPF fj_are_structure
    INT_VAR
    fj_type        = 5 //table
    fj_loc_x       = 490
    fj_loc_y       = 248
    fj_box_left    = 415
    fj_box_top     = 196
    fj_box_right   = 458
    fj_box_bottom  = 262
    fj_trap_loc_x  = 490
    fj_trap_loc_y  = 248
    fj_vertex_0    = 415 + (196 << 16)
    fj_vertex_1    = 458 + (196 << 16)
    fj_vertex_2    = 458 + (262 << 16)
    fj_vertex_3    = 415 + (262 << 16)
    STR_VAR
    fj_structure_type = container
    fj_name           = ~Table~
  END
  LPF fj_are_structure
    INT_VAR
    fj_con_itm_idx    = SHORT_AT 0x74 - 1 // a new container will be last in the file
    fj_flags          = 1 // identified
    fj_charge0        = 2
    STR_VAR
    fj_name           = EVALUATE_BUFFER  ~%tutu_var%potn04~
    fj_structure_type = itm
  END  

  LPF fj_are_structure
    INT_VAR
    fj_con_itm_idx    = SHORT_AT 0x74 - 1 // a new container will be last in the file
    fj_flags          = 1 // identified
    fj_charge0        = 2
    STR_VAR
    fj_name           = EVALUATE_BUFFER  ~%tutu_var%potn20~
    fj_structure_type = itm
  END
  LPF fj_are_structure
    INT_VAR
    fj_con_itm_idx    = SHORT_AT 0x74 - 1 // a new container will be last in the file
    fj_flags          = 1 // identified
    fj_charge0        = 2
    STR_VAR
    fj_name           = EVALUATE_BUFFER  ~%tutu_var%potn08~
    fj_structure_type = itm
  END


BUT_ONLY




COPY_EXISTING ~bg1re/necromancer/area/c#q113.are~ ~override~
  LAUNCH_PATCH_FUNCTION  ~fj_are_structure~
    INT_VAR
    fj_type         = 1    //info
    fj_box_left     = 373
    fj_box_top      = 307
    fj_box_right    = 478
    fj_box_bottom   = 436
    fj_cursor_idx   = 22   //"?"
    fj_vertex_0     = 373 + (307 << 16)
    fj_vertex_1     = 478 + (307 << 16)
    fj_vertex_2     = 478 + (436 << 16)
    fj_vertex_3     = 373 + (436 << 16)
    fj_info_point_strref = RESOLVE_STR_REF (@175)
    STR_VAR
    fj_structure_type   = region
    fj_name             = C#q13inf
  END
BUT_ONLY

/* adaption of tis-name (in the wed-file) for Tutu/BGT */
ACTION_IF GAME_IS ~bgt eet~ THEN BEGIN

 COPY_EXISTING ~c#q114.wed~ ~override~
        SPRINT tis_name "%GnollStronghold_CrawlerCave%"
        READ_LONG 16 overlay_off
        WRITE_ASCIIE overlay_off + 0 + 4 ~%tis_name%~ (8)

END  

ACTION_IF GAME_IS ~tutu tutu_totsc~ THEN BEGIN //Tutu 

 COPY_EXISTING ~c#q114.wed~ ~override~
        SPRINT tis_name "%tutu_var%AR5103"
        READ_LONG 16 overlay_off
        WRITE_ASCIIE overlay_off + 0 + 4 ~%tis_name%~ (8)
END 





/* items */
COPY ~bg1re/necromancer/Items/c#q11tot.itm~ ~Override/c#q11tot.itm~ //dead girl (Beregost)
     SAY NAME1 @124 /* ~Dead Girl~ */
     SAY NAME2 @124
     SAY IDENTIFIED_DESC @125 /* ~This is the corpse of a dead young woman. She is wearing a fine wooven coat and the remainings of ornaments of dried flower arrangements that look somehow traditional.~ */

COPY ~bg1re/necromancer/Items/C#Q11dia.itm~ ~Override/C#Q11dia.itm~ //diary
     SAY NAME1 @126 /* ~Necromancer's Diary~ */
     SAY NAME2 @126
     SAY IDENTIFIED_DESC @127 /*  ~This is the necromancer's diary. It contains confirmation of everything he said about his motives, and a lot of self-pity and sorrow. 

He seems to be determined not to spread the dark arts he went into, and states this at several places, "not to spoil others to the dark path I went on". There is no writing about all the knowledge the necromancer must have gained concerning the resurrection of long lost persons. 

Whatever the results of his research, he seems to be determined to take it with him into the grave.~ */

COPY ~bg1re/necromancer/Items/C#Q11001.itm~ ~Override~ //cow
     SAY NAME1 @128 /* ~Bottle with blood~ */
     SAY NAME2 @128
     SAY IDENTIFIED_DESC @129 /* ~This bottle contains blood of a cow.~ */

COPY ~bg1re/necromancer/Items/C#Q11001.itm~ ~Override/C#Q11002.itm~ //cat
     SAY NAME1 @128 /* ~Bottle with blood~ */
     SAY NAME2 @128 /* ~Bottle with blood~ */
     SAY IDENTIFIED_DESC @130 /* ~This bottle contains blood of a cat.~ */

COPY ~bg1re/necromancer/Items/C#Q11001.itm~ ~Override/C#Q11003.itm~ //girl
     SAY NAME1 @128 /* ~Bottle with blood~ */
     SAY NAME2 @128 /* ~Bottle with blood~ */
     SAY IDENTIFIED_DESC @131 /* ~This bottle contains blood of a girl.~ */

COPY ~bg1re/necromancer/Items/C#Q11001.itm~ ~Override/C#Q11004.itm~ //nymphe
     SAY NAME1 @128 /* ~Bottle with blood~ */
     SAY NAME2 @128 /* ~Bottle with blood~ */
     SAY IDENTIFIED_DESC @132 /* ~This bottle contains blood of a nymph.~ */

COPY ~bg1re/necromancer/Items/C#Q11let.itm~ ~Override/C#Q11let.itm~
     SAY NAME1 @133 /* ~Letter of Mrs. Thirsty~ */
     SAY NAME2 @133
     SAY IDENTIFIED_DESC @134 /* ~This is the letter Mrs. Thirsty wrote to farmer Bruns. It has several pages, all lettered in a small, steady hand writing. By glancing on it, you notice the word "Berta" at least five times on each page.~ */

COPY ~bg1re/necromancer/Items/C#Q11005.itm~ ~Override/C#Q11005.itm~ //meat
     SAY NAME1 @135 /* ~Fresh Beef Steaks~ */
     SAY NAME2 @135 /* ~Fresh Beef Steaks~ */
     SAY IDENTIFIED_DESC @136 /* ~These are the steaks of Berta, Mrs. Thirsty's cow. The meat looks excellent, although you are not sure what to do with it - other than eating it, of course.

When wholly consumed, this meat restores 9 hit points to the person.~ */

COPY ~bg1re/necromancer/bams~ ~Override~


EXTEND_BOTTOM ~%NBaldursGate_BCS%.bcs~ ~bg1re/necromancer/Scripts/c#q11_ar0200.baf~
      EVALUATE_BUFFER

   EXTEND_BOTTOM ~%SWBaldursGate_FlamingFistHQ_L1_BCS%.bcs~ ~bg1re/necromancer/Scripts/c#q11_ar0607.baf~
      EVALUATE_BUFFER

   EXTEND_BOTTOM ~%FishingVillage_BCS%.bcs~ ~bg1re/necromancer/Scripts/c#q11_ar1400.baf~
      EVALUATE_BUFFER


LAF extend_area_script STR_VAR area="%SWBaldursGate%" top="bg1re/necromancer/Scripts/c#q11_ar1100.baf"   END



COMPILE EVALUATE_BUFFER ~bg1re/necromancer/Scripts/c#q11wat.baf~
COMPILE EVALUATE_BUFFER ~bg1re/necromancer/Scripts/c#q11mo2.baf~
COMPILE EVALUATE_BUFFER ~bg1re/necromancer/Scripts/c#q11nec.baf~
COMPILE EVALUATE_BUFFER ~bg1re/necromancer/Scripts/c#q11gir.baf~
COMPILE EVALUATE_BUFFER ~bg1re/necromancer/Scripts/c#q111.baf~
COMPILE EVALUATE_BUFFER ~bg1re/necromancer/Scripts/c#q112.baf~
COMPILE EVALUATE_BUFFER ~bg1re/necromancer/Scripts/c#q113.baf~
COMPILE EVALUATE_BUFFER ~bg1re/necromancer/Scripts/c#q114.baf~
COMPILE EVALUATE_BUFFER ~bg1re/necromancer/Scripts/c#q11c1.baf~
COMPILE EVALUATE_BUFFER ~bg1re/necromancer/Scripts/c#q11c2.baf~
COMPILE EVALUATE_BUFFER ~bg1re/necromancer/Scripts/c#q11c3.baf~
COMPILE EVALUATE_BUFFER ~bg1re/necromancer/Scripts/c#q11c4.baf~
COMPILE EVALUATE_BUFFER ~bg1re/necromancer/Scripts/C#Q11cow.baf~

COMPILE EVALUATE_BUFFER ~bg1re/necromancer/Scripts/c#q11cut.baf~



COMPILE EVALUATE_BUFFER ~bg1re/necromancer/Dialogues/necromancer.d~




/* creatures */

COPY_EXISTING ~%tutu_var%FARMBR.cre~ ~override~
WRITE_EVALUATED_ASCII 0x280 ~Brun~ #32  // death variable
BUT_ONLY_IF_IT_CHANGES


COPY ~bg1re/necromancer/Creatures/c#q11cow.cre~ ~Override~ 
   SAY NAME1 @137 /* ~Berta~ */
   SAY NAME2 @137 /* ~Berta~ */
WRITE_EVALUATED_ASCII 0x280 ~%SOURCE_RES%~ #32   // Death variable
WRITE_EVALUATED_ASCII 0x2cc ~%SOURCE_RES%~ #8   // dialogue
WRITE_EVALUATED_ASCII 0x248 ~%SOURCE_RES%~ #8   // Override script
WRITE_EVALUATED_ASCII 0x250 ~%tutu_var%SHOUT~ #8   // Class script
ADD_CRE_ITEM ~C#Q11001~ #0 #0 #0 ~identified&unstealable~ ~inv1~


COPY ~bg1re/necromancer/Creatures/c#q11mo2.cre~ ~Override~ 
   SAY NAME1 @138 /* ~Mrs. Sutherland~ */
   SAY NAME2 @138 /* ~Mrs. Sutherland~ */
WRITE_EVALUATED_ASCII 0x248 ~%SOURCE_RES%~ #8   // Override script
WRITE_EVALUATED_ASCII 0x250 ~%tutu_var%SHOUT~ #8   // Class script
WRITE_EVALUATED_ASCII 0x258 ~%tutu_scriptr%UNENEMY~ #8   // Race script

COPY ~bg1re/necromancer/Creatures/c#q11wat.cre~ ~Override~ 
   SAY NAME1 @139 /* ~Trevor~ */
   SAY NAME2 @139 /* ~Trevor~ */
WRITE_EVALUATED_ASCII 0x280 ~%SOURCE_RES%~ #32   // Death variable
WRITE_EVALUATED_ASCII 0x2cc ~%SOURCE_RES%~ #8   // dialogue
WRITE_EVALUATED_ASCII 0x248 ~%SOURCE_RES%~ #8   // Override script
WRITE_EVALUATED_ASCII 0x250 ~%tutu_var%SHOUT~ #8   // Class script
WRITE_EVALUATED_ASCII 0x258 ~%tutu_scripts%EEENEMY~ #8   // Race script
WRITE_EVALUATED_ASCII 0x268 ~%tutu_scriptw%TASIGHT~ #8   // Default script
ADD_CRE_ITEM ~%tutu_var%sw1h04~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON1~ EQUIP
ADD_CRE_ITEM ~%tutu_var%shld01~ #0 #0 #0 ~IDENTIFIED~ ~SHIELD~ 
ADD_CRE_ITEM ~%tutu_var%PLAT01~ #0 #0 #0 ~IDENTIFIED~ ~ARMOR~ 
ADD_CRE_ITEM ~%tutu_var%HELM09~ #0 #0 #0 ~IDENTIFIED~ ~HELMET~ 

COPY ~bg1re/necromancer/Creatures/c#q11cat.cre~ ~Override~ //cat
   SAY NAME1 @140 /* ~Kitty~ */
   SAY NAME2 @140 /* ~Kitty~ */
WRITE_EVALUATED_ASCII 0x248 ~%SOURCE_RES%~ #8   // Override script
WRITE_EVALUATED_ASCII 0x250 ~%tutu_var%SHOUT~ #8   // Class script
WRITE_EVALUATED_ASCII 0x268 ~%tutu_scriptw%DASIGHT~ #8   // Default script
ADD_CRE_ITEM ~C#Q11002~ #0 #0 #0 ~identified&unstealable~ ~inv1~

COPY ~bg1re/necromancer/Creatures/c#q11nec.cre~ ~Override~ 
~bg1re/necromancer/Creatures/c#q11ne2.cre~ ~Override~
   SAY NAME1 @141 /* ~Necromancer~ */
   SAY NAME2 @141 /* ~Necromancer~ */
WRITE_EVALUATED_ASCII 0x248 ~c#q11nec~ #8   // Override script
WRITE_EVALUATED_ASCII 0x250 ~%tutu_var%MAGE2~ #8   // Class script
WRITE_EVALUATED_ASCII 0x268 ~%tutu_scriptw%TASIGHT~ #8   // Default script

COPY ~bg1re/necromancer/Creatures/c#q11gir.cre~ ~Override~ 
   SAY NAME1 @142 /* ~Susan~ */
   SAY NAME2 @142 /* ~Susan~ */
WRITE_EVALUATED_ASCII 0x248 ~%SOURCE_RES%~ #8   // Override script
WRITE_EVALUATED_ASCII 0x250 ~%tutu_var%SHOUT~ #8   // Class script
WRITE_EVALUATED_ASCII 0x258 ~%tutu_scriptr%UNENEMY~ #8   // Race script
ADD_CRE_ITEM ~C#Q11003~ #0 #0 #0 ~identified&unstealable~ ~inv1~

COPY ~bg1re/necromancer/Creatures/c#q11mrs.cre~ ~Override~ 
   SAY NAME1 @143 /* ~Mrs. Thirsty~ */
   SAY NAME2 @143 /* ~Mrs. Thirsty~ */
WRITE_EVALUATED_ASCII 0x248 ~%SOURCE_RES%~ #8   // Override script
WRITE_EVALUATED_ASCII 0x250 ~%tutu_var%SHOUT~ #8   // Class script
WRITE_EVALUATED_ASCII 0x258 ~%tutu_var%SEEENEMY~ #8   // Race script

COPY ~bg1re/necromancer/Creatures/c#q11but.cre~ ~Override~ 
   SAY NAME1 @144 /* ~Butcher~ */
   SAY NAME2 @144 /* ~Butcher~ */

COPY ~bg1re/necromancer/Creatures/c#q11mom.cre~ ~Override~ 
   SAY NAME1 @145 /* ~Mourning Mother~ */
   SAY NAME2 @145 /* ~Mourning Mother~ */
WRITE_EVALUATED_ASCII 0x248 ~%SOURCE_RES%~ #8   // Override script
WRITE_EVALUATED_ASCII 0x250 ~%tutu_var%SHOUT~ #8   // Class script
WRITE_EVALUATED_ASCII 0x258 ~%tutu_scriptr%UNENEMY~ #8   // Race script

COPY ~bg1re/necromancer/Creatures/c#q11be1.cre~ ~Override~ 
   SAY NAME1 @146 /* ~Beth~ */
   SAY NAME2 @146 /* ~Beth~ */
WRITE_EVALUATED_ASCII 0x280 ~%SOURCE_RES%~ #32   // Death variable
WRITE_EVALUATED_ASCII 0x2cc ~%SOURCE_RES%~ #8   // dialogue
WRITE_EVALUATED_ASCII 0x248 ~%SOURCE_RES%~ #8   // Override script




/* Dinner with Thalantyr */
BEGIN @147 /* ~Dinner with Thalantyr, by jastey~ */ DESIGNATED 31 
LABEL bg1re_dinner_with_thalantyr
REQUIRE_FILE ~override/RE1_Installed.G3~ @14 /*~The Component "Amount of -ahem - details and BG-style vs. description text" is not installed.~ */


ADD_JOURNAL TITLE (@230) @39 @57 @81 @93 USING ~bg1re/tra/autotra/%LANGUAGE%/c#_thalantyr.tra~

ADD_JOURNAL TITLE (@417) @270 @275 @282 @283 @292 @293 @307 @324 @328 @380 USING ~bg1re/tra/autotra/%LANGUAGE%/c#_thalantyr.tra~

ADD_JOURNAL TITLE (@418) @235 @255 USING ~bg1re/tra/autotra/%LANGUAGE%/c#_thalantyr.tra~

/* BGT: remove journal entries upon transition to BGII */
ACTION_IF GAME_IS ~bgt~ THEN BEGIN
  EXTEND_TOP ~AR0602.bcs~ ~bg1re/thalantyr/c#_thalantyr_AR0602.baf~ EVALUATE_BUFFER
	USING ~bg1re/tra/autotra/%LANGUAGE%/c#_thalantyr.tra~
END

COPY_EXISTING ~%tutu_var%THALAN.CRE~ ~override/C#LCTHAL.CRE~
WRITE_EVALUATED_ASCII 0x280 ~C#LCTHAL~ #32 // script name / DV
WRITE_EVALUATED_ASCII 0x2cc ~C#LCTHAL~ #8


/* areas */
ACTION_IF NOT FILE_EXISTS_IN_GAME ~c#thal.are~ THEN BEGIN
  COPY ~bg1re/areas/c#thal/areafiles~ ~Override~
  ACTION_IF GAME_IS ~bg1 totsc tutu tutu_totsc bgt~ THEN BEGIN
    COPY ~bg1re/areas/c#thal/tis_bg2~ ~Override~
  END
  ACTION_IF GAME_IS ~bgee eet~ THEN BEGIN
    COPY ~bg1re/areas/c#thal/tis_ee~ ~Override~
  END
  ACTION_IF GAME_IS ~bg1 totsc tutu tutu_totsc bgee eet~ THEN BEGIN
    COMPILE EVALUATE_BUFFER ~bg1re/thalantyr/c#_thalantyr.d~
  END
END


/* BGT game: Thalantyr has extra dialogue state! */
ACTION_IF GAME_IS ~bgt~ THEN BEGIN

   COMPILE EVALUATE_BUFFER ~bg1re/thalantyr/c#_thalantyr.d~
	~bg1re/thalantyr/c#thalantyr_BGTonly.d~
	USING ~bg1re/tra/autotra/%LANGUAGE%/c#_thalantyr.tra~
END

COMPILE EVALUATE_BUFFER ~bg1re/thalantyr/c#lctha1.baf~
COMPILE EVALUATE_BUFFER ~bg1re/thalantyr/c#lctha2.baf~

COPY_EXISTING ~%tutu_var%misc1F.itm~ ~override/C#LCTHBO.itm~
     SAY NAME1 @148 /* ~Thee Oldde Magyck: Volume II~ */
     SAY NAME2 @148 /* ~Thee Oldde Magyck: Volume II~ */
     SAY IDENTIFIED_DESC @149 /* ~This is a very old looking magic book. It is written in a language long forgotten, and seems to explain magic runes and signs unknown to you. It might be of great interest to someone studying magic on a very high level.~ */

/* put the book into Ragefast's book shelf */

COPY_EXISTING ~%WBaldursGate_RagefastsHouse%.are~ ~override~
  LAUNCH_PATCH_FUNCTION  ~fj_are_structure~
    INT_VAR
    fj_con_itm_idx    = SHORT_AT 0x74 - 1 
    fj_flags          = 1 // identified
    STR_VAR
    fj_name           = C#LCTHBO
    fj_structure_type = itm
  END
BUT_ONLY

ACTION_IF GAME_IS ~tutu tutu_totsc bg1 totsc bgt~ BEGIN
  COPY ~bg1re/thalantyr/Bams~ ~Override~
END

/* not all bams are copied for BGEE */
ACTION_IF GAME_IS ~bgee eet~ BEGIN
  COPY ~bg1re/thalantyr/Bams/c#lcthbi.bam~ ~Override/c#lcthbi.bam~
  COPY ~bg1re/thalantyr/Bams/c#lcthi2.BAM~ ~Override/c#lcthi2.BAM~
  COPY ~bg1re/thalantyr/Bams/c#lcthki.BAM~ ~Override/c#lcthki.BAM~
END


COPY ~bg1re/thalantyr/c#lcthit.itm~ ~override/c#lcthit.itm~
WRITE_EVALUATED_ASCII 0x58 ~CHELM18~ #8
SAY NAME1 @150 /* ~Ioun stone~ */
SAY NAME2 @150 /* ~Ioun stone~ */
SAY UNIDENTIFIED_DESC @151 /* ~This is a magical ioun stone.~ */
SAY IDENTIFIED_DESC @170 /* ~This is the ioun stone Thalantyr gave you in the one private moment you shared. It raises the intelligence of the wearer by 2.

STATISTICS:
 

Special: Intelligence increased by 2

Weight: 2~ */

ACTION_IF GAME_IS ~bgee eet~ THEN BEGIN 
COPY_EXISTING ~c#lcthit.itm~ ~override/c#lcthit.itm~
WRITE_EVALUATED_ASCII 0x58 ~CHELM18~ #8
WRITE_EVALUATED_ASCII 0x3a ~IHELM20~ #8
END


/* Easter-Egg Extention: A Game of Chess with Thalantyr */

LAF extend_area_script STR_VAR area="%WBaldursGate_RagefastsHouse%" bottom="bg1re/thalantyr/thalan_ar0126.baf" END

LAF extend_area_script STR_VAR area="%NashkelCarnival%" bottom="bg1re/thalantyr/thalan_ar4900.baf" END

COMPILE EVALUATE_BUFFER ~bg1re/thalantyr/c#lctha3.baf~
COMPILE EVALUATE_BUFFER ~bg1re/thalantyr/c#lctha4.baf~



COPY ~bg1re/thalantyr/c#lcthke.itm~ ~override/c#lcthke.itm~
SAY NAME1 @178 /* ~White Knights-Errand~ */
SAY NAME2 @178
SAY UNIDENTIFIED_DESC @179
SAY IDENTIFIED_DESC @180

COPY ~bg1re/thalantyr/c#lcthbs.itm~ ~override/c#lcthbs.itm~
SAY NAME1 @181 /* ~Old Chess Piece~ */
SAY NAME2 @181
SAY UNIDENTIFIED_DESC @182
SAY IDENTIFIED_DESC @183

ACTION_IF GAME_IS ~bg1 totsc~ THEN BEGIN 

COPY ~bg1re/thalantyr/c#lcthb2_bg.itm~ ~override/c#lcthb2.itm~
SAY NAME1 @184 /* ~Magic Chess Piece~ */
SAY NAME2 @184
SAY UNIDENTIFIED_DESC @185
SAY IDENTIFIED_DESC @186

END

ACTION_IF GAME_IS ~bgt tutu tutu_totsc bgee eet~ THEN BEGIN 

COPY ~bg1re/thalantyr/c#lcthb2.itm~ ~override/c#lcthb2.itm~
SAY NAME1 @184 /* ~Magic Chess Piece~ */
SAY NAME2 @184
SAY UNIDENTIFIED_DESC @185
SAY IDENTIFIED_DESC @187

END

COPY ~bg1re/thalantyr/c#lcthiv.itm~ ~override/c#lcthiv.itm~
SAY NAME1 @188 /* ~Piece of Ivory~ */
SAY NAME2 @188
SAY UNIDENTIFIED_DESC @189
SAY IDENTIFIED_DESC @190

/* place the piece of ivory in the shp wreck */

COPY_EXISTING ~%ShipwrecksCoast%.are~ ~override~
  LAUNCH_PATCH_FUNCTION  ~fj_are_structure~
    INT_VAR
    fj_con_itm_idx    = SHORT_AT 0x74 - 1 
    fj_flags          = 1 // identified
    STR_VAR
    fj_name           = C#LCTHIV
    fj_structure_type = itm
  END
BUT_ONLY

COPY ~bg1re/thalantyr/c#lcth01.cre~ ~Override~ 
   SAY NAME1 @191 /* ~Master Mehmel~ */
   SAY NAME2 @191



/* Girdle of Gender Reactions, by Thimblerig, Kulyok, Domi, Lava, Lastknightleft, Twani, Jastey, and Daisy Ninja Girl */
/* Coded by Thimblerig, Jastey, Kulyok, Lava, and Berelinde */


BEGIN @152 /* ~Girdle of Gender Reactions, by Thimblerig, Kulyok, Domi, Lava, Lastknightleft, Twani, Jastey, Daisy Ninja Girl~ */ DESIGNATED 32 
LABEL bg1re_gender_girdle_reactions
REQUIRE_FILE ~override/RE1_Installed.G3~ @14 /*~The Component "Amount of -ahem - details and BG-style vs. description text" is not installed.~ */

/* Curse Removing Soap */

/* This is the fake dlg for Neera's dialogue in the classic games */
ACTION_IF GAME_IS ~bgt tutu tutu_totsc bg1 totsc~ THEN BEGIN
COMPILE EVALUATE_BUFFER ~bg1re/lib/c#_bgeefake.d~
END


COMPILE EVALUATE_BUFFER ~bg1re/girdlegender/dialogue/soapstuff.d~

COPY ~bg1re/girdlegender/item/T1SOAP.ITM~ ~override/T1SOAP.ITM~
SAY NAME1 @153 /* ~Mistress Mirrorshade's Best Curse-Removing Soap~ */
SAY NAME2 @153 /* ~Mistress Mirrorshade's Best Curse-Removing Soap~ */
SAY DESC @154 /* ~Mistress Mirrorshade's Best Curse-Removing Soap

This bottle of liquid soap was concocted to an old gnomish recipe handed down by Gellana Mirrorshade's mother, the cleric Gollumi Myrnickle. The pungent purple lotion, mixed from herbs, holy water, blessed ashes, and the tallow of high-minded sheep, will cleanse the user of some minor curses and spiritual afflictions.

CAUTION: May put hairs on your chest, or remove them.

Abilities:

Remove Curse x 10~ */


/* Grand girdle dialogue file */

COMPILE EVALUATE_BUFFER ~bg1re/girdlegender/dialogue/girdlegenderreactions.d~

/* NPC override script compilation */
  EXTEND_TOP ~%ALORA_BCS%.bcs~   ~bg1re/girdlegender/baf/NPCreactions/re1ggal.baf~
      EVALUATE_BUFFER
 // No Ajantis
  EXTEND_TOP ~%BRANWEN_BCS%.bcs~  ~bg1re/girdlegender/baf/NPCreactions/re1ggbr.baf~
      EVALUATE_BUFFER
  EXTEND_TOP ~%CORAN_BCS%.bcs~   ~bg1re/girdlegender/baf/NPCreactions/re1ggco.baf~
      EVALUATE_BUFFER
  EXTEND_TOP ~%DYNAHEIR_BCS%.bcs~ ~bg1re/girdlegender/baf/NPCreactions/re1ggdy.baf~
      EVALUATE_BUFFER
  // No Edwin
  EXTEND_TOP ~%ELDOTH_BCS%.bcs~  ~bg1re/girdlegender/baf/NPCreactions/re1ggel.baf~
      EVALUATE_BUFFER
  EXTEND_TOP ~%FALDORN_BCS%.bcs~   ~bg1re/girdlegender/baf/NPCreactions/re1ggfa.baf~
      EVALUATE_BUFFER
  EXTEND_TOP ~%GARRICK_BCS%.bcs~   ~bg1re/girdlegender/baf/NPCreactions/re1ggga.baf~
      EVALUATE_BUFFER
  EXTEND_TOP ~%IMOEN_BCS%.bcs~  ~bg1re/girdlegender/baf/NPCreactions/re1ggim1.baf~
      EVALUATE_BUFFER
  EXTEND_TOP ~%JAHEIRA_BCS%.bcs~ ~bg1re/girdlegender/baf/NPCreactions/re1ggja.baf~
      EVALUATE_BUFFER
  EXTEND_TOP ~%KAGAIN_BCS%.bcs~  ~bg1re/girdlegender/baf/NPCreactions/re1ggka.baf~
      EVALUATE_BUFFER
  EXTEND_TOP ~%KHALID_BCS%.bcs~  ~bg1re/girdlegender/baf/NPCreactions/re1ggkh.baf~
      EVALUATE_BUFFER
  EXTEND_TOP ~%KIVAN_BCS%.bcs~   ~bg1re/girdlegender/baf/NPCreactions/re1ggki.baf~
      EVALUATE_BUFFER
  EXTEND_TOP ~%MINSC_BCS%.bcs~   ~bg1re/girdlegender/baf/NPCreactions/re1ggmi.baf~
      EVALUATE_BUFFER
  EXTEND_TOP ~%MONTARON_BCS%.bcs~ ~bg1re/girdlegender/baf/NPCreactions/re1ggmo.baf~
      EVALUATE_BUFFER
  EXTEND_TOP ~%QUAYLE_BCS%.bcs~  ~bg1re/girdlegender/baf/NPCreactions/re1ggqu.baf~
      EVALUATE_BUFFER
  EXTEND_TOP ~%SAFANA_BCS%.bcs~  ~bg1re/girdlegender/baf/NPCreactions/re1ggsa.baf~
      EVALUATE_BUFFER
  // No Shar-Teel
  EXTEND_TOP ~%SKIE_BCS%.bcs~    ~bg1re/girdlegender/baf/NPCreactions/re1ggsk.baf~
      EVALUATE_BUFFER
  EXTEND_TOP ~%TIAX_BCS%.bcs~    ~bg1re/girdlegender/baf/NPCreactions/re1ggti.baf~
      EVALUATE_BUFFER
  EXTEND_TOP ~%VICONIA_BCS%.bcs~ ~bg1re/girdlegender/baf/NPCreactions/re1ggvi.baf~
      EVALUATE_BUFFER
  EXTEND_TOP ~%XAN_BCS%.bcs~     ~bg1re/girdlegender/baf/NPCreactions/re1ggxa.baf~
      EVALUATE_BUFFER
  EXTEND_TOP ~%XZAR_BCS%.bcs~    ~bg1re/girdlegender/baf/NPCreactions/re1ggxz.baf~
      EVALUATE_BUFFER
  EXTEND_TOP ~%YESLICK_BCS%.bcs~ ~bg1re/girdlegender/baf/NPCreactions/re1ggye.baf~
      EVALUATE_BUFFER
	  
/* Imoen's mini cut-scene */
COMPILE EVALUATE_BUFFER ~bg1re/girdlegender/baf/NPCreactions/re1ggim2.baf~

/* Minsc's slumber party. */

ACTION_IF GAME_IS ~bgt tutu tutu_totsc bgee eet~ THEN BEGIN

EXTEND_TOP ~%tutu_var%MINSCD%eet_var%.BCS~ ~bg1re/girdlegender/baf/NPCreactions/Minscd_add.baf~
      EVALUATE_BUFFER
EXTEND_TOP ~%MINSC_BCS%.BCS~ ~bg1re/girdlegender/baf/NPCreactions/minscbcs_add.baf~
      EVALUATE_BUFFER

END ELSE BEGIN // BG

EXTEND_TOP ~%MINSC_BCS%.BCS~ ~bg1re/girdlegender/baf/NPCreactions/minscbcs_addbg.baf~
      EVALUATE_BUFFER

COMPILE EVALUATE_BUFFER ~bg1re/girdlegender/baf/NPCreactions/re1gbmic.baf~


/* tavern-script blocks */

EXTEND_BOTTOM ~AR1001.BCS~ ~bg1re/girdlegender/baf/NPCreactions/Minscd_bg1_tavern.baf~
EXTEND_BOTTOM ~AR0116.BCS~ ~bg1re/girdlegender/baf/NPCreactions/Minscd_bg1_tavern.baf~
EXTEND_BOTTOM ~AR0119.BCS~ ~bg1re/girdlegender/baf/NPCreactions/Minscd_bg1_tavern.baf~
EXTEND_BOTTOM ~AR0103.BCS~ ~bg1re/girdlegender/baf/NPCreactions/Minscd_bg1_tavern.baf~
EXTEND_BOTTOM ~AR0114.BCS~ ~bg1re/girdlegender/baf/NPCreactions/Minscd_bg1_tavern.baf~
EXTEND_BOTTOM ~AR0705.BCS~ ~bg1re/girdlegender/baf/NPCreactions/Minscd_bg1_tavern.baf~
EXTEND_BOTTOM ~AR0105.BCS~ ~bg1re/girdlegender/baf/NPCreactions/Minscd_bg1_tavern.baf~
EXTEND_BOTTOM ~AR0133.BCS~ ~bg1re/girdlegender/baf/NPCreactions/Minscd_bg1_tavern.baf~
EXTEND_BOTTOM ~AR2301.BCS~ ~bg1re/girdlegender/baf/NPCreactions/Minscd_bg1_tavern.baf~
EXTEND_BOTTOM ~AR3304.BCS~ ~bg1re/girdlegender/baf/NPCreactions/Minscd_bg1_tavern.baf~
EXTEND_BOTTOM ~AR3307.BCS~ ~bg1re/girdlegender/baf/NPCreactions/Minscd_bg1_tavern.baf~
EXTEND_BOTTOM ~AR3351.BCS~ ~bg1re/girdlegender/baf/NPCreactions/Minscd_bg1_tavern.baf~
EXTEND_BOTTOM ~AR3357.BCS~ ~bg1re/girdlegender/baf/NPCreactions/Minscd_bg1_tavern.baf~

END



/* Reactions to PC */

COMPILE EVALUATE_BUFFER ~bg1re/girdlegender/dialogue/girdlegenderreactionsPC.d~

// Lack of HasItemEquiped trigger requires alternate coding for vanilla BG1

/* Tutu, Trilogy, EE etc */

ACTION_IF GAME_IS ~bgt tutu tutu_totsc bgee eet~ THEN BEGIN

/* NPC override script compilation (non-vanilla game) */
  EXTEND_TOP ~%BRANWEN_BCS%.bcs~  ~bg1re/girdlegender/baf/PCreactions/re1ggbrb.baf~
      EVALUATE_BUFFER
  EXTEND_TOP ~%CORAN_BCS%.bcs~   ~bg1re/girdlegender/baf/PCreactions/re1ggcob.baf~
      EVALUATE_BUFFER
  EXTEND_TOP ~%DYNAHEIR_BCS%.bcs~ ~bg1re/girdlegender/baf/PCreactions/re1ggdyb.baf~
      EVALUATE_BUFFER
  EXTEND_TOP ~%FALDORN_BCS%.bcs~   ~bg1re/girdlegender/baf/PCreactions/re1ggfab.baf~
      EVALUATE_BUFFER
  EXTEND_TOP ~%GARRICK_BCS%.bcs~   ~bg1re/girdlegender/baf/PCreactions/re1gggab.baf~
      EVALUATE_BUFFER
  EXTEND_TOP ~%IMOEN_BCS%.bcs~  ~bg1re/girdlegender/baf/PCreactions/re1ggimb.baf~
      EVALUATE_BUFFER
  EXTEND_TOP ~%JAHEIRA_BCS%.bcs~ ~bg1re/girdlegender/baf/PCreactions/re1ggjab.baf~
      EVALUATE_BUFFER
  EXTEND_TOP ~%KAGAIN_BCS%.bcs~  ~bg1re/girdlegender/baf/PCreactions/re1ggkab.baf~
      EVALUATE_BUFFER
  EXTEND_TOP ~%KHALID_BCS%.bcs~  ~bg1re/girdlegender/baf/PCreactions/re1ggkhb.baf~
      EVALUATE_BUFFER
  EXTEND_TOP ~%KIVAN_BCS%.bcs~   ~bg1re/girdlegender/baf/PCreactions/re1ggkib.baf~
      EVALUATE_BUFFER
  EXTEND_TOP ~%SAFANA_BCS%.bcs~  ~bg1re/girdlegender/baf/PCreactions/re1ggsab.baf~
      EVALUATE_BUFFER
  EXTEND_TOP ~%SHARTEEL_BCS%.bcs~  ~bg1re/girdlegender/baf/PCreactions/re1ggshb.baf~
      EVALUATE_BUFFER
  EXTEND_TOP ~%SKIE_BCS%.bcs~    ~bg1re/girdlegender/baf/PCreactions/re1ggskb.baf~
      EVALUATE_BUFFER
  EXTEND_TOP ~%XAN_BCS%.bcs~     ~bg1re/girdlegender/baf/PCreactions/re1ggxab.baf~
      EVALUATE_BUFFER
  
END  

ACTION_IF GAME_IS ~bg1 totsc~ THEN BEGIN  // vanilla game only

/* NPC override script compilation (vanilla game) */
  EXTEND_TOP ~%BRANWEN_BCS%.bcs~  ~bg1re/girdlegender/baf/PCreactionsVanilla/re1ggbrc.baf~
      EVALUATE_BUFFER
  EXTEND_TOP ~%CORAN_BCS%.bcs~   ~bg1re/girdlegender/baf/PCreactionsVanilla/re1ggcoc.baf~
      EVALUATE_BUFFER
  EXTEND_TOP ~%DYNAHEIR_BCS%.bcs~ ~bg1re/girdlegender/baf/PCreactionsVanilla/re1ggdyc.baf~
      EVALUATE_BUFFER
  EXTEND_TOP ~%FALDORN_BCS%.bcs~   ~bg1re/girdlegender/baf/PCreactionsVanilla/re1ggfac.baf~
      EVALUATE_BUFFER
  EXTEND_TOP ~%GARRICK_BCS%.bcs~   ~bg1re/girdlegender/baf/PCreactionsVanilla/re1gggac.baf~
      EVALUATE_BUFFER
  EXTEND_TOP ~%IMOEN_BCS%.bcs~  ~bg1re/girdlegender/baf/PCreactionsVanilla/re1ggimc.baf~
      EVALUATE_BUFFER
  EXTEND_TOP ~%JAHEIRA_BCS%.bcs~ ~bg1re/girdlegender/baf/PCreactionsVanilla/re1ggjac.baf~
      EVALUATE_BUFFER
  EXTEND_TOP ~%KAGAIN_BCS%.bcs~  ~bg1re/girdlegender/baf/PCreactionsVanilla/re1ggkac.baf~
      EVALUATE_BUFFER
  EXTEND_TOP ~%KHALID_BCS%.bcs~  ~bg1re/girdlegender/baf/PCreactionsVanilla/re1ggkhc.baf~
      EVALUATE_BUFFER
  EXTEND_TOP ~%KIVAN_BCS%.bcs~   ~bg1re/girdlegender/baf/PCreactionsVanilla/re1ggkic.baf~
      EVALUATE_BUFFER
  EXTEND_TOP ~%SAFANA_BCS%.bcs~  ~bg1re/girdlegender/baf/PCreactionsVanilla/re1ggsac.baf~
      EVALUATE_BUFFER
  EXTEND_TOP ~%SHARTEEL_BCS%.bcs~  ~bg1re/girdlegender/baf/PCreactionsVanilla/re1ggshc.baf~
      EVALUATE_BUFFER
  EXTEND_TOP ~%SKIE_BCS%.bcs~    ~bg1re/girdlegender/baf/PCreactionsVanilla/re1ggskc.baf~
      EVALUATE_BUFFER
  EXTEND_TOP ~%XAN_BCS%.bcs~     ~bg1re/girdlegender/baf/PCreactionsVanilla/re1ggxac.baf~
      EVALUATE_BUFFER
  
/* Script to record the PCs original gender */
  EXTEND_BOTTOM ~AR2600.BCS~ ~bg1re/girdlegender/baf/PCreactionsVanilla/candpro.baf~

END

ACTION_IF GAME_IS ~bgee eet~ THEN BEGIN //bgee-npcs

COMPILE EVALUATE_BUFFER ~bg1re/girdlegender/dialogue/girdlegenderreactionsEEPC.d~
COMPILE EVALUATE_BUFFER ~bg1re/girdlegender/dialogue/girdlegenderreactionsEE.d~


  EXTEND_TOP ~BAELOTH.bcs~   ~bg1re/girdlegender/baf/EE/re1ggba.baf~
      EVALUATE_BUFFER

  EXTEND_TOP ~DORN.bcs~   ~bg1re/girdlegender/baf/EE/re1ggdo.baf~
      EVALUATE_BUFFER

  EXTEND_TOP ~NEERA.bcs~   ~bg1re/girdlegender/baf/EE/re1ggne.baf~
      EVALUATE_BUFFER

  EXTEND_TOP ~RASAAD.bcs~   ~bg1re/girdlegender/baf/EE/re1ggra.baf~
      EVALUATE_BUFFER
END



BEGIN @155 /* ~The Surgeon's Dream, by Kulyok~ */ DESIGNATED 33 
LABEL bg1re_surgeons_dream

REQUIRE_FILE ~override/RE1_Installed.G3~ @14 /*~The Component "Amount of -ahem - details and BG-style vs. description text" is not installed.~ */

COMPILE EVALUATE_BUFFER ~bg1re/surgeon/re1surgeon.d~







BEGIN @156 /* ~All That Left Was, by Lava and Thimblerig~ */ DESIGNATED 34 
LABEL bg1re_what_left_was

REQUIRE_FILE ~override/RE1_Installed.G3~ @14 /*~The Component "Amount of -ahem - details and BG-style vs. description text" is not installed.~ */



COMPILE EVALUATE_BUFFER ~bg1re/left/left.d~
COMPILE EVALUATE_BUFFER ~bg1re/left/RE1F2Ba.baf~
COMPILE EVALUATE_BUFFER ~bg1re/left/RE1F2Bb.baf~
COMPILE EVALUATE_BUFFER ~bg1re/left/RE1F2Bc.baf~
COMPILE EVALUATE_BUFFER ~bg1re/left/RE1F2Bd.baf~

// Left

COPY ~bg1re/left/RE1LavWB.cre~ ~override/RE1LavWB.cre~
WRITE_ASCII 0x2cc ~RE1LavWB~  #8  // dialogue
WRITE_ASCII 0x280 ~RE1LavWB~ #32  // death variable
WRITE_EVALUATED_ASCII 0x248 ~~ #8   // Override script
WRITE_EVALUATED_ASCII 0x250 ~%tutu_var%SHOUT~ #8   // Class script
WRITE_EVALUATED_ASCII 0x258 ~%tutu_scripts%EEENEMY~ #8   // Race script  
WRITE_EVALUATED_ASCII 0x268 ~%tutu_scriptw%TASIGHT~ #8   // Default script
SAY INITIAL_MEETING @102 /* ~I'll talk to you, if you wish.~ [LATHAN11] */
SAY SELECT_COMMON1 @103 /* ~Good to see you, friend.~ [LATHAN09] */ 
SAY SELECT_RARE1 @103 /* ~Good to see you, friend.~ [LATHAN09] */
SAY DIALOG_HOSTILE @104 /* ~I'm not usually prone to violence, but then I don't usually deal with the likes of you.~ [LATHAN17] */
SAY NAME1 @157 /* ~Left~ */
SAY NAME2 @157 /* ~Left~ */


// Left's Letter

COPY_EXISTING ~%tutu_var%SCRL2J.ITM~ ~override/RE1WBlet.itm~
SAY NAME1 @158 /* ~Letter~ */
SAY NAME2 @159 /* ~The Letter Left Behind~ */
SAY DESC @160 /* ~I had to leave. I'm sorry. But I'll be back.~ */


// Left by Submerged House, South of Beregost

ACTION_IF GAME_IS ~bgt eet~ THEN BEGIN
EXTEND_TOP ~%SouthBeregostRoad%.bcs~ ~bg1re/left/RE1SpawnLeft.baf~ 
      EVALUATE_BUFFER 
END ELSE BEGIN //Tutu, BG:EE and BG
EXTEND_TOP ~%tutu_var%AR3800.bcs~ ~bg1re/left/RE1SpawnLeft.baf~ 
      EVALUATE_BUFFER 
END 



/* A Childhood Friend, by Kulyok (teen content) */
BEGIN @161 /* ~A Childhood Friend, by Kulyok~ */ DESIGNATED 35 
LABEL bg1re_childhood_friend
REQUIRE_FILE ~override/RE1_Installed.G3~ @14 /*~The Component "Amount of -ahem - details and BG-style vs. description text" is not installed.~ */


COMPILE EVALUATE_BUFFER ~bg1re/alec/RE1Alec.d~

ACTION_IF GAME_IS ~bgt eet~ THEN BEGIN
EXTEND_TOP ~%Candlekeep%.bcs~ ~bg1re/alec/AR2600.baf~ EVALUATE_BUFFER 
EXTEND_BOTTOM ~%Candlekeep%.bcs~ ~bg1re/alec/AR2600_eb.baf~ EVALUATE_BUFFER 
EXTEND_TOP ~%Candlekeep_Ch6%.bcs~ ~bg1re/alec/AR2626.baf~ EVALUATE_BUFFER 
EXTEND_TOP ~%Candlekeep_Ch6_Inn_L1%.bcs~ ~bg1re/alec/AR2629.baf~ EVALUATE_BUFFER 
END ELSE BEGIN //Tutu, BG:EE and BG
EXTEND_TOP ~%tutu_var%ar2600.bcs~ ~bg1re/alec/AR2600.baf~ EVALUATE_BUFFER
EXTEND_BOTTOM ~%Candlekeep%.bcs~ ~bg1re/alec/AR2600_eb.baf~ EVALUATE_BUFFER  
EXTEND_TOP ~%tutu_var%ar2626.bcs~ ~bg1re/alec/AR2626.baf~ EVALUATE_BUFFER 
EXTEND_TOP ~%tutu_var%ar2629.bcs~ ~bg1re/alec/AR2629.baf~ EVALUATE_BUFFER 
END 

COPY_EXISTING ~bg1re/Alec/RE1Alec.cre~ ~override/RE1Alec.cre~
WRITE_ASCII 0x248 ~RE1Alec~  #8	 // override
WRITE_ASCII 0x2cc ~RE1Alec~  #8  // dialogue
WRITE_ASCII 0x280 ~RE1Alec~  #32 // death variable
WRITE_ASCII 0x250 ~~ 	     #8  // class script
WRITE_ASCII 0x258 ~~ 	     #8  // race script
WRITE_ASCII 0x260 ~~ 	     #8  // general script
//WRITE_ASCII 0x268 ~~	     #8  // default script
WRITE_ASCII 0x34 ~~ 	     #8  // small portrait
WRITE_ASCII 0x3c ~~ 	     #8  // large portrait
WRITE_BYTE 0x2c 27 // Metal color
WRITE_BYTE 0x2d 34 // Minor color
WRITE_BYTE 0x2e 50 // Major color
WRITE_BYTE 0x2f 12 // Skin color
WRITE_BYTE 0x30 16 // Leather color
WRITE_BYTE 0x31 30 // Armor color
WRITE_BYTE 0x32 49 // Hair color
SAY INITIAL_MEETING ~~
SAY SELECT_COMMON1 ~~ 
SAY SELECT_RARE1 ~~
SAY DIALOG_HOSTILE ~~
SAY NAME1 @162 /* ~Alec~ */
SAY NAME2 @162 /* ~Alec~ */



/* Arlene the Working Girl, by Kulyok (teen content) */

BEGIN @163 /* ~Arlene the Working Girl, by Kulyok~ */ DESIGNATED 36 
LABEL bg1re_arlene_working_girl
REQUIRE_FILE ~override/RE1_Installed.G3~ @14 /*~The Component "Amount of -ahem - details and BG-style vs. description text" is not installed.~ */



COMPILE EVALUATE_BUFFER ~bg1re/arlene/RE1Arlene.d~

ACTION_IF GAME_IS ~bgt eet~ THEN BEGIN
EXTEND_TOP ~%Beregost_JovialJuggler_L1%.bcs~ ~bg1re/arlene/AR3304.baf~ EVALUATE_BUFFER 
END ELSE BEGIN //Tutu, BG:EE and BG
EXTEND_TOP ~%tutu_var%ar3304.bcs~ ~bg1re/arlene/AR3304.baf~ EVALUATE_BUFFER
END

COPY_EXISTING ~%tutu_var%prost2.cre~ ~override/RE1Arlen.cre~
WRITE_ASCII 0x248 ~RE1Arlen~ #8	 // override
WRITE_ASCII 0x2cc ~RE1Arlen~ #8  // dialogue
WRITE_ASCII 0x280 ~RE1Arlen~ #32 // death variable
WRITE_ASCII 0x250 ~~ 	     #8  // class script
WRITE_ASCII 0x258 ~~ 	     #8  // race script
WRITE_ASCII 0x260 ~~ 	     #8  // general script
WRITE_ASCII 0x268 ~~	     #8  // default script
WRITE_BYTE 0x2c 27 // Metal color
WRITE_BYTE 0x2d 46 // Minor color
WRITE_BYTE 0x2e 47 // Major color
WRITE_BYTE 0x2f 12 // Skin color
WRITE_BYTE 0x30 16 // Leather color
WRITE_BYTE 0x31 30 // Armor color
WRITE_BYTE 0x32 49 // Hair color
SAY NAME1 @164 /* ~Arlene~ */
SAY NAME2 @164 /* ~Arlene~ */

/* Della May from Thay, by Kulyok (teen content) */

BEGIN @165 /* ~Della May from Thay, by Kulyok~ */ DESIGNATED 37 
LABEL bg1re_della_may_from_thay
REQUIRE_FILE ~override/RE1_Installed.G3~ @14 /*~The Component "Amount of -ahem - details and BG-style vs. description text" is not installed.~ */


COMPILE EVALUATE_BUFFER ~bg1re/dellamay/RE1DellaMay.d~

ACTION_IF GAME_IS ~bgt eet~ THEN BEGIN
EXTEND_TOP ~%SpiderWood%.bcs~ ~bg1re/dellamay/AR3000.baf~ EVALUATE_BUFFER 
END ELSE BEGIN //Tutu, BG:EE and BG
EXTEND_TOP ~%tutu_var%ar3000.bcs~ ~bg1re/dellamay/AR3000.baf~ EVALUATE_BUFFER 
END

COPY_EXISTING ~bg1re/dellamay/RE1Della.cre~ ~override/RE1Della.cre~
WRITE_ASCII 0x248 ~RE1Della~ #8	 // override
WRITE_ASCII 0x2cc ~RE1Della~ #8  // dialogue
WRITE_ASCII 0x280 ~RE1Della~ #32 // death variable
WRITE_ASCII 0x250 ~~ 	     #8  // class script
WRITE_ASCII 0x258 ~~ 	     #8  // race script
WRITE_ASCII 0x260 ~~ 	     #8  // general script
WRITE_ASCII 0x268 ~~	     #8  // default script
WRITE_ASCII 0x34 ~~ 	     #8  // small portrait
WRITE_ASCII 0x3c ~~ 	     #8  // large portrait
WRITE_BYTE 0x2c 27 // Metal color
WRITE_BYTE 0x2d 46 // Minor color
WRITE_BYTE 0x2e 47 // Major color
WRITE_BYTE 0x2f 12 // Skin color
WRITE_BYTE 0x30 16 // Leather color
WRITE_BYTE 0x31 30 // Armor color
WRITE_BYTE 0x32 38 // Hair color
SAY NAME1 @166 /* ~Della May~ */
SAY NAME2 @166 /* ~Della May~ */




/* A Dirty Guard in Candlekeep, by Kulyok (mature content) */

BEGIN @167 /* ~A Dirty Guard in Candlekeep, by Kulyok (mature content)~ */ DESIGNATED 38 
LABEL bg1re_dirty_guard_candlekeep
REQUIRE_FILE ~bg1re/backup/RE1_WarningMature.G3~ @77 /* ~This component has no teen rated version.~ */

COMPILE EVALUATE_BUFFER ~bg1re/dirtyguard/RE1DirtyGuard.d~

ACTION_IF GAME_IS ~bgt eet~ THEN BEGIN
EXTEND_TOP ~%Candlekeep_Inn_L2%.bcs~ ~bg1re/dirtyguard/AR2617.baf~ EVALUATE_BUFFER 
END ELSE BEGIN //Tutu, BG:EE and BG
EXTEND_TOP ~%tutu_var%ar2617.bcs~ ~bg1re/dirtyguard/AR2617.baf~ EVALUATE_BUFFER 
END

COPY_EXISTING ~%tutu_var%watch.cre~ ~override/RE1DiCop.cre~
WRITE_ASCII 0x248 ~RE1DiCop~ #8	 // override
WRITE_ASCII 0x2cc ~RE1DiCop~ #8  // dialogue
WRITE_ASCII 0x280 ~RE1DiCop~ #32 // death variable
WRITE_EVALUATED_ASCII 0x250 ~INITDLG~  #8  // class script
WRITE_ASCII 0x258 ~~ 	     #8  // race script
WRITE_ASCII 0x260 ~~ 	     #8  // general script
WRITE_ASCII 0x268 ~~	     #8  // default script
SAY NAME1 @168 /* ~Guard~ */
SAY NAME2 @168 /* ~Guard~ */



/* put the pearl into unlocked container */

ACTION_IF GAME_IS ~bg1 totsc bgee bgt eet~ THEN BEGIN
COPY_EXISTING ~%Candlekeep_Inn_L2%.are~ ~override~
  LAUNCH_PATCH_FUNCTION  ~fj_are_structure~
    INT_VAR
    fj_con_itm_idx    = SHORT_AT 0x74 - 4
    fj_flags          = 1 // identified
    STR_VAR
    fj_name           = MISC36
    fj_structure_type = itm
  END
BUT_ONLY
END

ACTION_IF GAME_IS ~tutu tutu_totsc~ THEN BEGIN
COPY_EXISTING ~%Candlekeep_Inn_L2%.are~ ~override~
  LAUNCH_PATCH_FUNCTION  ~fj_are_structure~
    INT_VAR
    fj_con_itm_idx    = SHORT_AT 0x74 - 4 
    fj_flags          = 1 // identified
    STR_VAR
    fj_name           = _MISC36
    fj_structure_type = itm
  END
BUT_ONLY
END








/* Phoenix Flame, by Kulyok (mature content) */

BEGIN @169 /* ~Phoenix Flame, by Kulyok (mature content)~ */ DESIGNATED 39 
LABEL bg1re_phoenix_flame
REQUIRE_FILE ~bg1re/backup/RE1_MatureContent.G3~ @77 /* ~This component has no teen rated version.~ */

COMPILE EVALUATE_BUFFER ~bg1re/phoenix/RE1Phoenix.d~





/* Mikala the Monk, by Twani */

BEGIN @171 /* ~Mikala the Monk, by Twani~ */ DESIGNATED 40 
LABEL bg1re_mikala_the_monk
REQUIRE_FILE ~override/RE1_Installed.G3~ @14 /*~The Component "Amount of -ahem - details and BG-style vs. description text" is not installed.~ */

COMPILE EVALUATE_BUFFER ~bg1re/mikala/re1mikala.d~
COMPILE EVALUATE_BUFFER ~bg1re/mikala/c#lcmika.baf~

ACTION_IF GAME_IS ~bgt tutu tutu_totsc bgee eet~ THEN BEGIN
  LAF extend_area_script STR_VAR area="%Nashkel_BelchingDragonTavern%" top="bg1re/mikala/mikala_ar4809.baf"   END
  LAF extend_area_script STR_VAR area="%Nashkel_BelchingDragonTavern%" top="bg1re/mikala/mikala_ar4809_add.baf"   END
END 

ACTION_IF GAME_IS ~bg1 totsc~ THEN BEGIN // BG
  EXTEND_TOP ~%tutu_var%ar4809.bcs~ ~bg1re/mikala/mikala_ar4809.baf~ EVALUATE_BUFFER 
END

ACTION_IF GAME_IS ~bg1 totsc~ THEN BEGIN

COPY_EXISTING ~%tutu_var%diana.cre~ ~override/M3Mikala.cre~
WRITE_ASCII 0x248 ~M3Mikala~ #8	 // override
WRITE_ASCII 0x2cc ~M3Mikala~ #8  // dialogue
WRITE_ASCII 0x280 ~M3Mikala~ #32 // death variable
WRITE_ASCII 0x250 ~SHOUT~     #8  // class script
WRITE_ASCII 0x258 ~~ 	     #8  // race script
WRITE_ASCII 0x260 ~~ 	     #8  // general script
WRITE_ASCII 0x268 ~~	     #8  // default script
WRITE_ASCII 0x34 ~~ 	     #8  // small portrait
WRITE_ASCII 0x3c ~~ 	     #8  // large portrait
WRITE_BYTE 0x2c 30 // Metal color
WRITE_BYTE 0x2d 58 // Minor color
WRITE_BYTE 0x2e 58 // Major color
WRITE_BYTE 0x2f 12 // Skin color
WRITE_BYTE 0x30 16 // Leather color
WRITE_BYTE 0x31 30 // Armor color
WRITE_BYTE 0x32 0 // Hair color
SAY NAME1 @172 /* ~Mikala~ */
SAY NAME2 @172 /* ~Mikala~ */
SAY INITIAL_MEETING #11161
SAY SELECT_COMMON1 #11161

END ELSE BEGIN

COPY ~bg1re/mikala/mikala_Tutu.cre~ ~Override/M3Mikala.cre~ 
   SAY NAME1 @172 /* ~Mikala~ */ 
   SAY NAME2 @172 /* ~Mikala~ */
WRITE_EVALUATED_ASCII 0x280 ~M3Mikala~ #32   // Death variable
WRITE_EVALUATED_ASCII 0x2cc ~M3Mikala~ #8   // dialogue
WRITE_EVALUATED_ASCII 0x248 ~M3Mikala~ #8   // Override script
WRITE_EVALUATED_ASCII 0x250 ~%tutu_var%SHOUT~ #8   // Class script

END



/* The Messenger 2: Rain or Snow or Gloom of Night */

BEGIN @99178 DESIGNATED 41 
LABEL bg1re_the_messenger_2
REQUIRE_FILE ~override/RE1_Installed.G3~ @14 /*~The Component "Amount of -ahem - details and BG-style vs. description text" is not installed.~ */

/* Compatibility: Skie and the Silvershield Heir */
/* Dialogue */
/* Scripts */
/* Spawn */
/* Creatures */
/* Misc. Items */
/* Letters */


ADD_JOURNAL TITLE (@277) @263 @264 @265 @266 @267 @268 @269 @270 @271 @272 @273 @274 @275 @276 USING ~bg1re/tra/autotra/%LANGUAGE%/messenger2.tra~

/* BGT: remove journal entries upon transition to BGII */
ACTION_IF GAME_IS ~bgt~ THEN BEGIN
  EXTEND_TOP ~AR0602.bcs~ ~bg1re/messenger2/messenger2_AR0602.baf~ EVALUATE_BUFFER
	USING ~bg1re/tra/autotra/%LANGUAGE%/messenger2.tra~
END


// Compatibility: Skie and the Silvershield Heir
 
// Unfinished Business - Kagain's 'finding Silvershield' dialogue is triggered by the creature DLOSTKAG.cre.  Following script converts that into "T1M2DeadEddy".
 
EXTEND_TOP ~%KAGAIN_BCS%.bcs~  ~bg1re/messenger2/baf/T1M2UB.baf~
      EVALUATE_BUFFER
 
// BG1 NPC Project - spawns bandits with the item X#SILSH; Kagain comments when meeting bandits, but isn't necessarily there.  Script attached to Coast Way area spawn converts them into "T1M2DeadEddy".
 
// Skie has an extra dialogue state in Trilogy.

ACTION_IF GAME_IS ~bgt~ THEN BEGIN
    OUTER_SPRINT ~SKIE_START~ ~1 14~
END ELSE BEGIN
	OUTER_SPRINT ~SKIE_START~ ~1~
END

// Dialogue

COMPILE EVALUATE_BUFFER ~bg1re/messenger2/messenger2.d~

/* spell: +1 WIS */

ACTION_IF NOT GAME_IS ~bg1 totsc bgee~ THEN BEGIN
  COPY ~bg1re/messenger2/T1M2HALF.spl~ ~override~
    SAY NAME1 @196 /* ~Wisdom Increase +1~ */
    SAY NAME2 @196
   LPF ALTER_SPELL_EFFECT
   INT_VAR
     match_opcode  = 139   // Display String
     parameter1    = RESOLVE_STR_REF(@197)  // 
   END
END

ACTION_IF GAME_IS ~bg1 totsc bgee~ THEN BEGIN
  COPY ~bg1re/messenger2/T1M2HALF.spl~ ~override~
END

ACTION_IF GAME_IS ~bg1 totsc~ THEN BEGIN
  OUTER_SPRINT ~ReallyForceSpell_T1M2HALF~ ~ReallyForceSpell(Player1,"T1M2HALF")~
  ADD_SPELL ~override/T1M2HALF.spl~ 1 1 T1M2HALF
END

ACTION_IF NOT GAME_IS ~bg1 totsc~ THEN BEGIN
  OUTER_SPRINT ~ReallyForceSpell_T1M2HALF~ ~ReallyForceSpellRES("T1M2HALF",Player1)~
END



// Scripts

COMPILE EVALUATE_BUFFER ~bg1re/messenger2/baf/T1M2HALF.baf~ USING ~bg1re/tra/autotra/%LANGUAGE%/messenger2.tra~
COMPILE EVALUATE_BUFFER ~bg1re/messenger2/baf/T1M2HALC.baf~

EXTEND_TOP ~%tutu_var%SILENC.bcs~     ~bg1re/messenger2/baf/T1M2SILE.baf~
      EVALUATE_BUFFER

EXTEND_TOP ~%SKIE_BCS%.bcs~     ~bg1re/messenger2/baf/T1M2SkieScript.baf~
      EVALUATE_BUFFER

EXTEND_TOP ~%GARRICK_BCS%.bcs~     ~bg1re/messenger2/baf/T1M2GarrickScript.baf~
      EVALUATE_BUFFER

// Spawn

  LAF extend_area_script STR_VAR area="%CoastWay%" top="bg1re/messenger2/baf/T1M2CoastWay.baf" END
 
  LAF extend_area_script STR_VAR area="%EBaldursGate_ElfsongTavern_L1%" top="bg1re/messenger2/baf/T1M2ElfSong.baf" END

ACTION_IF GAME_IS ~bg1 totsc~ THEN BEGIN
  EXTEND_BOTTOM ~dplayer3.bcs~ ~bg1re/messenger2/baf/T1M2Baldur.baf~ EVALUATE_BUFFER
END

ACTION_IF GAME_IS ~bgee bgt tutu tutu_totsc eet~ THEN BEGIN
  EXTEND_BOTTOM ~BALDUR.bcs~ ~bg1re/messenger2/baf/T1M2Baldur.baf~ EVALUATE_BUFFER
END


// Creatures

COPY ~bg1re/messenger2/cre/T1M2HALF.cre~ ~override/T1M2HALF.cre~
WRITE_ASCII 0x2cc ~T1M2HALF~  #8  // dialogue
WRITE_ASCII 0x280 ~T1M2HALF~ #32  // death variable
WRITE_EVALUATED_ASCII 0x248 ~T1M2HALF~ #8   // Override script
SAY INITIAL_MEETING @198 /* ~I wish I had my old tobacco pipe.~ [%tutu_var%HALFL04] */ 
SAY NAME1 @199
SAY NAME2 @199

/* all games but BG1: letters are in the letter case */
ACTION_IF GAME_IS ~bgt bgee eet tutu tutu_totsc~ THEN BEGIN
  COPY_EXISTING ~T1M2HALF.cre~ ~override/T1M2HALF.cre~
  ADD_CRE_ITEM ~%tutu_var%RING19~ #0 #0 #0 ~NONE~ ~INV~ 
  ADD_CRE_ITEM ~T1M2CASE~ #0 #0 #0 ~IDENTIFIED~ ~INV~
  BUT_ONLY

END

ACTION_IF GAME_IS ~bg1 totsc~ THEN BEGIN
  COPY_EXISTING ~T1M2HALF.cre~ ~override/T1M2HALF.cre~
  ADD_CRE_ITEM ~T1M2LET1~ #0 #0 #0 ~NONE~ ~INV~ 
  ADD_CRE_ITEM ~T1M2LET2~ #0 #0 #0 ~NONE~ ~INV~ 
  ADD_CRE_ITEM ~T1M2LET3~ #0 #0 #0 ~NONE~ ~INV~ 
  ADD_CRE_ITEM ~T1M2LET4~ #0 #0 #0 ~NONE~ ~INV~ 
  ADD_CRE_ITEM ~T1M2LET5~ #0 #0 #0 ~NONE~ ~INV~ 
  ADD_CRE_ITEM ~T1M2LET6~ #0 #0 #0 ~NONE~ ~INV~ 
  ADD_CRE_ITEM ~T1M2LET7~ #0 #0 #0 ~NONE~ ~INV~ 
  ADD_CRE_ITEM ~%tutu_var%RING19~ #0 #0 #0 ~NONE~ ~INV~ 
  BUT_ONLY
END

/* Bartleby's Ghost */

COPY ~bg1re/messenger2/cre/T1M2HAL2.cre~ ~override/T1M2HAL2.cre~
WRITE_ASCII 0x2cc ~T1M2HAL2~  #8  // dialogue
WRITE_ASCII 0x280 ~T1M2HAL2~ #32  // death variable
WRITE_EVALUATED_ASCII 0x248 ~T1M2HAL2~ #8   // Override script
SAY INITIAL_MEETING @198 /* ~I wish I had my old tobacco pipe.~ [%tutu_var%HALFL04] */
SAY NAME1 @202 /* ~Bartleby's Ghost~ */
SAY NAME2 @202

/* Give Silence a script name and override script */
COPY_EXISTING ~%tutu_var%SILENC.cre~ ~override/%tutu_var%SILENC.cre~
WRITE_EVALUATED_ASCII 0x248 ~%tutu_var%SILENC~ #8   // Override script
WRITE_EVALUATED_ASCII 0x280 ~Silence~ #32   // script name / DV
BUT_ONLY

/* Create Barkis */
COPY_EXISTING ~%tutu_var%ULCAST.cre~ ~override/T1M2GHOS.cre~
SAY NAME1 @203 /* ~Barkis~ */
SAY NAME2 @203
WRITE_EVALUATED_ASCII 0x248 ~T1M2GHOS~ #8   // Override script
WRITE_ASCII 0x2cc ~T1M2GHOS~  #8  // dialogue
WRITE_ASCII 0x280 ~T1M2GHOS~ #32  // death variable
WRITE_ASCII 0x268 ~RANDWALK~	     #8  // default script
BUT_ONLY





// Items


ACTION_IF GAME_IS ~bgt bgee eet tutu tutu_totsc~ THEN BEGIN

  COPY ~bg1re/messenger2/itm/T1M2CASE.bam~ ~override~

  COPY ~bg1re/messenger2/itm/BAG03.sto~ ~override/T1M2CASE.sto~
  SAY NAME2 @200 /* ~Bartleby's Letter Case~ */
  ADD_STORE_ITEM ~T1M2LET1~ #0 #0 #0 ~IDENTIFIED~ #1
  ADD_STORE_ITEM ~T1M2LET2~ #0 #0 #0 ~IDENTIFIED~ #1
  ADD_STORE_ITEM ~T1M2LET3~ #0 #0 #0 ~IDENTIFIED~ #1
  ADD_STORE_ITEM ~T1M2LET4~ #0 #0 #0 ~IDENTIFIED~ #1
  ADD_STORE_ITEM ~T1M2LET5~ #0 #0 #0 ~IDENTIFIED~ #1
  ADD_STORE_ITEM ~T1M2LET6~ #0 #0 #0 ~IDENTIFIED~ #1
  ADD_STORE_ITEM ~T1M2LET7~ #0 #0 #0 ~IDENTIFIED~ #1
  BUT_ONLY

  COPY ~bg1re/messenger2/itm/BAG03.itm~ ~override/T1M2CASE.itm~
  SAY NAME1 @200
  SAY NAME2 @200
  WRITE_ASCII 0x3a ~T1M2CASE~ 	     #8  // changing up the icons
  SAY UNIDENTIFIED_DESC @201
  SAY IDENTIFIED_DESC @201 /* ~A box of letters taken from the body of the messenger Bartleby Quickfoot.  It is sturdy, lined with oiled silk, and built to keep its fragile contents safe from damp, cold, and the terrifying stygian blackness of midnight.~ */
  BUT_ONLY
END

COPY_EXISTING ~%tutu_var%AMUL13.itm~ ~override/T1M2AMUL.itm~
SAY NAME1 @204
SAY NAME2 @204 /* ~Garrick's Bloodstone Amulet~ */
SAY DESC @205 /* ~Garrick's Bloodstone Amulet

A gift to Garrick from a lady friend.  It is quite distinctly unmagical - however he seems quite fond of it, and often runs it through his fingers while humming a lilting tune.~ */
BUT_ONLY

// Letters

COPY ~bg1re/messenger2/itm/T1M2LETT.itm~ ~override/T1M2LET1.itm~
SAY NAME1 @206 /* ~Letter to Miss Aspen~ */
SAY NAME2 @206
SAY DESC @207 /* ~Miss Maple Willow Aspen
c/- The Blade and Stars Inn
Baldur's Gate
 
Since first I saw you in your bower, straight and tall, your hair lit to flame by the autumn sun, I have adored you as the daisy loves the dawn.
 
Our bosky joys might grow sturdy as an oak and sweet as apples.  I wear the willow without you.  Do not leaf me in barren solitude.
 
Your Devoted Admirer,
 
Woodrow duBois~ */
BUT_ONLY

COPY ~bg1re/messenger2/itm/T1M2LETT.itm~ ~override/T1M2LET2.itm~
SAY NAME1 @208 /* ~Letter From a Fan~ */
SAY NAME2 @208
SAY DESC @209 /* ~From Carnatia Carnifex, called The Butcher, to the bard of the Burning Wizard Inn, in Beregost.  
 
My dear Garrick,
 
May I call you Garrick?  I hope that's not too forward.  I doubt you will remember me, just one adventurer among many as I am, and I could not stay to chat after the unpleasantness with those paladins.  But I wanted you to know how deeply I admired your rendition of "Gathering Pease-Blossoms" and afterwards, the smoothness of your modulation into Gilraen's "Frolique in A Major" as I broke a table over Sir Reynald's head was simply sublime.  Marvellous.  Extraordinary.  
 
Enclosed is a small token of my esteem, a ring looted from the grave of an ancient prince and guaranteed curse-free!  It would please me if you wore my colour on your finger.
 
Come away with me.  Be *my* bard.  I will shower you in jewels and silk and string your harp with the guts of my enemies.  (Your fingers are so nimble and sensitive, and your sense of rhythm so exquisite that I find myself wondering how it would be if - but that is a question for another time.)
 
Simply travel eastwards away from the Sword Coast and I will hear of your coming.  And I will find you.
 
Your humble fan,
 
Carnatia~ */
BUT_ONLY

// Letter From a Dungeoneer

COPY ~bg1re/messenger2/itm/T1M2LETT.itm~ ~override/T1M2LET3.itm~
SAY NAME1 @210 /* ~Letter From a Dungeoneer~ */
SAY NAME2 @210
SAY DESC @211 /* ~To Nesiara Rille, 
of the Friendly Arm Inn

My Darling Nessie

I've got a lead on a good haul.  Forget about Ulcaster School: old books are boring.  I found an old merchant who sold me a family heirloom - it was pricey but I could just feel the magic sizzling off it and couldn't pass it by.  Poor fellow, if he'd only known what he was selling... but that is not my problem.

Now I have the wardstone to Durlag's Tower!  I'll just toddle off south, clean out that heap of stone, profit, and set up shop at the Inn with the proceeds.

What could possibly go wrong?

I dream of holding you in my arms,

Your Pootsie.~ */
BUT_ONLY

COPY ~bg1re/messenger2/itm/T1M2LETT.itm~ ~override/T1M2LET4.itm~
SAY NAME1 @212 /* ~Letter to Firebead~ */
SAY NAME2 @212
SAY DESC @213 /* ~To Firebead, the Elven-Hair, of Beregost City

I am not patient; I am not kind.  
 
I envy and boast; I serve my own ends, always, but for the promptings of my anger and the hoarded tally of wrongs done against me.  Any virtue you see is through a lens distorted.
 
But I
 
But
 
Allow me to elucidate, my dear.  Of the many quirks of my execrable character, there is one that I have never yet managed to regret: that I cannot deny you anything.  In short, for my maunderings are approaching tedium, in short if you are determined to stay this course then this weary old misanthrope is bound to support you in it, to the farthest limits of your satisfaction.  What I mean to say is -
 
(That is, for as long as you want me.) 
 
I am yours.

M~ */
BUT_ONLY

COPY ~bg1re/messenger2/itm/T1M2LETT.itm~ ~override/T1M2LET5.itm~
SAY NAME1 @214 /* ~Letter to Skie Silvershield~ */
SAY NAME2 @214
SAY DESC @215 /* ~From Lord Eddard Silvershield, Marquis of Dumley, to the Right Honourable Skie Silvershield, at her estate in the City of Baldur's Gate,
 
Greetings and Felicitations, my Dearest Sister.
 
I trust that you have been attending well to your books and your dance lessons, and that your first Season ended with appropriate grandeur.  

My own journey goes well.  With the roads so dangerous, trade goods are much sought after and our simple wagons are often feted by the towns we visit - most bemusing.  We travel quite carefully, avoid the main Trade Routes, and have had not a bit of trouble.  The Forest Animals are quite unafraid, often walking straight up to our Cavalcade, and my sketchbook grows very fat.  I enclose this likeness of a Fox, which I saw lounging by the bole of a tree in the small hours.  It had a louche, piratical air, and stared at me for a good five minutes before slouching off.  I have suffered from a cold since leaving the city, alas - sleeping wrapped in a single blanket under the bare and chilly stars is a Romantic Prospect, but trying to the Constitution of one unused to it.  The pot of Myrnickle's Balsam you gave me has been most helpful.  
 
How odd it is that words to you come so easily on Paper, when they whistle away in my throat when I stand before my Little Sister; when I take refuge in the promptings of an Etiquette Book, inquire prettily as to your well-being, and give my due obeisances to our Father.  But this cold morning it is between us and the paper, and so I give you - a Fox, a Terrible Cold, and this - 
 
When our Mother died it was difficult for me.  I missed her very much and, in my distress, fled the Bonds of Family when I should have striven to tie them tighter around us three.  I was a Fool - and I still am a Fool, to my woe.  I ask you not to inquire as to my reasons for leaving Town; you would not like the answer.
 
Regarding this Musical Friend of whom they speak, all I can say is that I hope the fellow treats you with the Respect and Courtesy that you deserve, Skyling, and pray to Sune that you weather the storms ahead.  Love is an Awkward Beast, as our family knows well.
 
My regards to Father and Step-Mama Brilla.  I am to them, as always, a Dutiful Son.

Your Loving Brother,

Eddard~ */
BUT_ONLY

COPY ~bg1re/messenger2/itm/T1M2LETT.itm~ ~override/T1M2LET6.itm~
SAY NAME1 @216 /* ~Letter From a Happy Customer~ */
SAY NAME2 @216
SAY DESC @217 /* ~To: Madame Alyth Elendara
From: Master Stephan Re'Cap
 
My dear lady Alyth,
 
My master, Magus Davaeorn, has once again allowed me the pleasure of writing to you to thank you for the latest shipment of fine sweetmeats and wine from Calimshan and to submit our order for next month. Living apart, as we do, from civilization makes me quite grateful not only for such refined fare as you routinely provide, but the opportunity to correspond with such an accomplished and beauteous lady. I have enjoyed reading the personal messages and receiving the small gifts you include with your shipping invoices. The packet of 'candy kisses', for example, was quite a nice treat (is it too saucy of me to inquire if the real ones are as tasty?). As supplier of my victuals, I insist you replenish my supply immediately.
 
In response to your question (or, should I say, your invitation) in your last private note: I would very much appreciate the opportunity to visit your establishment, and yourself, in person. There is only the matter of Magus Davaeorn's permission. I humbly beg your indulgence as my Master is not the most permissive of employers and is unlikely to allow me to leave here. Perhaps you might send a note requesting personal attention to some matter from one of our staff. Then I might more easily broach the subject with him. The chance of seeing you, one way or another, shall enhance my persuasiveness, I am sure.
 
Ever yours,
 
Stephan~ */
BUT_ONLY

COPY ~bg1re/messenger2/itm/T1M2LETT.itm~ ~override/T1M2LET7.itm~
SAY NAME1 @218 /* ~Letter to Silence~ */
SAY NAME2 @218
SAY DESC @219 /* ~Silence in the Sanctuary


BARKIS IS WILLING~ */
BUT_ONLY


ACTION_IF NOT GAME_IS ~bg1 totsc~ THEN BEGIN
  COPY_EXISTING ~T1M2LET2.itm~ ~override/T1M2LET2.itm~
  WRITE_ASCII 0x3a ~IMISC9L~ 	     #8  // changing up the icons
  WRITE_ASCII 0x58 ~CMISC9L~ 	     #8

  COPY_EXISTING ~T1M2LET3.itm~ ~override/T1M2LET3.itm~
  WRITE_ASCII 0x3a ~IMISC8A~ 	     #8  // changing up the icons
  WRITE_ASCII 0x58 ~CMISC8A~ 	     #8

  COPY_EXISTING ~T1M2LET4.itm~ ~override/T1M2LET4.itm~
  WRITE_ASCII 0x3a ~IMISC8P~ 	     #8  // changing up the icons
  WRITE_ASCII 0x58 ~CMISC8P~ 	     #8

  COPY_EXISTING ~T1M2LET5.itm~ ~override/T1M2LET5.itm~
  WRITE_ASCII 0x3a ~IMISC8F~ 	     #8  // changing up the icons
  WRITE_ASCII 0x58 ~CMISC8F~ 	     #8

  COPY_EXISTING ~T1M2LET6.itm~ ~override/T1M2LET6.itm~
  WRITE_ASCII 0x3a ~IMISC8C~ 	     #8  // changing up the icons
  WRITE_ASCII 0x58 ~CMISC8C~ 	     #8
END








 /* Camryn and Tamah, by tibicina */
BEGIN @99179 DESIGNATED 42 
LABEL bg1re_camryn_and_tamah
REQUIRE_FILE ~override/RE1_Installed.G3~ @14 /*~The Component "Amount of -ahem - details and BG-style vs. description text" is not installed.~ */


ADD_JOURNAL TITLE (@280) @94 @243 @244 @270 @279 @281 @282 @290 @291 @292 USING ~bg1re/tra/autotra/%LANGUAGE%/TICam.tra~

/* BGT: remove journal entries upon transition to BGII */
ACTION_IF GAME_IS ~bgt~ THEN BEGIN
  EXTEND_TOP ~AR0602.bcs~ ~bg1re/TICam/scripts/TICam_AR0602.baf~ EVALUATE_BUFFER
	USING ~bg1re/tra/autotra/%LANGUAGE%/TICam.tra~
END


//Copying audio files
COPY ~bg1re/TICam/Audio~ ~override~

//TICam and TITamah

COPY ~bg1re/TICam/creatures/TICam.cre~ ~override~ 
  SAY NAME1 @221 /* ~Camryn~ */
  SAY NAME2 @221
  WRITE_ASCII 0x248 ~TICam~ #8  //override script
  WRITE_ASCII 0x280 ~TICam~ #32  //DV
  WRITE_ASCII 0x2cc ~TICam~ #8   //pre-joining dialogue file
  WRITE_EVALUATED_ASCII 0x250 ~%tutu_var%SHOUT~ #8   // Class script
  WRITE_EVALUATED_ASCII 0x258 ~%tutu_scripts%EEENEMY~ #8   // Race script
  WRITE_EVALUATED_ASCII 0x268 ~%tutu_scriptw%TASIGHT~ #8   // Default script


COPY ~bg1re/TICam/creatures/TITamah.cre~ ~override/TITamah.cre~ 
  SAY INITIAL_MEETING @222 /* ~Yes?~ [TIShf] */
  SAY SELECT_COMMON1 @222
  SAY NAME1 @223
  SAY NAME2 @223
  WRITE_ASCII 0x248 ~TITamah~ #8  //override script
  WRITE_ASCII 0x280 ~TITamah~ #32  //DV
  WRITE_ASCII 0x2cc ~TITamah~ #8   //pre-joining dialogue file
  WRITE_EVALUATED_ASCII 0x250 ~%tutu_var%SHOUT~ #8   // Class script
  WRITE_EVALUATED_ASCII 0x258 ~%tutu_scripts%EEENEMY~ #8   // Race script
  WRITE_EVALUATED_ASCII 0x268 ~%tutu_scriptw%TASIGHT~ #8   // Default script


COPY_EXISTING ~%tutu_var%Tamah.cre~ ~override~
  SAY INITIAL_MEETING @224 /* ~What do you want?~ [TITamf] */
  SAY SELECT_COMMON1 @224
  BUT_ONLY_IF_IT_CHANGES

/* give doppelganger DV */
COPY ~bg1re/TICam/creatures/TIDOPPLE.cre~ ~override/TIDOPPLE.cre~ 
  WRITE_ASCII 0x280 ~TIDOPPLE~ #32  //DV
  BUT_ONLY_IF_IT_CHANGES


/* delete the original journal entry - not for BG1 */

ACTION_IF GAME_IS ~bgt tutu tutu_totsc bgee eet~ BEGIN

COPY_EXISTING ~%tutu_var%TAMAH.dlg~ ~override~
  // get journal entry from first response associated with dialogue state 5
  LPF READ_JOURNAL_STRREF
    INT_VAR state = 5
    RET strref
  END
  SET TAMAH_Journal_State5 = strref
/*
  // just for debugging purposes: fetch journal text from strref and output it in console
  GET_STRREF strref journalText
  PATCH_PRINT ~Journal entry #%strref%: %journalText%~
*/

  LPF READ_JOURNAL_STRREF
    INT_VAR state = 4
    RET strref
  END
  SET TAMAH_Journal_State4 = strref

  LPF READ_JOURNAL_STRREF
    INT_VAR state = 6
    RET strref
  END
  SET TAMAH_Journal_State6 = strref

BUT_ONLY

LAF extend_area_script STR_VAR area="%MutaminsGarden%" bottom="bg1re/TICam/scripts/AR3500.baf" END

END



//Compiling files

COMPILE EVALUATE_BUFFER ~bg1re/TICam/dialogues/TICam.d~ 

/* book case - only handed to the PC for not BG1 */
ACTION_IF GAME_IS ~bgt tutu tutu_totsc bgee eet~ THEN BEGIN
  COMPILE EVALUATE_BUFFER ~bg1re/TICam/dialogues/TICam_add.d~ USING ~bg1re/tra/autotra/%LANGUAGE%/TICam.tra~
END

COMPILE EVALUATE_BUFFER ~bg1re/TICam/scripts/TICam.baf~
COMPILE EVALUATE_BUFFER ~bg1re/TICam/scripts/TITamah.baf~



COMPILE EVALUATE_BUFFER ~bg1re/TICam/scripts/TICamCS1.baf~ USING ~bg1re/tra/autotra/%LANGUAGE%/TICam.tra~

/* cutscenes are tricky beasts. What works in one engine doesn't necessarily work for another. */
ACTION_IF GAME_IS ~bgt tutu tutu_totsc bgee eet~ THEN BEGIN
  COMPILE EVALUATE_BUFFER ~bg1re/TICam/scripts/TICamCS2.baf~ USING ~bg1re/tra/autotra/%LANGUAGE%/TICam.tra~
END

ACTION_IF GAME_IS ~bg1 totsc~ THEN BEGIN
  COMPILE EVALUATE_BUFFER ~bg1re/TICam/scripts/BG1/TICamCS2.baf~ USING ~bg1re/tra/autotra/%LANGUAGE%/TICam.tra~
END

/* "Tamah is reading" cutscene - needed so the engine takes all letters from the inventory if given in "loop" */
COMPILE EVALUATE_BUFFER ~bg1re/TICam/scripts/TICamCS3.baf~ USING ~bg1re/tra/autotra/%LANGUAGE%/TICam.tra~


LAF extend_area_script STR_VAR area="%Candlekeep%" bottom="bg1re/TICam/scripts/AR2600.baf" END

/* I move the spawning of Tamah and Camryn into level1 - in lv 5 CHARNAME is greeted by Piatus and it's a bit weird, also there could be Watchers / CHARNAME trying to hide etc. */
LAF extend_area_script STR_VAR area="%Candlekeep_Library_L1%" top="bg1re/TICam/scripts/AR2612.baf" END
LAF extend_area_script STR_VAR area="%Beregost_FeldepostsInn_L1%" top="bg1re/TICam/scripts/AR6752.baf" END

LAF extend_area_script STR_VAR area="%SouthBeregostRoad%" top="bg1re/TICam/scripts/AR3800.baf" END



/* BG1: Containers don't do "CreateItem", so inserting is a bit complicated */

ACTION_IF GAME_IS ~bg1 totsc~ THEN BEGIN

LAF extend_area_script STR_VAR area="%FriendlyArmInn_House%" top="bg1re/TICam/scripts/AR2305.baf" END
LAF extend_area_script STR_VAR area="%FriendlyArmInn_L3%" top="bg1re/TICam/scripts/AR2303.baf" END
LAF extend_area_script STR_VAR area="%Beregost_LandrinsHouse%" top="bg1re/TICam/scripts/AR3315.baf" END
LAF extend_area_script STR_VAR area="%Beregost_FirebeadsHouse_L2%" top="bg1re/TICam/scripts/AR3334.baf" END
LAF extend_area_script STR_VAR area="%Beregost_FeldepostsInn_L2%" top="bg1re/TICam/scripts/AR3352.baf" END
LAF extend_area_script STR_VAR area="%NashkelCarnival_ZordralsTent%" top="bg1re/TICam/scripts/AR4906.baf" END
LAF extend_area_script STR_VAR area="%Gullykin_JenkalsHouse_L1%" top="bg1re/TICam/scripts/AR4001.baf" END
LAF extend_area_script STR_VAR area="%Beregost_TravenhurstManor_L1%" top="bg1re/TICam/scripts/AR3320.baf" END
LAF extend_area_script STR_VAR area="%Nashkel_ManorHouse_L1%" top="bg1re/TICam/scripts/AR4804.baf" END
LAF extend_area_script STR_VAR area="%CloakwoodMines_L4%" top="bg1re/TICam/scripts/AR1803.baf" END
LAF extend_area_script STR_VAR area="%CloakwoodLodgeHuntingLodge%" top="bg1re/TICam/scripts/AR2215.baf" END
LAF extend_area_script STR_VAR area="%NBaldursGate_RamazithsTower_L6%" top="bg1re/TICam/scripts/AR0138.baf" END
LAF extend_area_script STR_VAR area="%WBaldursGate_RagefastsHouse%" top="bg1re/TICam/scripts/AR0126.baf" END

//Component: Adding items to containers in the game

// 1. House #2 (Friendly Arm Inn)
COPY_EXISTING ~%FriendlyArmInn_House%.are~ ~override~
LAUNCH_PATCH_FUNCTION  ~fj_are_structure~
INT_VAR
fj_con_itm_idx    = SHORT_AT 0x74 - 1
fj_flags          = 1 // identified
STR_VAR
fj_name           = TITOME01
fj_structure_type = itm
END
BUT_ONLY

// 2. Friendly Arm Inn (Level 3)
COPY_EXISTING ~%FriendlyArmInn_L3%.are~ ~override~
LAUNCH_PATCH_FUNCTION  ~fj_are_structure~
INT_VAR
fj_con_itm_idx    = SHORT_AT 0x74 - 11  //5?
fj_flags          = 1 // identified
STR_VAR
fj_name           = TITOME02
fj_structure_type = itm
END
BUT_ONLY

// 3. Landrin's House (Beregost)
COPY_EXISTING ~%Beregost_LandrinsHouse%.are~ ~override~
LAUNCH_PATCH_FUNCTION  ~fj_are_structure~
INT_VAR
fj_con_itm_idx    = SHORT_AT 0x74 - 1
fj_flags          = 1 // identified
STR_VAR
fj_name           = TITOME03
fj_structure_type = itm
END
BUT_ONLY

// 4. Firebead's House, 2nd Floor
COPY_EXISTING ~%Beregost_FirebeadsHouse_L2%.are~ ~override~
LAUNCH_PATCH_FUNCTION  ~fj_are_structure~
INT_VAR
fj_con_itm_idx    = SHORT_AT 0x74 - 1
fj_flags          = 1 // identified
STR_VAR
fj_name           = TITOME04
fj_structure_type = itm
END
BUT_ONLY

// 5. Feldepost's Inn (Level 2: Tranzig's room)
COPY_EXISTING ~%Beregost_FeldepostsInn_L2%.are~ ~override~
LAUNCH_PATCH_FUNCTION  ~fj_are_structure~
INT_VAR
fj_con_itm_idx    = SHORT_AT 0x74 - 1
fj_flags          = 1 // identified
STR_VAR
fj_name           = TITOME05
fj_structure_type = itm
END
BUT_ONLY

// 6. Nashkel Carnival (Zordral's Tent)
COPY_EXISTING ~%NashkelCarnival_ZordralsTent%.are~ ~override~
LAUNCH_PATCH_FUNCTION  ~fj_are_structure~
INT_VAR
fj_con_itm_idx    = SHORT_AT 0x74 - 1
fj_flags          = 1 // identified
STR_VAR
fj_name           = TITOME06
fj_structure_type = itm
END
BUT_ONLY

// 7. Jenkal's House
COPY_EXISTING ~%Gullykin_JenkalsHouse_L1%.are~ ~override~
LAUNCH_PATCH_FUNCTION  ~fj_are_structure~
INT_VAR
fj_con_itm_idx    = SHORT_AT 0x74 - 1
fj_flags          = 1 // identified
STR_VAR
fj_name           = TITOME07
fj_structure_type = itm
END
BUT_ONLY

// 8. Beregost (Travenhurst Manor)
COPY_EXISTING ~%Beregost_TravenhurstManor_L1%.are~ ~override~
LAUNCH_PATCH_FUNCTION  ~fj_are_structure~
INT_VAR
fj_con_itm_idx    = SHORT_AT 0x74 - 2
fj_flags          = 1 // identified
STR_VAR
fj_name           = TITOME08
fj_structure_type = itm
END
BUT_ONLY

// 9. Nashkel (Manor House)
COPY_EXISTING ~%Nashkel_ManorHouse_L1%.are~ ~override~
LAUNCH_PATCH_FUNCTION  ~fj_are_structure~
INT_VAR
fj_con_itm_idx    = SHORT_AT 0x74 - 2
fj_flags          = 1 // identified
STR_VAR
fj_name           = TITOME09
fj_structure_type = itm
END
BUT_ONLY

// 10. Cloakwood Mines (Davaeorn's Quarters)
COPY_EXISTING ~%CloakwoodMines_L4%.are~ ~override~
LAUNCH_PATCH_FUNCTION  ~fj_are_structure~
INT_VAR
fj_con_itm_idx    = SHORT_AT 0x74 - 5
fj_flags          = 1 // identified
STR_VAR
fj_name           = TITOME10
fj_structure_type = itm
END
BUT_ONLY

// 11. Cloakwood Lodge
COPY_EXISTING ~%CloakwoodLodgeHuntingLodge%.are~ ~override~
LAUNCH_PATCH_FUNCTION  ~fj_are_structure~
INT_VAR
fj_con_itm_idx    = SHORT_AT 0x74 - 1
fj_flags          = 1 // identified
STR_VAR
fj_name           = TITOME11
fj_structure_type = itm
END
BUT_ONLY

/* Container8 (shelf); Container9 (desk) is locked */
// 12. Ramazith's Tower (Level 4)
COPY_EXISTING ~%NBaldursGate_RamazithsTower_L6%.are~ ~override~
LAUNCH_PATCH_FUNCTION  ~fj_are_structure~
INT_VAR
fj_con_itm_idx    = SHORT_AT 0x74 - 2
fj_flags          = 1 // identified
STR_VAR
fj_name           = TITOME12
fj_structure_type = itm
END
BUT_ONLY

// 13. Ragefast's House
COPY_EXISTING ~%WBaldursGate_RagefastsHouse%.are~ ~override~
LAUNCH_PATCH_FUNCTION  ~fj_are_structure~
INT_VAR
fj_con_itm_idx    = SHORT_AT 0x74 - 1
fj_flags          = 1 // identified
STR_VAR
fj_name           = TITOME13
fj_structure_type = itm
END
BUT_ONLY

/*
/* Camryn will give this as a parting gift - otherwise it doesn't fit the description 
Reenable this if you prefer */
// 14. Fifth Floor, Candlekeep Library
COPY_EXISTING ~%Candlekeep_Library_L5%.are~ ~override~
LAUNCH_PATCH_FUNCTION  ~fj_are_structure~
INT_VAR
fj_con_itm_idx    = SHORT_AT 0x74 - 8
fj_flags          = 1 // identified
STR_VAR
fj_name           = TITOME14
fj_structure_type = itm
END
BUT_ONLY
*/


END //BG1

/* for ToB engine, we can just do CreateItem and the items will be in the correct containers */
ACTION_IF GAME_IS ~bgt tutu tutu_totsc bgee eet~ THEN BEGIN


LAF extend_area_script STR_VAR area="%FriendlyArmInn_House%" top="bg1re/TICam/scripts/AR2305_tob.baf" END
LAF extend_area_script STR_VAR area="%FriendlyArmInn_L3%" top="bg1re/TICam/scripts/AR2303_tob.baf" END
LAF extend_area_script STR_VAR area="%Beregost_LandrinsHouse%" top="bg1re/TICam/scripts/AR3315_tob.baf" END
LAF extend_area_script STR_VAR area="%Beregost_FirebeadsHouse_L2%" top="bg1re/TICam/scripts/AR3334_tob.baf" END
LAF extend_area_script STR_VAR area="%Beregost_FeldepostsInn_L2%" top="bg1re/TICam/scripts/AR3352_tob.baf" END
LAF extend_area_script STR_VAR area="%NashkelCarnival_ZordralsTent%" top="bg1re/TICam/scripts/AR4906_tob.baf" END
LAF extend_area_script STR_VAR area="%Gullykin_JenkalsHouse_L1%" top="bg1re/TICam/scripts/AR4001_tob.baf" END
LAF extend_area_script STR_VAR area="%Beregost_TravenhurstManor_L1%" top="bg1re/TICam/scripts/AR3320_tob.baf" END
LAF extend_area_script STR_VAR area="%Nashkel_ManorHouse_L1%" top="bg1re/TICam/scripts/AR4804_tob.baf" END
LAF extend_area_script STR_VAR area="%CloakwoodMines_L4%" top="bg1re/TICam/scripts/AR1803_tob.baf" END
LAF extend_area_script STR_VAR area="%CloakwoodLodgeHuntingLodge%" top="bg1re/TICam/scripts/AR2215_tob.baf" END
LAF extend_area_script STR_VAR area="%NBaldursGate_RamazithsTower_L6%" top="bg1re/TICam/scripts/AR0138_tob.baf" END
LAF extend_area_script STR_VAR area="%WBaldursGate_RagefastsHouse%" top="bg1re/TICam/scripts/AR0126_tob.baf" END

END


// Copying custom items and spells

/* custom Book bam - my edit, the other one was corrupted */
 COPY ~bg1re/TICam/bams/TIBOOK.BAM~ ~override/TIBOOK.BAM~


/* book bag - only available for non vanilla BG1 engine */
ACTION_IF GAME_IS ~bgt tutu tutu_totsc bgee eet~ THEN BEGIN

 COPY ~bg1re/TICam/bams/TICAMBAG.BAM~ ~override/TICAMBAG.bam~

// 1.
 COPY ~bg1re/TICam/items/TICAMBAG.sto~ ~override/TICAMBAG.sto~
  SAY NAME2 @225 /* ~Book Bag~ */
 COPY ~bg1re/TICam/items/TICAMBAG.itm~ ~override/TICAMBAG.itm~
  SAY NAME1 @225 /* ~Book Bag~ */
  SAY NAME2 @225 /* ~Book Bag~ */

  SAY DESC @226 /* ~This is a finely decorated leather book bag. It was given by Camryn the Scribe to <CHARNAME> as a going-away present when <PRO_HESHE> left Candlekeep. It is just the right size to carry books.~ */



END

// 2.
COPY ~bg1re/TICam/items/TIC0SCRL.itm~ ~override/TIC0SCRL.itm~
  SAY NAME1 @227 /* ~Letter to Tamah~ */
  SAY NAME2 @227 /* ~Letter to Tamah~ */
  SAY DESC @228 /* ~Dear Tamah,
Here, in the silence of my office, I am missing the scratch of your pen, your gentle cough, and the squeak of your chair as you shift. All the small noises which signaled the glorious fact that you, dear you, were nearby me. I did not even have to raise my eyes to know that your delicate little fingers were creating beauty so close to me. I could even stretch out my foot under the table that we shared and brush against your graceful ankles. Those days were heaven; I thought I might have them forever... Only in my reverie, Tamah. Only with my face streaming with tears.
--C.~ */

// 3.
COPY ~bg1re/TICam/items/TIC0SCRL.itm~ ~override/TIC1SCRL.itm~
  SAY NAME1 @227 /* ~Letter to Tamah~ */
  SAY NAME2 @227 /* ~Letter to Tamah~ */
  SAY DESC @229 /* ~Sweet Tamah,
You told me when we first met that I reminded you of your mother's grandfather; an Elvish Scholar of some fame in Trademeet. You felt intimidated by our difference in ages, by the scope and breadth of my knowledge, and by my more extensive experience of life. You said your meager sum of years and knowledge made you feel as if you were inadequate for the job I offered you. Ah, my tempestuous lover! Know now I felt equally inadequate to love such a magnificent woman as you. In my bed and in my arms, my centuries were mere moments in comparison to your instinctive, boundless knowledge of love's satisfaction. I have felt as much a child as you have, my dear, when you have told me of the outer worlds' beauties, explained that stableboy Dreppin's jokes, and, not least, guided me from unreasoning desire to unmatched pleasure. Consider, then, that in this and in most other things, we are properly matched partners regardless of our ages.
--C.~ */

// 4.
COPY ~bg1re/TICam/items/TIC0SCRL.itm~ ~override/TIC2SCRL.itm~
  SAY NAME1 @227 /* ~Letter to Tamah~ */
  SAY NAME2 @227 /* ~Letter to Tamah~ */
  SAY DESC @230 /* ~Beloved Tamah,
This morning when I woke up, alone as is now usual, I thought about the feel of your hair in my hands.  Its weight on my palms just before the silken soft strands slip through my ink-stained fingers.  It is a brilliant, shining halo of glory that adorns your temples, my dear.  I would give all of my remaining mornings if I could once more run your ebony comb through the threads after a night spent with the long, loose ends tickling my lips or spread luxuriously across my pillow.
--C.~ */

// 5.
COPY ~bg1re/TICam/items/TIC0SCRL.itm~ ~override/TIC3SCRL.itm~
  SAY NAME1 @227 /* ~Letter to Tamah~ */
  SAY NAME2 @227 /* ~Letter to Tamah~ */
  SAY DESC @231 /* ~My Darling Tamah,
There is little today in my thoughts that can entirely banish the memory of your eyes.  Wide and deep as a slow moving river.  But oh, how they brightened when you smiled!  They shone like they were lit from within by a fierce inferno of flame.  And for what?  For the centuries old joke of the pedant you said you loved.  Truly, my love, I am both humbled and amazed by the joy  you found in my presence and never cease to wonder at the mystery of it all.
--C.~ */

// 6.
COPY ~bg1re/TICam/items/TIC0SCRL.itm~ ~override/TIC4SCRL.itm~
  SAY NAME1 @227 /* ~Letter to Tamah~ */
  SAY NAME2 @227 /* ~Letter to Tamah~ */
  SAY DESC @232 /* ~Dear Tamah,
My heart stirred with pain, but it took a moment to remember that today marked five years since the day you left.  There is still no space in my grief to enjoy any of the small pleasures that once were in my life.  Why?  Because in 20 brief years you made your imprint upon each small measure of happiness.  I still cannot work, cannot eat, cannot sleep (nay!  Not even reverie) without being reminded of your loss.  The sharp absent presence is ever beside me; a shadow crossing the face of the sun of my life.  How I wish you would return.
--C.~ */

// 7.
COPY ~bg1re/TICam/items/TIC0SCRL.itm~ ~override/TIC5SCRL.itm~
  SAY NAME1 @227 /* ~Letter to Tamah~ */
  SAY NAME2 @227 /* ~Letter to Tamah~ */
  SAY DESC @233 /* ~Lovely Tamah,
Ah, my dear, I feel your absence keenly not just in moments of solitude, but also when in company with those I call my friends. You had such a quick wit that they all respected you despite your youth. You easily traded barbs with Ulraunt and jokes with Gorion. You could discuss an episode of Cormyr history with Phlydia as easily as exchange dirty jokes with Withrop. I had never regarded my own tongue as lacking until I met you. In your presence, it stumbles and stutters over even the slightest word. Only my eyes' expression of love for you was eloquent, engaged as they were in admiring your confidence and joie de vivre.
--C.~ */

// 8.
COPY ~bg1re/TICam/items/TIC0SCRL.itm~ ~override/TIC6SCRL.itm~
  SAY NAME1 @227 /* ~Letter to Tamah~ */
  SAY NAME2 @227 /* ~Letter to Tamah~ */
  SAY DESC @234 /* ~My Saucy Tamah,
I was reminded late one night of when we fell in love. We were working on an edition of Celsor's "Seduction of a Nymph". You were drawing the illustrations and I was to apply colored inks and gold leaf. Ah... such naughty images you created, my dear. Yet also so beautiful. Only a scribe of my long years can appreciate how rarely an illustrator of your talent comes along. Only one like you, who could tease an old elf like myself back to vigorous manhood. We were illustrating the scene where Coreddon caresses Ephemera in the garden, I remember, and your hand brushed against mine. My heart was already yours, my darling, but I feared to speak lest you laugh at an old elf's fantasies. Trembling, I laid my hand on yours, and you asked if you could be my Ephemera. The lips I had once only employed for speaking were put to finer use, beloved; that night, I certainly tried to be Coreddon, although I doubt Ulraunt would have appreciated knowing the use we made of his patch of begonias in Candlekeep's garden!
--C.~ */

// 9.
COPY ~bg1re/TICam/items/TIC0SCRL.itm~ ~override/TIC7SCRL.itm~
  SAY NAME1 @227 /* ~Letter to Tamah~ */
  SAY NAME2 @227 /* ~Letter to Tamah~ */
  SAY DESC @235 /* ~Tamah,
How many ways can I tell you that you were right? That someday I, too, would rage against the walls of Candlekeep like a bird in a cage. I sought out Candlekeep so that I would never have to face my fears, but here I am, gazing solidly at them. Let me speak briefly of my childhood, Tamah. I was born in Waterdeep in 1032 DR, the year the master-mage Aghairon became the first lord of Waterdeep and brought that city a government based on reason instead of the strength of arms. I should know: my parents were his friends and were slain during an attempted uprising by one of the defeated Warlords Aghairon had supplanted. From childhood, therefore, I have been afraid to love anyone. As peaceful as it has become, Waterdeep still seethes with the ambition of its guildmasters. I have never felt safe anywhere save Candlekeep. Yet, my wise Tamah, you were right. Even hidden away in my tower, love found me. Passion briefly ruled my nights and sweet harmony my days. By trying to keep you near me, I drove you away... Alas, I have still lost my dearest friend and companion! With your strength to keep fear at bay, my love, I know I can leave here. With your hand, this life can be changed.
--C.~ */

// 10.
COPY ~bg1re/TICam/items/TIC0SCRL.itm~ ~override/TIC8SCRL.itm~
  SAY NAME1 @227 /* ~Letter to Tamah~ */
  SAY NAME2 @227 /* ~Letter to Tamah~ */
  SAY DESC @236 /* ~My Tamah,
I was looking out the window this afternoon and saw that the swallows had returned to the eaves of the Library. They shelter in the carvings and embellishments of the building. One pair has chosen to build their nest on the window ledge of our... My bedroom. I wept, though I welcome this little pair and their babies to my humble abode. Remind me, my sweet... Did we not once talk of marrying? Of children? Did we not tease each other with our notions of a child with my chin and your eyes? I suppose I could recall every word in reverie if I did not fear that the memory would drive me mad. Families and children have drifted into Candlekeep, my love; Winthrop and Gorion have each adopted a child. The noise of children's feet echo in the Library Halls and <CHARNAME>, Gorion's child, has twice knocked over my ink bottles. I should have been angered, but, instead, I gave <PRO_HIMHER> a colored pencil and a blank scroll to draw on. Did I once have the chance for many such obvious expressions of love with my own children? How could I have been so blind?
--C.~ */

// 11.
COPY ~bg1re/TICam/items/TIC0SCRL.itm~ ~override/TIC9SCRL.itm~
  SAY NAME1 @227 /* ~Letter to Tamah~ */
  SAY NAME2 @227 /* ~Letter to Tamah~ */
  SAY DESC @237 /* ~My Beloved Tamah,
It has been years since you left me, my dear one, and my desk drawers are beginning to be stuffed with letters to you. I desperately need some way to contact you even though I have no idea where you've gone. But then it occurred to me: you are a gifted Illuminator. Far more skilled than I, in fact. From the first, the nobles would pay a premium for samples of your work. And now, a 'Tamah' edition of a book is valuable. I know it would amuse you to discover that one lordling just gained entry to Candlekeep with one of our 'special' editions of Celsor's 'Seduction of a Nymph.' How appalled they would all be if they knew what fine lovemaking occurred just inches away from every edition we created! But I am forgetting my purpose in writing today.Somewhere you must be working for a wealthy family or a private library. If I send out a book... you might read it. You might even remember where we used to hide our love-notes to each other. And find this letter... I shall start inserting my letters into the books of poetry that I copy for patrons. Hopefully, at least one might reach your eyes and tell you of my continuing love for you. I am not concerned with anything that has happened between your departure and when you read this, my beloved. I want you back.
--C.~ */

// 12.
COPY ~bg1re/TICam/items/TIC0SCRL.itm~ ~override/TIC10SCR.itm~
  SAY NAME1 @227 /* ~Letter to Tamah~ */
  SAY NAME2 @227 /* ~Letter to Tamah~ */
  SAY DESC @238 /* ~My Love... My Tamah,
Ulraunt laughs now whenever I refer to you, dear one. For even with the passage of three decades, I still call you 'my love.' Nor is his attitude unusual. Most humans acquainted with me at the least find this continuing attachment odd, calling it an 'Elven bond' and shaking their heads in pity, as if I were some kind of fool to still love you. Even you, nearest and dearest to my heart, failed to understand how I could have held my heart in reserve for three hundred years until you (!) invaded my life and held such benevolent tyranny over its solitary beat. Know then, darling, that even amongst such curiously faithful beings as elves there are those who astound their own kind with their reclusiveness. I was one such; as a youth, I was cold and unmoved by emotion. My parents named me 'rlra' ('heartless') for my detached distance. My attachment has always been to ancient secrets and hidden lore. I became a mage of no small power in my prime, before I forsook magic for the delight of pure knowledge. I laughed at my fellows--Elves and Men alike--who formed bonds of love only to see them sundered by the servants of Time. Imagine, then, my surprise when I met you. I was stirred to life: I ran madly after you in the Library Halls and across the gardens of Candlekeep! I had to immerse myself in contemplation of your beauty and bring you, half-laughing, half-groaning, to pleasure that neither of us had known before. First and last in my heart, Tamah... Of course you are still 'my love'!!
--C.~ */

// 13.
COPY ~bg1re/TICam/items/TIC0SCRL.itm~ ~override/TIC11SCR.itm~
  SAY NAME1 @227 /* ~Letter to Tamah~ */
  SAY NAME2 @227 /* ~Letter to Tamah~ */
  SAY DESC @239 /* ~My Sweet Tamah,
I write this letter at the truly indecent hour of half past three. I have lain awake for long enough and shall merely start my day early with a note to you. I need not sleep at all, as you know, but reverie lately has brought me only endless repetitions of our final argument and your overly hasty departure. The blankness of sleep, however, has fled from me and left me yearning for your body. I would so love to return to those days when we slept naked and entwined together. I long to smell you, taste you, feel the texture of your skin against my lips and tongue. But alas, my rosebud, only in my memory may I, like the butterfly, breathe your heady perfume and lap nectar from your silky petals. I am utterly alone in these small hours; I must tame my rebellious flesh without your kind assistance. Gods help me!
--C.~ */

// 14.
COPY ~bg1re/TICam/items/TIC0SCRL.itm~ ~override/TIC12SCR.itm~
  SAY NAME1 @227 /* ~Letter to Tamah~ */
  SAY NAME2 @227 /* ~Letter to Tamah~ */
  SAY DESC @240 /* ~To My Dear Tamah,
Once, when we were talking of marriage, I remember telling you of the most ancient of Elven customs: the exchange of the vows of eternal love. You were surprised to discover that Elves need no church-buildings, no priests, no ceremonies, and no approval of state and local constabulary to bond. Those, my love, are just the trappings to a basic agreement between willing and loving partners. I have never been averse to human weddings--have been invited to more than a few in my time--but find them amusingly repetitive. I would marry you any way you might choose, my dear, but I will always remind you that I am already yours. The words we spoke to each other in Candlekeep Garden when we declared our love for each other were my vow of commitment. I need no other promises to eternally be your man. Take this ring as proof of my words that you are the only woman I wish to be married to.
--C.~ */

// 15.
COPY ~bg1re/TICam/items/TIC0SCRL.itm~ ~override/TIC13SCR.itm~
  SAY NAME1 @227 /* ~Letter to Tamah~ */
  SAY NAME2 @227 /* ~Letter to Tamah~ */
  SAY DESC @241 /* ~Forgive me, Tamah,
This morning I remembered our final argument... again... but with a difference. In my mind, once again you stormed off in such rage because I would not leave the safety of Candlekeep. Once again, you reminded me that the Keeper of Tomes disliked our pairing and would only begrudgingly permit us to raise children here. My protest that that he did not forbid us--that we could have a family here--fell on nearly deaf ears. I remember that you said you wanted to feel the freedom of a life without the border of stone walls and to daily hear the chorus of young voices around you as you suckle your youngest. You wanted to know that all of them would have open fields and woodland to explore instead of the stale air of the Library halls. The normal noises of nature instead of the murmur of whispers in enforced silence. All of this I remembered, love, but with a difference. This time, knowing what I did not know then--what it meant to live with only your absent presence beside me, I imagined myself giving in and giving you what you so dearly want. Why the difference? rlra has become quant r... My heart is full...
--C.~ */


// 16.
COPY ~bg1re/TICam/items/TIC0SCRL.itm~ ~override/TIC14SCR.itm~
  SAY NAME1 @293 /* ~Letter to <CHARNAME>~ */
  SAY NAME2 @293 //~Letter to <CHARNAME>~
  SAY DESC @242 /* ~My dear <CHARNAME>,
<DAYANDMONTH>, in the Year of the Banner, <YEAR>.
I am writing in haste a final note... This time for you. When I got up this morning, I sensed excitement in the air. I felt that something in my life was about to change. Even if this means I am to face my own demise, my whole heart yearns to embrace that change. You might think it foolish of me to believe this, but I am certain that I am to see Tamah today, even if only in whatever afterlife is permitted a man who will not enter Arvanaith without his human lover beside him. But I am rambling and have momentarily forgotten my purpose in writing...I am going to ask something of you, <CHARNAME>, being well aware that you have been kept in the dark about your past (those of us who knew were forbidden to speak of it lest we attract...unwanted...attention). I ask you to embrace change. Refusing to do so can only lead to unhappiness. This is the lesson I wish to pass on to you. Learn it well. I include in this note a small token of my esteem. It has served me well in my life. May it serve you at least as well.
Ever Your Friend,
--Camryn~ */

// 1.
COPY ~bg1re/TICam/items/TITOME01.itm~ ~override/TITOME01.itm~
  SAY NAME1 @243 /* ~Astrophil and Stella~ */
  SAY NAME2 @243  /* ~Astrophil and Stella~ */
  SAY DESC @244 /* ~Stella oft sees the very face of woe
Painted in my beclouded stormy face,
But cannot skill to pity my disgrace,
Not though thereof the cause herself she know;
Yet hearing late a fable, which did show
Of lovers never known a grievous case,
Pity thereof gat in her breast such place
That, from that sea derived, tears spring did flow.
Alas, if fancy drawn by imaged things,
Though false, yet with free scope more grace doth breed
Than servants wrack, where new doubts honor brings;
Then think, my dear, that you in me do read
Of lovers ruin some sad tragedy.
I am not I, pity the tale of me.

(The spine of this book is a bit thicker than usual.)~ */

   LPF ALTER_SPELL_EFFECT
   INT_VAR
     match_opcode  = 139   // Display String
     parameter1    = RESOLVE_STR_REF(@285)  
   END


// 2.
COPY ~bg1re/TICam/items/TITOME02.itm~ ~override/TITOME02.itm~
  SAY NAME1 @246 /* ~Pamphilia to Amphilanthus~ */
  SAY NAME2 @246 /* ~Pamphilia to Amphilanthus~ */
  SAY DESC @247 /* ~When I beeheld the Image of my deere
With greedy lookes mine eyes would that way bend,
Fear, and desire did inwardly contend;
Feare to bee markd, desire to drawe still neere,
And in my soule a speritt wowld apeer,
Which boldnes waranted, and did pretend
To bee my genius, yett I durst nott lend
My eyes in trust wher others seemed soe cleere,
Then did I search from whence this danger rose,
If such unworthynes in mee did rest
As my stervd eyes must nott with sight bee blest;
When jealousie her poyson did disclose;
Yett in my hart unseense of jealous eye
The truer Image shall in triumph lye.

(The spine of this book is a bit thicker than usual.)~ */

   LPF ALTER_SPELL_EFFECT
   INT_VAR
     match_opcode  = 139   // Display String
     parameter1    = RESOLVE_STR_REF(@285)  
   END

// 3.
COPY ~bg1re/TICam/items/TITOME03.itm~ ~override/TITOME03.itm~
  SAY NAME1 @249 /* ~Sonnet 18~ */
  SAY NAME2 @249 /* ~Sonnet 18~ */
  SAY DESC @250 /* ~Shall I compare thee to a summer's day?
Thou art more lovely and more temperate:
Rough winds do shake the darling buds of May,
And summer's lease hath all too short a date:
Sometime too hot the eye of heaven shines,
And often is his gold complexion dimmed,
And every fair from fair sometime declines,
By chance, or nature's changing course untrimmed:
But thy eternal summer shall not fade,
Nor lose possession of that fair thou ow'st,
Nor shall death brag thou wander'st in his shade,
When in eternal lines to time thou grow'st,
So long as men can breathe, or eyes can see,
So long lives this, and this gives life to thee.

(The spine of this book is a bit thicker than usual.)~ */

   LPF ALTER_SPELL_EFFECT
   INT_VAR
     match_opcode  = 139   // Display String
     parameter1    = RESOLVE_STR_REF(@285)  
   END

// 4.
COPY ~bg1re/TICam/items/TITOME04.itm~ ~override/TITOME04.itm~
  SAY NAME1 @252 /* ~Song to Celia~ */
  SAY NAME2 @252 /* ~Song to Celia~ */
  SAY DESC @253 /* ~Drinke to me, onely, with thine eyes,
And I will pledge with mine;
Or leave a kisse but in the cup,
And Ile not looke for wine.
The thirst, that from the soule doth rise,
Doth aske a drinke divine:
But might I of Joves Nectar sup,
I would not change for thine.
I sent thee, late, a rosie wreath,
Not so much honoring thee,
As giving it a hope, that there
It could not withered bee.
But thou thereon didst onely breath,
And sentst it back to mee:
Since when it growes, and smells, I sweare,
Not of it selfe, but thee.

(The spine of this book is a bit thicker than usual.)~ */

   LPF ALTER_SPELL_EFFECT
   INT_VAR
     match_opcode  = 139   // Display String
     parameter1    = RESOLVE_STR_REF(@285)  
   END

// 5.
COPY ~bg1re/TICam/items/TITOME05.itm~ ~override/TITOME05.itm~
  SAY NAME1 @255 /* ~She Walks in Beauty~ */
  SAY NAME2 @255 /* ~She Walks in Beauty~ */
  SAY DESC @256 /* ~I. She walks in beauty, like the night
Of cloudless climes and starry skies;
And all thats best of dark and bright
Meet in her aspect and her eyes:
Thus mellowed to that tender light
Which heaven to gaudy day denies.

II. One shade the more, one ray the less,
Had half impaired the nameless grace
Which waves in every raven tress,
Or softly lightens oer her face;
Where thoughts serenely sweet express
How pure, how dear their dwelling place.

III. And on that cheek, and oer that brow,
So soft, so calm, yet eloquent,
The smiles that win, the tints that glow,
But tell of days in goodness spent,
A mind at peace with all below,
A heart whose love is innocent.

(The spine of this book is a bit thicker than usual.)~ */

   LPF ALTER_SPELL_EFFECT
   INT_VAR
     match_opcode  = 139   // Display String
     parameter1    = RESOLVE_STR_REF(@285)  
   END

// 6.
COPY ~bg1re/TICam/items/TITOME06.itm~ ~override/TITOME06.itm~
  SAY NAME1 @258 /* ~The Look~ */
  SAY NAME2 @258 /* ~The Look~ */
  SAY DESC @259 /* ~Strephon kissed me in the spring,
Robin in the fall,
But Colin only looked at me
And never kissed at all.
Strephons kiss was lost in jest,
Robins lost in play,
But the kiss in Colins eyes
Haunts me night and day.

(The spine of this book is a bit thicker than usual.)~ */

   LPF ALTER_SPELL_EFFECT
   INT_VAR
     match_opcode  = 139   // Display String
     parameter1    = RESOLVE_STR_REF(@285)  
   END

// 7.
COPY ~bg1re/TICam/items/TITOME07.itm~ ~override/TITOME07.itm~
  SAY NAME1 @261 /* ~I Loved You First~ */
  SAY NAME2 @261 /* ~I Loved You First~ */
  SAY DESC @262 /* ~I loved you first: but afterwards your love,
Outsoaring mine, sang such a loftier song
As drowned the friendly cooings of my dove.
Which owes the other most? My love was long,
And yours one moment seemed to wax more strong;
I loved and guessed at you, you contrued me
And loved me for what might or might not be
Nay, weights and measures do us both a wrong.
For verily love knows not mine or thine;
With separate I and thou free love has done,
For one is both and both are one in love:
Rich love knows nought of thine that is not mine;
Both have the strength and both the length thereof,
Both of us, of the love which makes us one.

(The spine of this book is a bit thicker than usual.)~ */

   LPF ALTER_SPELL_EFFECT
   INT_VAR
     match_opcode  = 139   // Display String
     parameter1    = RESOLVE_STR_REF(@285)  
   END

// 8.
COPY ~bg1re/TICam/items/TITOME08.itm~ ~override/TITOME08.itm~
  SAY NAME1 @264 /* ~When to her Lute Corinna Sings~ */
  SAY NAME2 @264 /* ~When to her Lute Corinna Sings~ */
  SAY DESC @265 /* ~When to her lute Corinna sings,
Her voice revives the leaden strings,
And doth in highest notes appear,
As any challenged echo clear;
But when she doth of mourning speak,
E'en with her sighs, the strings do break,
And as her lute doth live or die,
Led by her passion, so must I:
For when of pleasure she doth sing,
My thoughts enjoy a sudden spring,
But if she doth of sorrow speak,
E'en from my heart the strings do break.

(The spine of this book is a bit thicker than usual.)~ */

   LPF ALTER_SPELL_EFFECT
   INT_VAR
     match_opcode  = 139   // Display String
     parameter1    = RESOLVE_STR_REF(@285)  
   END

// 9.
COPY ~bg1re/TICam/items/TITOME09.itm~ ~override/TITOME09.itm~
  SAY NAME1 @267 /* ~The Passionate Shepherd to His Love~ */
  SAY NAME2 @267 /* ~The Passionate Shepherd to His Love~ */
  SAY DESC @268 /* ~Come live with me and be my love,
And we will all the pleasures prove
That valleys, groves, hills, and fields,
Woods, or steepy mountain yields.

And we will sit upon the rocks,
Seeing the shepherds feed their flocks,
By shallow rivers to whose falls
Melodious birds sing madrigals.

And I will make thee beds of roses
And a thousand fragrant posies,
A cap of flowers, and a kirtle
Embroidered all with leaves of myrtle;

A gown made of the finest wool
Which from our pretty lambs we pull;
Fair lined slippers for the cold,
With buckles of the purest gold;

A belt of straw and ivy buds,
With coral clasps and amber studs:
And if these pleasures may thee move,
Come live with me, and be my love.

The shepherds swains shall dance and sing
For thy delight each May morning:
If these delights thy mind may move,
Then live with me and be my love.

(The spine of this book is a bit thicker than usual.)~ */

   LPF ALTER_SPELL_EFFECT
   INT_VAR
     match_opcode  = 139   // Display String
     parameter1    = RESOLVE_STR_REF(@285)  
   END

// 10.
COPY ~bg1re/TICam/items/TITOME10.itm~ ~override/TITOME10.itm~
  SAY NAME1 @270 /* ~The Old Arcadia~ */
  SAY NAME2 @270 /* ~The Old Arcadia~ */
  SAY DESC @271 /*~Yonder, my Claius, Urania lighted; the very horse, methought, bewailed to be so disburdened: and as for thee, poor Claius, when thou wentest to help her down, I saw reverence and desire so divide thee, that thou didst at one instant both blush and quake, and instead of bearing her wert ready to fall down thyself. There she sat, vouchsafing my cloak (then most gorgeous) under her: at yonder rising of the ground she turned herself, looking back towards her wonted abode, and because of her parting, bearing much sorrow in her eyes, the lightsomeness whereof had yet so natural a cheerfulness that it made even sorrow seem to smile; at that turning she spake to us all, opening the cherry of her lips, and Lord how greedily mine ears did feed upon the sweet words she uttered! And here she laid her hand over thine eyes, when she saw the tears springing in them, as if she would conceal them from other, and yet herself feel some of thy sorrow. But woe is me, yonder, yonder, did she put her foot into the boat, at that instant, as it were, dividing her heavenly beauty between the earth and the sea. But when she was embarked, did you not mark how the winds whistled and the seas danced for joy, how the sails did swell with pride, and all because they had Urania? O Urania, blessed be thou Urania, the sweetest fairness, and fairest sweetness!

(The spine of this book is a bit thicker than usual.)~ */

   LPF ALTER_SPELL_EFFECT
   INT_VAR
     match_opcode  = 139   // Display String
     parameter1    = RESOLVE_STR_REF(@285)  
   END

// 11.
COPY ~bg1re/TICam/items/TITOME11.itm~ ~override/TITOME11.itm~
  SAY NAME1 @273 /* ~The Decameron: Prince Galehaut~ */
  SAY NAME2 @273 /* ~The Decameron: Prince Galehaut~ */
  SAY DESC @274 /* ~As often, most gracious ladies, as, taking thought in myself, I mind me how very pitying you are all by nature, so often do I recognize that this present work will, to your thinking, have a grievous and a weariful beginning, inasmuch as the dolorous remembrance of the late pestiferous mortality, which it beareth on its forefront, is universally irksome to all who saw or otherwise knew it. But I would not therefore have this affright you from reading further, as if in the reading you were still to fare among sighs and tears. Let this grisly beginning be none other to you than is to wayfarers a rugged and steep mountain, beyond which is situate a most fair and delightful plain, which latter cometh so much the pleasanter to them as the greater was the hardship of the ascent and the descent; for, like as dolour occupieth the extreme of gladness, even so are miseries determined by imminent joyance. This brief annoy (I say brief, inasmuch as it is contained in few pages) is straightway succeeded by the pleasance and delight which I have already promised you and which, belike, were it not aforesaid, might not be looked for from such a beginning. And in truth, could I fairly have availed to bring you to my desire otherwise than by so rugged a path as this will be I had gladly done it; but being in a manner constrained thereto, for that, without this reminiscence of our past miseries, it might not be shown what was the occasion of the coming about of the things that will hereafter be read, I have brought myself to write them.

(The spine of this book is a bit thicker than usual.)~ */
   LPF ALTER_SPELL_EFFECT
   INT_VAR
     match_opcode  = 139   // Display String
     parameter1    = RESOLVE_STR_REF(@285)  
   END

// 12.
COPY ~bg1re/TICam/items/TITOME12.itm~ ~override/TITOME12.itm~
  SAY NAME1 @276 /* ~The Faerie Queene~ */
  SAY NAME2 @276 /* ~The Faerie Queene~ */
  SAY DESC @277 /* ~Lo I the man, whose Muse whilome did maske,
    As time her taught, in lowly Shepheards weeds,
    Am now enforst a far vnfitter taske,
    For trumpets sterne to chaunge mine Oaten reeds,
    And sing of Knights and Ladies gentle deeds;
    Whose prayses hauing slept in silence long,
    Me, all too meane, the sacred Muse areeds
    To blazon broad emongst her learned throng:
Fierce warres and faithfull loues shall moralize my song.

(The spine of this book is a bit thicker than usual.)~ */

   LPF ALTER_SPELL_EFFECT
   INT_VAR
     match_opcode  = 139   // Display String
     parameter1    = RESOLVE_STR_REF(@286)  
   END

// 13.
COPY ~bg1re/TICam/items/TITOME13.itm~ ~override/TITOME13.itm~
  SAY NAME1 @279 /* ~To the Virgins~ */
  SAY NAME2 @279 /* ~To the Virgins~ */
  SAY DESC @280 /* ~Gather ye rosebuds while ye may,
   Old Time is still a-flying;
And this same flower that smiles today
   Tomorrow will be dying.

The glorious lamp of heaven, the sun,
   The higher hes a-getting,
The sooner will his race be run,
   And nearer hes to setting.

That age is best which is the first,
   When youth and blood are warmer;
But being spent, the worse, and worst
   Times still succeed the former.

Then be not coy, but use your time,
   And while ye may, go marry;
For having lost but once your prime,
   You may forever tarry.

(The spine of this book is a bit thicker than usual.)~ */

   LPF ALTER_SPELL_EFFECT
   INT_VAR
     match_opcode  = 139   // Display String
     parameter1    = RESOLVE_STR_REF(@285)  
   END

// 14.
COPY ~bg1re/TICam/items/TITOME14.itm~ ~override/TITOME14.itm~
  SAY NAME1 @282 /* ~Change~ */
  SAY NAME2 @282 /* ~Change~ */
  SAY DESC @283 /* ~Change
Said the sun to the moon,
You cannot stay.

Change
Says the moon to the waters,
All is flowing.

Change
Says the fields to the grass,
Seed-time and harvest,
Chaff and grain.

You must change said,
Said the worm to the bud,
Though not to a rose,

Petals fade
That wings may rise
Borne on the wind.

You are changing
said death to the maiden, your wan face
To memory, to beauty.

Are you ready to change?
Says the thought to the heart, to let her pass
All your life long

For the unknown, the unborn
In the alchemy
Of the world's dream?

You will change,
says the stars to the sun,
Says the night to the stars.

(The spine of this book is a bit thicker than usual.)~ */

    LPF ALTER_SPELL_EFFECT
   INT_VAR
     match_opcode  = 139   // Display String
     parameter1    = RESOLVE_STR_REF(@286)  
   END


/* Put the nice BGII ring bam into BG1 */
ACTION_IF GAME_IS ~bg1 totsc~ THEN BEGIN
  COPY ~bg1re/TICam/bams/IMISC5R.BAM~ ~override~
END


// 15.
COPY ~bg1re/TICam/items/TICAMRIN.itm~ ~override/TICAMRIN.itm~
  SAY NAME1 @287 /* ~Engagement Ring~ */
  SAY NAME2 @287 /* ~Engagement Ring~ */
  SAY DESC @288 /* ~This is the engagement ring that Camryn sent to Tamah with one of his hidden letters.~ */


ACTION_IF GAME_IS ~bg1 totsc~ THEN BEGIN
  COPY_EXISTING ~TICAMRIN.itm~ ~override~  
    WRITE_ASCII 0x58 ~CRING21~ 	     #8
END



// 1.
COPY ~bg1re/TICam/items/TIBOOK01.itm~ ~override/TIBOOK01.itm~
  SAY NAME1 @243  /* ~Astrophil and Stella~ */
  SAY NAME2 @243  /* ~Astrophil and Stella~ */

  SAY DESC @245 /* ~Stella oft sees the very face of woe
Painted in my beclouded stormy face,
But cannot skill to pity my disgrace,
Not though thereof the cause herself she know;
Yet hearing late a fable, which did show
Of lovers never known a grievous case,
Pity thereof gat in her breast such place
That, from that sea derived, tears spring did flow.
Alas, if fancy drawn by imaged things,
Though false, yet with free scope more grace doth breed
Than servants wrack, where new doubts honor brings;
Then think, my dear, that you in me do read
Of lovers ruin some sad tragedy.
I am not I, pity the tale of me.~ */

// 2.
COPY ~bg1re/TICam/items/TIBOOK01.itm~ ~override/TIBOOK02.itm~
  SAY NAME1 @246 /* ~Pamphilia to Amphilanthus~ */
  SAY NAME2 @246 /* ~Pamphilia to Amphilanthus~ */

  SAY DESC @248 /* ~When I beeheld the Image of my deere
With greedy lookes mine eyes would that way bend,
Fear, and desire did inwardly contend;
Feare to bee markd, desire to drawe still neere,
And in my soule a speritt wowld apeer,
Which boldnes waranted, and did pretend
To bee my genius, yett I durst nott lend
My eyes in trust wher others seemed soe cleere,
Then did I search from whence this danger rose,
If such unworthynes in mee did rest
As my stervd eyes must nott with sight bee blest;
When jealousie her poyson did disclose;
Yett in my hart unseense of jealous eye
The truer Image shall in triumph lye.~ */

// 3.
COPY ~bg1re/TICam/items/TIBOOK01.itm~ ~override/TIBOOK03.itm~
  SAY NAME1 @249 /* ~Sonnet 18~ */
  SAY NAME2 @249 /* ~Sonnet 18~ */

  SAY DESC @251 /* ~Shall I compare thee to a summer's day?
Thou art more lovely and more temperate:
Rough winds do shake the darling buds of May,
And summer's lease hath all too short a date:
Sometime too hot the eye of heaven shines,
And often is his gold complexion dimmed,
And every fair from fair sometime declines,
By chance, or nature's changing course untrimmed:
But thy eternal summer shall not fade,
Nor lose possession of that fair thou ow'st,
Nor shall death brag thou wander'st in his shade,
When in eternal lines to time thou grow'st,
So long as men can breathe, or eyes can see,
So long lives this, and this gives life to thee.~ */

// 4.
COPY ~bg1re/TICam/items/TIBOOK01.itm~ ~override/TIBOOK04.itm~
  SAY NAME1 @252 /* ~Song to Celia~ */
  SAY NAME2 @252 /* ~Song to Celia~ */

  SAY DESC @254 /* ~Drinke to me, onely, with thine eyes,
And I will pledge with mine;
Or leave a kisse but in the cup,
And Ile not looke for wine.
The thirst, that from the soule doth rise,
Doth aske a drinke divine:
But might I of Joves Nectar sup,
I would not change for thine.
I sent thee, late, a rosie wreath,
Not so much honoring thee,
As giving it a hope, that there
It could not withered bee.
But thou thereon didst onely breath,
And sentst it back to mee:
Since when it growes, and smells, I sweare,
Not of it selfe, but thee.~ */

// 5.
COPY ~bg1re/TICam/items/TIBOOK01.itm~ ~override/TIBOOK05.itm~
  SAY NAME1 @255 /* ~She Walks in Beauty~ */
  SAY NAME2 @255 /* ~She Walks in Beauty~ */

  SAY DESC @257 /* ~I. She walks in beauty, like the night
Of cloudless climes and starry skies;
And all thats best of dark and bright
Meet in her aspect and her eyes:
Thus mellowed to that tender light
Which heaven to gaudy day denies.

II. One shade the more, one ray the less,
Had half impaired the nameless grace
Which waves in every raven tress,
Or softly lightens oer her face;
Where thoughts serenely sweet express
How pure, how dear their dwelling place.

III. And on that cheek, and oer that brow,
So soft, so calm, yet eloquent,
The smiles that win, the tints that glow,
But tell of days in goodness spent,
A mind at peace with all below,
A heart whose love is innocent.~ */

// 6.
COPY ~bg1re/TICam/items/TIBOOK01.itm~ ~override/TIBOOK06.itm~
  SAY NAME1 @258 /* ~The Look~ */
  SAY NAME2 @258 /* ~The Look~ */

  SAY DESC @260 /* ~Strephon kissed me in the spring,
Robin in the fall,
But Colin only looked at me
And never kissed at all.
Strephons kiss was lost in jest,
Robins lost in play,
But the kiss in Colins eyes
Haunts me night and day.~ */

// 7.
COPY ~bg1re/TICam/items/TIBOOK01.itm~ ~override/TIBOOK07.itm~
  SAY NAME1 @261 /* ~I Loved You First~ */
  SAY NAME2 @261 /* ~I Loved You First~ */

  SAY DESC @263 /* ~I loved you first: but afterwards your love,
Outsoaring mine, sang such a loftier song
As drowned the friendly cooings of my dove.
Which owes the other most? My love was long,
And yours one moment seemed to wax more strong;
I loved and guessed at you, you contrued me
And loved me for what might or might not be
Nay, weights and measures do us both a wrong.
For verily love knows not mine or thine;
With separate I and thou free love has done,
For one is both and both are one in love:
Rich love knows nought of thine that is not mine;
Both have the strength and both the length thereof,
Both of us, of the love which makes us one.~ */

// 8.
COPY ~bg1re/TICam/items/TIBOOK01.itm~ ~override/TIBOOK08.itm~
  SAY NAME1 @264 /* ~When to her Lute Corinna Sings~ */
  SAY NAME2 @264 /* ~When to her Lute Corinna Sings~ */

  SAY DESC @266 /* ~When to her lute Corinna sings,
Her voice revives the leaden strings,
And doth in highest notes appear,
As any challenged echo clear;
But when she doth of mourning speak,
E'en with her sighs, the strings do break,
And as her lute doth live or die,
Led by her passion, so must I:
For when of pleasure she doth sing,
My thoughts enjoy a sudden spring,
But if she doth of sorrow speak,
E'en from my heart the strings do break.~ */

// 9.
COPY ~bg1re/TICam/items/TIBOOK01.itm~ ~override/TIBOOK09.itm~
  SAY NAME1 @267 /* ~The Passionate Shepherd to His Love~ */
  SAY NAME2 @267 /* ~The Passionate Shepherd to His Love~ */

  SAY DESC @269 /* ~Come live with me and be my love,
And we will all the pleasures prove
That valleys, groves, hills, and fields,
Woods, or steepy mountain yields.

And we will sit upon the rocks,
Seeing the shepherds feed their flocks,
By shallow rivers to whose falls
Melodious birds sing madrigals.

And I will make thee beds of roses
And a thousand fragrant posies,
A cap of flowers, and a kirtle
Embroidered all with leaves of myrtle;

A gown made of the finest wool
Which from our pretty lambs we pull;
Fair lined slippers for the cold,
With buckles of the purest gold;

A belt of straw and ivy buds,
With coral clasps and amber studs:
And if these pleasures may thee move,
Come live with me, and be my love.

The shepherds swains shall dance and sing
For thy delight each May morning:
If these delights thy mind may move,
Then live with me and be my love.~ */

// 10.
COPY ~bg1re/TICam/items/TIBOOK01.itm~ ~override/TIBOOK10.itm~
  SAY NAME1 @270 /* ~The Old Arcadia~ */
  SAY NAME2 @270 /* ~The Old Arcadia~ */

  SAY DESC @272 /* ~Yonder, my Claius, Urania lighted; the very horse, methought, bewailed to be so disburdened: and as for thee, poor Claius, when thou wentest to help her down, I saw reverence and desire so divide thee, that thou didst at one instant both blush and quake, and instead of bearing her wert ready to fall down thyself. There she sat, vouchsafing my cloak (then most gorgeous) under her: at yonder rising of the ground she turned herself, looking back towards her wonted abode, and because of her parting, bearing much sorrow in her eyes, the lightsomeness whereof had yet so natural a cheerfulness that it made even sorrow seem to smile; at that turning she spake to us all, opening the cherry of her lips, and Lord how greedily mine ears did feed upon the sweet words she uttered! And here she laid her hand over thine eyes, when she saw the tears springing in them, as if she would conceal them from other, and yet herself feel some of thy sorrow. But woe is me, yonder, yonder, did she put her foot into the boat, at that instant, as it were, dividing her heavenly beauty between the earth and the sea. But when she was embarked, did you not mark how the winds whistled and the seas danced for joy, how the sails did swell with pride, and all because they had Urania? O Urania, blessed be thou Urania, the sweetest fairness, and fairest sweetness!~ */

// 11.
COPY ~bg1re/TICam/items/TIBOOK01.itm~ ~override/TIBOOK11.itm~
  SAY NAME1 @273 /* ~The Decameron: Prince Galehaut~ */
  SAY NAME2 @273 /* ~The Decameron: Prince Galehaut~ */

  SAY DESC @275 /* ~As often, most gracious ladies, as, taking thought in myself, I mind me how very pitying you are all by nature, so often do I recognize that this present work will, to your thinking, have a grievous and a weariful beginning, inasmuch as the dolorous remembrance of the late pestiferous mortality, which it beareth on its forefront, is universally irksome to all who saw or otherwise knew it. But I would not therefore have this affright you from reading further, as if in the reading you were still to fare among sighs and tears. Let this grisly beginning be none other to you than is to wayfarers a rugged and steep mountain, beyond which is situate a most fair and delightful plain, which latter cometh so much the pleasanter to them as the greater was the hardship of the ascent and the descent; for, like as dolour occupieth the extreme of gladness, even so are miseries determined by imminent joyance. This brief annoy (I say brief, inasmuch as it is contained in few pages) is straightway succeeded by the pleasance and delight which I have already promised you and which, belike, were it not aforesaid, might not be looked for from such a beginning. And in truth, could I fairly have availed to bring you to my desire otherwise than by so rugged a path as this will be I had gladly done it; but being in a manner constrained thereto, for that, without this reminiscence of our past miseries, it might not be shown what was the occasion of the coming about of the things that will hereafter be read, I have brought myself to write them.~ */

// 12.
COPY ~bg1re/TICam/items/TIBOOK01.itm~ ~override/TIBOOK12.itm~
  SAY NAME1 @276 /* ~The Faerie Queene~ */
  SAY NAME2 @276 /* ~The Faerie Queene~ */

  SAY DESC @278 /* ~Lo I the man, whose Muse whilome did maske,
    As time her taught, in lowly Shepheards weeds,
    Am now enforst a far vnfitter taske,
    For trumpets sterne to chaunge mine Oaten reeds,
    And sing of Knights and Ladies gentle deeds;
    Whose prayses hauing slept in silence long,
    Me, all too meane, the sacred Muse areeds
    To blazon broad emongst her learned throng:
Fierce warres and faithfull loues shall moralize my song.~ */

// 13.
COPY ~bg1re/TICam/items/TIBOOK01.itm~ ~override/TIBOOK13.itm~
  SAY NAME1 @279 /* ~To the Virgins~ */
  SAY NAME2 @279 /* ~To the Virgins~ */

  SAY DESC @281 /* ~Gather ye rosebuds while ye may,
   Old Time is still a-flying;
And this same flower that smiles today
   Tomorrow will be dying.

The glorious lamp of heaven, the sun,
   The higher hes a-getting,
The sooner will his race be run,
   And nearer hes to setting.

That age is best which is the first,
   When youth and blood are warmer;
But being spent, the worse, and worst
   Times still succeed the former.

Then be not coy, but use your time,
   And while ye may, go marry;
For having lost but once your prime,
   You may forever tarry.~ */

// 14.
COPY ~bg1re/TICam/items/TIBOOK01.itm~ ~override/TIBOOK14.itm~
  SAY NAME1 @282 /* ~Change~ */
  SAY NAME2 @282 /* ~Change~ */

  SAY DESC @284 /* ~Change
Said the sun to the moon,
You cannot stay.

Change
Says the moon to the waters,
All is flowing.

Change
Says the fields to the grass,
Seed-time and harvest,
Chaff and grain.

You must change said,
Said the worm to the bud,
Though not to a rose,

Petals fade
That wings may rise
Borne on the wind.

You are changing
said death to the maiden, your wan face
To memory, to beauty.

Are you ready to change?
Says the thought to the heart, to let her pass
All your life long

For the unknown, the unborn
In the alchemy
Of the world's dream?

You will change,
says the stars to the sun,
Says the night to the stars.~ */


// 15.
COPY ~bg1re/TICam/items/TICRING.itm~ ~override/TICRING.itm~
  SAY NAME1 @289 /* ~Camryn's Ring~ */
  SAY NAME2 @289 /* ~Camryn's Ring~ */

  SAY DESC @290 /* ~This ring was the property of Camryn, the Master Illuminator and Scribe at Candlekeep. He loved learning and lore and was well-versed in the history of many people, places, and things. He gave this Ring of the Scholars to <CHARNAME> as a final parting gift when he finally left Candlekeep.

STATISTICS:
+1 to intelligence
+5 to Lore
Usable by:
All~ */





/* Minor Disclosures, by jastey */

BEGIN @99176 DESIGNATED 43 
LABEL bg1re_minor_disclosures
REQUIRE_FILE ~override/RE1_Installed.G3~ @14 /*~The Component "Amount of -ahem - details and BG-style vs. description text" is not installed.~ */

COMPILE ~bg1re/interruptions/C#LCINIT.baf~

COPY ~bg1re/interruptions/C#LCIN1W.cre~ ~Override/C#LCIN1W.cre~ 
   SAY NAME1 @192 /* ~Woman~ */ 
   SAY NAME2 @192 /* ~Woman~ */
WRITE_EVALUATED_ASCII 0x280 ~C#LCIN1W~ #32   // Death variable
WRITE_EVALUATED_ASCII 0x2cc ~C#LCIN1W~ #8   // dialogue
WRITE_EVALUATED_ASCII 0x248 ~C#LCIN1W~ #8   // Override script
WRITE_EVALUATED_ASCII 0x250 ~%tutu_var%SHOUT~ #8   // Class script  
WRITE_EVALUATED_ASCII 0x258 ~C#LCINIT~ #8   // Race script 

COPY ~bg1re/interruptions/C#LCIN1M.cre~ ~Override/C#LCIN1M.cre~ 
   SAY NAME1 @193 /* ~Man~ */ 
   SAY NAME2 @193 /* ~Man~ */
WRITE_EVALUATED_ASCII 0x280 ~C#LCIN1M~ #32   // Death variable
WRITE_EVALUATED_ASCII 0x2cc ~C#LCIN1M~ #8   // dialogue
WRITE_EVALUATED_ASCII 0x248 ~C#LCIN1M~ #8   // Override script
WRITE_EVALUATED_ASCII 0x250 ~%tutu_var%SHOUT~ #8   // Class script  

COPY ~bg1re/interruptions/C#LCIN2W.cre~ ~Override/C#LCIN2W.cre~ 
   SAY NAME1 @192 /* ~Woman~ */ 
   SAY NAME2 @192 /* ~Woman~ */
WRITE_EVALUATED_ASCII 0x280 ~C#LCIN2W~ #32   // Death variable
WRITE_EVALUATED_ASCII 0x2cc ~C#LCIN2W~ #8   // dialogue
WRITE_EVALUATED_ASCII 0x248 ~C#LCIN2W~ #8   // Override script
WRITE_EVALUATED_ASCII 0x250 ~%tutu_var%SHOUT~ #8   // Class script 

COPY ~bg1re/interruptions/C#LCIN2M.cre~ ~Override/C#LCIN2M.cre~ 
   SAY NAME1 @193 /* ~Man~ */ 
   SAY NAME2 @193 /* ~Man~ */
WRITE_EVALUATED_ASCII 0x280 ~C#LCIN2M~ #32   // Death variable
WRITE_EVALUATED_ASCII 0x2cc ~C#LCIN2M~ #8   // dialogue
WRITE_EVALUATED_ASCII 0x248 ~C#LCIN2M~ #8   // Override script
WRITE_EVALUATED_ASCII 0x250 ~%tutu_var%SHOUT~ #8   // Class script   
WRITE_EVALUATED_ASCII 0x260 ~C#LCINIT~ #8   // General script 


/* C#LCIN3W and C#LCIN3M - can turn into Doppelgangers so no "innocent" for them! */
COPY ~bg1re/interruptions/C#LCIN3W.cre~ ~Override/C#LCIN3W.cre~ 
   SAY NAME1 @192 /* ~Woman~ */ 
   SAY NAME2 @192 /* ~Woman~ */
WRITE_EVALUATED_ASCII 0x280 ~C#LCIN3W~ #32   // Death variable
WRITE_EVALUATED_ASCII 0x2cc ~C#LCIN3W~ #8   // dialogue
WRITE_EVALUATED_ASCII 0x248 ~C#LCIN3W~ #8   // Override script
WRITE_EVALUATED_ASCII 0x250 ~%tutu_scriptw%TASIGHT~ #8   // Class script    
WRITE_EVALUATED_ASCII 0x260 ~C#LCINIT~ #8   // General script 

COPY ~bg1re/interruptions/C#LCIN3M.cre~ ~Override/C#LCIN3M.cre~ 
   SAY NAME1 @193 /* ~Man~ */ 
   SAY NAME2 @193 /* ~Man~ */
WRITE_EVALUATED_ASCII 0x280 ~C#LCIN3M~ #32   // Death variable
WRITE_EVALUATED_ASCII 0x2cc ~C#LCIN3M~ #8   // dialogue
WRITE_EVALUATED_ASCII 0x248 ~C#LCIN3M~ #8   // Override script
WRITE_EVALUATED_ASCII 0x250 ~%tutu_scriptw%TASIGHT~ #8   // Class script  

COPY ~bg1re/interruptions/C#LCIN4W.cre~ ~Override/C#LCIN4W.cre~ 
   SAY NAME1 @192 /* ~Woman~ */ 
   SAY NAME2 @192 /* ~Woman~ */
WRITE_EVALUATED_ASCII 0x280 ~C#LCIN4W~ #32   // Death variable
WRITE_EVALUATED_ASCII 0x2cc ~C#LCIN4W~ #8   // dialogue
WRITE_EVALUATED_ASCII 0x248 ~C#LCIN4W~ #8   // Override script
WRITE_EVALUATED_ASCII 0x250 ~%tutu_var%SHOUT~ #8   // Class script   
WRITE_EVALUATED_ASCII 0x260 ~C#LCINIT~ #8   // General script 

COPY ~bg1re/interruptions/C#LCIN4M.cre~ ~Override/C#LCIN4M.cre~ 
   SAY NAME1 @193 /* ~Man~ */ 
   SAY NAME2 @193 /* ~Man~ */
WRITE_EVALUATED_ASCII 0x280 ~C#LCIN4M~ #32   // Death variable
WRITE_EVALUATED_ASCII 0x2cc ~C#LCIN4M~ #8   // dialogue
WRITE_EVALUATED_ASCII 0x248 ~C#LCIN4M~ #8   // Override script
WRITE_EVALUATED_ASCII 0x250 ~%tutu_var%SHOUT~ #8   // Class script 

COPY ~bg1re/interruptions/C#LCIN2M.cre~ ~Override/C#LCIN5M.cre~ 
   SAY NAME1 @193 /* ~Man~ */ 
   SAY NAME2 @193 /* ~Man~ */
WRITE_EVALUATED_ASCII 0x280 ~C#LCIN5M~ #32   // Death variable
WRITE_EVALUATED_ASCII 0x2cc ~C#LCIN5M~ #8   // dialogue
WRITE_EVALUATED_ASCII 0x248 ~C#LCIN5M~ #8   // Override script
WRITE_EVALUATED_ASCII 0x250 ~%tutu_var%SHOUT~ #8   // Class script 

COPY ~bg1re/interruptions/C#LCIN5W.cre~ ~Override/C#LCIN5W.cre~ 
   SAY NAME1 @192 /* ~Woman~ */ 
   SAY NAME2 @192 /* ~Woman~ */
WRITE_EVALUATED_ASCII 0x280 ~C#LCIN5W~ #32   // Death variable
WRITE_EVALUATED_ASCII 0x2cc ~C#LCIN5W~ #8   // dialogue
WRITE_EVALUATED_ASCII 0x248 ~C#LCIN5W~ #8   // Override script
WRITE_EVALUATED_ASCII 0x250 ~%tutu_var%SHOUT~ #8   // Class script   
WRITE_EVALUATED_ASCII 0x260 ~C#LCINIT~ #8   // General script 

COMPILE EVALUATE_BUFFER ~bg1re/interruptions/interruptions.d~

LAF extend_area_script STR_VAR area="%EBaldursGate_ElfsongTavern_L2%" bottom="bg1re/interruptions/c#lcint_ar0706.baf"   END
LAF extend_area_script STR_VAR area="%EBaldursGate_ElfsongTavern_L1%" bottom="bg1re/interruptions/c#lcint_ar0705.baf"   END




/* Cloakwood Lovers, by tibicina */
BEGIN @99180 /* ~Cloakwood Lovers, by tibicina~ */ DESIGNATED 44 
LABEL bg1re_cloakwood_lovers
REQUIRE_FILE ~override/RE1_Installed.G3~ @14 /*~The Component "Amount of -ahem - details and BG-style vs. description text" is not installed.~ */

ADD_JOURNAL TITLE (@41) @40 USING ~bg1re/tra/autotra/%LANGUAGE%/TICLove.tra~

/* BGT: remove journal entries upon transition to BGII */
ACTION_IF GAME_IS ~bgt~ THEN BEGIN
  EXTEND_TOP ~AR0602.bcs~ ~bg1re/TICLove/scripts/TICLove_AR0602.baf~ EVALUATE_BUFFER
	USING ~bg1re/tra/autotra/%LANGUAGE%/TICLove.tra~
END


//TIDISPER, TICORDEL and iron11: Dispero, Cordelia and chapel guard

COPY ~bg1re/TICLove/creatures/tidisper.cre~ ~override/tidisper.cre~ 
  SAY NAME1 @291 /* ~Dispero~ */
  SAY NAME2 @291 /* ~Dispero~ */
  WRITE_ASCII 0x280 ~TIDISPER~ #32  //DV
  WRITE_ASCII 0x2cc ~TIDISPER~ #8   //pre-joining dialogue file

COPY ~bg1re/TICLove/creatures/TICORDEL.cre~ ~override/TICORDEL.cre~
  SAY NAME1 @220 /* ~Cordelia~ */
  SAY NAME2 @220 /* ~Cordelia~ */
  WRITE_ASCII 0x280 ~TICORDEL~ #32  //DV
  WRITE_ASCII 0x2cc ~TICORDEL~ #8   //pre-joining dialogue file
  WRITE_EVALUATED_ASCII 0x258 ~INITDLG~ #8  // race script

COPY_EXISTING ~%tutu_var%iron11.cre~ ~override~  
  WRITE_ASCII 0x280 ~iron11~ #32  //DV

//Compiling files

COMPILE EVALUATE_BUFFER ~bg1re/TICLove/dialogues/TICLove.d~

//Component: This is adding our area files to the game

LAF extend_area_script STR_VAR area="%CloakwoodMines_L3%" top="bg1re/TICLove/scripts/AR8602.baf" END

